"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[347],{2347:function(e,t,r){r.r(t),r.d(t,{ExperimentPage:function(){return ks},default:function(){return Ts}});var n=r(91604),a=r(5710),i=r(89649),s=r(34510),l=r(74403),o=r(97206),c=r(5625);const d=c.I0;var u=r(65069);const p=(0,n.createContext)(null),h=e=>{let{children:t,actions:r}=e;const[a,i]=(0,n.useState)([]),[c,h]=(0,n.useState)(!1),[m,g]=(0,n.useState)(null),v=d(),f=(0,n.useCallback)((e=>{g(null),(()=>{const t=e.map((e=>{const t=r.getExperimentApi(e);return v(t).catch((e=>{s.default.logErrorAndNotifyUser(e)})),t.meta.id}));i((e=>(0,l.isEqual)(t,e)?e:t))})()}),[r,v]),y=(0,n.useMemo)((()=>({fetchExperiments:f,isLoadingExperiment:c,requestError:m,actions:r})),[r,f,c,m]);return(0,u.tZ)(p.Provider,{value:y,children:(0,u.tZ)(o.ZP,{shouldOptimisticallyRender:!0,requestIds:a,children:(e,r,n)=>(h(n.some((e=>a.includes(e.id)&&e.active))),m||n.forEach((e=>{e.error&&g(e.error)})),t)})})};var m=r(54547),g=r(97267),v=r(46276),f=r(72914);var y=r.p+"static/media/permission-denied-lock.16036747d57cd663d7df223781a447b2.svg",x=r(27011);function C(e){let{errorMessage:t}=e;const{theme:r}=(0,x.u)();return(0,u.BX)("div",{className:"center",children:[(0,u.tZ)("img",{style:{height:300,marginTop:80},src:y,alt:"permission denied"}),(0,u.tZ)("h1",{style:{paddingTop:10},children:"Permission Denied"}),(0,u.tZ)("h2",{"data-testid":"error-message",css:(0,f.iv)({color:r.colors.textSecondary},""),children:t||"The current user does not have permission to view this page."})]})}var b=r(25222);const Z=e=>{let{artifactLocation:t}=e;return(0,u.tZ)(u.HY,{children:t})},R=n.memo((e=>{let{experiment:t}=e;return(0,u.BX)("div",{css:S.container,children:[(0,u.BX)(x.T.Text,{color:"secondary",children:[(0,u.tZ)(b.Z,{id:"PZGZHV",defaultMessage:"Experiment ID"}),": ",t.experiment_id]}),(0,u.BX)(x.T.Text,{color:"secondary",children:[(0,u.tZ)(b.Z,{id:"8/7V3S",defaultMessage:"Artifact Location"}),": ",(0,u.tZ)(Z,{artifactLocation:t.artifact_location})]})]})})),S={container:e=>({display:"flex",gap:e.spacing.lg})};var E=r(78064),w=r(798),k=r(41166),T=r(86169);const B=()=>{const e=(0,n.useContext)(p);if(!e)throw new Error("Trying to use GetExperimentsContext actions outside of the context!");return e},M=n.memo((e=>{let{experiment:t}=e;const r=(0,c.v9)((e=>{const r=(0,k.aq)(t.experiment_id,e);return r?(e=>{var t;return(null===(t=Object.values(e).find((e=>e.getKey()===T._)))||void 0===t?void 0:t.value)||void 0})(r):""})),[a,i]=(0,n.useState)(!1),{actions:{setExperimentTagApi:s}}=B(),l=d(),o=(0,n.useCallback)((e=>{const r=s(t.experiment_id,T._,e);l(r).then((()=>i(!1)))}),[t.experiment_id,s,l]);return(0,u.tZ)(E.a,{title:(0,u.BX)("span",{css:I.collapsibleSectionHeader,children:[(0,u.tZ)(b.Z,{id:"wDwAdX",defaultMessage:"Description"})," ",!a&&(0,u.tZ)(x.B,{type:"link",onClick:()=>i(!0),children:(0,u.tZ)(b.Z,{id:"2YEXRM",defaultMessage:"Edit"})})]}),forceOpen:a,defaultCollapsed:!r,"data-test-id":"experiment-notes-section",children:(0,u.tZ)(w.U,{defaultMarkdown:r,onSubmit:o,onCancel:()=>i(!1),showEditor:a})})})),I={collapsibleSectionHeader:{height:"32px",lineHeight:"32px"}};var A=r(75677);const L=e=>{let{experiment:t}=e;const r=(0,a.Z)();return(0,u.tZ)(x.T.Text,{size:"xl",dangerouslySetAntdProps:{copyable:{text:t.name,icon:(0,u.tZ)(m.TIy,{}),tooltips:[r.formatMessage({id:"A7R0ii",defaultMessage:"Copy path"}),r.formatMessage({id:"JCboZ7",defaultMessage:"Path copied"})]}}})},D=e=>{let{copyText:t,showLabel:r=!0,icon:a}=e;const[i,s]=(0,n.useState)(!1);return(0,u.tZ)(m.ua7,{title:(0,u.tZ)(b.Z,{id:"X+boXI",defaultMessage:"Copied"}),dangerouslySetAntdProps:{visible:i},children:(0,u.tZ)(x.B,{type:"primary",onClick:()=>{navigator.clipboard.writeText(t),s(!0),setTimeout((()=>{s(!1)}),3e3)},onMouseLeave:()=>{s(!1)},icon:a,children:r&&(0,u.tZ)(b.Z,{id:"1Iq+NW",defaultMessage:"Copy"})})})};var N={name:"490tlg",styles:"display:flex;gap:4px"};const O=e=>{let{copyText:t}=e;return(0,u.BX)("div",{css:N,children:[(0,u.tZ)(x.e,{readOnly:!0,value:t,"data-test-id":"copy-box"}),(0,u.tZ)(D,{copyText:t})]})},H=e=>{let{visible:t,onCancel:r,link:n}=e;return(0,u.tZ)(m.u_l,{title:(0,u.tZ)(b.Z,{id:"ktiuki",defaultMessage:"Get Link"}),visible:t,onCancel:r,children:(0,u.tZ)(O,{copyText:n})})},P=()=>{const[e,t]=(0,n.useState)(!1);return(0,u.BX)(u.HY,{children:[(0,u.tZ)(H,{link:window.location.href,visible:e,onCancel:()=>t(!1)}),(0,u.tZ)(x.B,{type:"primary",onClick:()=>t(!0),"data-test-id":"share-button",children:(0,u.tZ)(b.Z,{id:"2oFAO4",defaultMessage:"Share"})})]})};var U=r(3969);var X={name:"ny5p0o",styles:"margin-left:16px"},W={name:"158icaa",styles:"margin-left:4px"};const _=n.memo((e=>{let{experiment:t}=e;const r=(0,n.useMemo)((()=>t.name.split("/").pop()),[t.name]),a=(0,U.E)();return(0,u.tZ)(A.mr,{title:(0,u.BX)("div",{css:K.headerWrapper,children:[r," ",(0,u.tZ)(L,{experiment:t})," ",a&&(0,u.BX)("a",{href:a,target:"_blank",rel:"noreferrer",children:[(0,u.tZ)(x.B,{css:X,type:"link",size:"small",children:(0,u.tZ)(b.Z,{id:"d78wwA",defaultMessage:"Provide Feedback"})}),(0,u.tZ)(x.N,{css:W})]})]}),breadcrumbs:[],children:(0,u.tZ)(P,{})})})),K={sendFeedbackPopoverContent:{display:"flex",maxWidth:250,flexDirection:"column",alignItems:"flex-end"},headerWrapper:e=>({display:"inline-flex",gap:e.spacing.sm,alignItems:"center"})},F=n.memo((e=>{let{experiments:t}=e;const r=(0,n.useMemo)((()=>(0,u.tZ)(b.Z,{id:"Dhn7Mb",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:t.length}})),[t.length]);return(0,u.tZ)(A.mr,{title:r,breadcrumbs:[],children:(0,u.tZ)(P,{})})}));var V=r(53033),z=r(13558);const $=(e,t)=>{const{experiments:r}=t,n=r.map((e=>e.experiment_id)),a=n.length>1,i=Object.values(e.entities.runInfosByUuid).filter((e=>{let{experiment_id:t}=e;return n.includes(t)})).map((e=>{let{run_uuid:t}=e;return t})),{modelVersionsByRunUuid:s,runUuidsMatchingFilter:l}=e.entities,o=((e,t,r)=>{let{lifecycleFilter:n=V.VW.ACTIVE,modelVersionFilter:a=V.CN.ALL_RUNS}=r;const{modelVersionsByRunUuid:i}=t.entities;return e.map((e=>(0,k.hQ)(e,t))).filter((e=>n===V.VW.ACTIVE?"active"===e.lifecycle_stage:"deleted"===e.lifecycle_stage)).filter((e=>a===V.CN.ALL_RUNS||(a===V.CN.WITH_MODEL_VERSIONS?e.run_uuid in i:a===V.CN.WTIHOUT_MODEL_VERSIONS?!(e.run_uuid in i):(console.warn("Invalid input to model version filter - defaulting to showing all runs."),!0))))})(i,e,t),c=new Set,d=new Set,u=o.map((t=>e.entities.runDatasetsByUuid[t.run_uuid])),p=o.map((t=>{const r=(0,z.nQ)(t.run_uuid,e),n=Object.values(r||{});return n.forEach((e=>{c.add(e.key)})),n})),h=o.map((t=>{const r=Object.values((0,k.Qf)(t.run_uuid,e));return r.forEach((e=>{d.add(e.key)})),r})),m=o.map((t=>(0,k.Ml)(t.run_uuid,e))),g=n[0];return{modelVersionsByRunUuid:s,experimentTags:a?{}:(0,k.aq)(g,e),runInfos:o,paramsList:h,tagsList:m,metricsList:p,runUuidsMatchingFilter:l,datasetsList:u,metricKeyList:Array.from(c.values()).sort(),paramKeyList:Array.from(d.values()).sort()}};var j=r(73409);class Y extends n.Component{handleSortBy(){const{canonicalSortKey:e,orderByAsc:t,orderByKey:r}=this.props;let n=!t;e!==r&&(n=!1),this.props.onSortBy(e,n)}render(){const{enableSorting:e,canonicalSortKey:t,displayName:r,getClassName:n=(()=>""),orderByKey:a,orderByAsc:i}=this.props;return(0,u.BX)("div",{role:"columnheader",css:q.headerLabelWrapper(e),className:n(t),onClick:e?()=>this.handleSortBy():void 0,children:[(0,u.tZ)("span",{"data-test-id":`sort-header-${r}`,children:r}),e&&t===a?i?(0,u.tZ)(m.TV4,{}):(0,u.tZ)(m.mcG,{}):null]})}}const q={headerLabelWrapper:e=>t=>({height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",svg:{color:t.colors.textSecondary},"&:hover":{color:e?t.colors.actionTertiaryTextHover:"unset",svg:{color:t.colors.actionTertiaryTextHover}}}),headerSortIcon:{marginRight:4}},G=()=>(0,u.tZ)(m.oOx,{css:e=>({color:e.colors.textValidationDanger})}),J=()=>(0,u.tZ)(m.rE2,{css:e=>({color:e.colors.textValidationSuccess})}),Q=e=>{switch(e){case"FAILED":case"KILLED":return(0,u.tZ)(G,{});case"FINISHED":return(0,u.tZ)(J,{});case"SCHEDULED":return(0,u.tZ)(m.T39,{});default:return null}},ee=n.memo((e=>{let{value:{startTime:t,referenceTime:r,runStatus:n}}=e;return(0,u.BX)("span",{css:te.cellWrapper,title:s.default.formatTimestamp(t),children:[Q(n),s.default.timeSinceStr(t,r)]})})),te={cellWrapper:e=>({display:"flex",alignItems:"center",gap:e.spacing.sm,svg:{width:14,height:14}})};var re=r(79294),ne=r(54419);const ae=n.memo((e=>{let{data:t,value:r}=e;return(0,u.tZ)(re.rU,{to:ne.Z.getExperimentPageRoute(t.experimentId),title:r.name,children:r.basename})})),ie=e=>{let{text:t,maxSize:r,className:a,allowShowMore:i=!1}=e;if(t.length<=r)return(0,u.tZ)("span",{className:a,children:t});const s=`${t.substr(0,r)}...`,[l,o]=(0,n.useState)(!1);return(0,u.BX)("span",{className:a,children:[l?t:s,i&&(0,u.tZ)(x.B,{type:"link",onClick:()=>o(!l),size:"small",css:se.expandButton,"data-test-id":"trimmed-text-button",children:l?"collapse":"expand"})]})},se={expandButton:{display:"inline-block"}};var le=r.p+"static/media/logged-model.dd9b21ff4fb07f3cadeada8046a2693b.svg";var oe=r.p+"static/media/registered-model.24429a4f6158e57b01b3928e2605aa25.svg",ce=r(99725);const de=n.memo((e=>{const{registeredModels:t,loggedModels:r,experimentId:n,runUuid:a}=e.value,i=s.default.mergeLoggedAndRegisteredModels(r,t);if(i&&i.length){const e=i[0];let t;if(e.registeredModelName){const{registeredModelName:r,registeredModelVersion:n}=e;t=(0,u.BX)(u.HY,{children:[(0,u.tZ)("img",{"data-test-id":"registered-model-icon",alt:"",title:"Registered Model",src:oe}),(0,u.BX)("a",{href:s.default.getIframeCorrectedRoute((0,ce.u5)(r,n)),className:"registered-model-link",target:"_blank",rel:"noreferrer",children:[(0,u.tZ)(ie,{text:r,maxSize:10,className:"model-name"}),`/${n}`]})]})}else if(e.flavors){const r=e.flavors?e.flavors[0]:"Model",i=s.default.getIframeCorrectedRoute(`${ne.Z.getRunPageRoute(n,a)}/artifactPath/${e.artifactPath}`);t=(0,u.BX)(u.HY,{children:[(0,u.tZ)("img",{"data-test-id":"logged-model-icon",alt:"",title:"Logged Model",src:le}),(0,u.tZ)("a",{href:i,target:"_blank",className:"logged-model-link",children:r})]})}return(0,u.BX)("div",{className:"logged-model-cell",css:ue.imageWrapper,children:[t,r.length>1?`, ${r.length-1} more`:""]})}return(0,u.tZ)(u.HY,{children:"-"})})),ue={imageWrapper:{img:{height:"15px",position:"relative",marginRight:"4px"}}},pe=n.memo((e=>{let{value:t}=e;const r=s.default.renderSource(t,void 0,void 0);return r?(0,u.BX)(u.HY,{children:[s.default.renderSourceTypeIcon(t),r]}):(0,u.tZ)(u.HY,{children:"-"})})),he=n.memo((e=>{let{value:{version:t,name:r,type:n}}=e;return s.default.renderSourceVersion(t,r,n)||(0,u.tZ)(u.HY,{children:"-"})}));var me=r(98081);const{formatTimestamp:ge,getDuration:ve,getRunNameFromTags:fe,getSourceType:ye,getSourceName:xe,getUser:Ce}=s.default,be=e=>e.reduce(((e,t)=>({...e,[t.key]:t})),{}),Ze=e=>void 0===e?"":/[,"\r\n]/.test(e)?'"'+e.replace(/"/g,'""')+'"':e,Re=e=>{const{runInfos:t,paramKeyList:r,metricKeyList:n,tagKeyList:a,paramsList:i,metricsList:s,tagsList:l}=e;return((e,t)=>{let r,n="";for(r=0;r<e.length;r++)n+=Ze(e[r]),r<e.length-1&&(n+=",");for(n+="\n",r=0;r<t.length;r++){for(let e=0;e<t[r].length;e++)n+=Ze(t[r][e]),e<t[r].length-1&&(n+=",");n+="\n"}return n})(["Start Time","Duration","Run ID","Name","Source Type","Source Name","User","Status",...r,...n,...a],t.map(((e,t)=>{const o=[ge(e.start_time),ve(e.start_time,e.end_time)||"",e.run_uuid,e.run_name||fe(l[t]),ye(l[t]),xe(l[t]),Ce(e,l[t]),e.status],c=be(i[t]),d=be(s[t]),u=l[t];return r.forEach((e=>{c[e]?o.push(c[e].value):o.push("")})),n.forEach((e=>{d[e]?o.push(d[e].value):o.push("")})),a.forEach((e=>{u[e]?o.push(u[e].value):o.push("")})),o})))},Se="$$$param$$$",Ee="$$$metric$$$",we="$$$tag$$$",ke="mlflow.parentRunId";let Te=function(e){return e.SHOWALL="SHOWALL",e.HIDEALL="HIDEALL",e}({});const Be=(e,t)=>{let r="";return(t.includes('"')||t.includes(" ")||t.includes("."))&&(r="`"),t.includes("`")&&(r='"'),`${e}.${r}${t}${r}`},Me={mouseEnterDelay:0,mouseLeaveDelay:0},Ie=n.memo((e=>{const{pinned:t,hidden:r}=e.value;return(0,u.BX)("div",{css:Ae.actionsContainer,children:[(0,u.tZ)(m.ua7,{dangerouslySetAntdProps:Me,placement:"right",title:r?(0,u.tZ)(b.Z,{id:"xmpvlI",defaultMessage:"Unhide run"}):(0,u.tZ)(b.Z,{id:"qTjYVU",defaultMessage:"Hide run"}),children:(0,u.BX)("label",{css:Ae.actionCheckbox,className:"is-visibility-toggle",children:[(0,u.tZ)("input",{type:"checkbox",checked:!r,onChange:()=>{e.onToggleVisibility(e.data.runUuid)}}),r?(0,u.tZ)(m.wJG,{}):(0,u.tZ)(m.bMb,{})]})}),e.data.pinnable&&(0,u.tZ)(m.ua7,{dangerouslySetAntdProps:Me,placement:"right",title:t?(0,u.tZ)(b.Z,{id:"ugm2f6",defaultMessage:"Unpin run"}):(0,u.tZ)(b.Z,{id:"fjiojF",defaultMessage:"Pin run"}),children:(0,u.BX)("label",{css:Ae.actionCheckbox,className:"is-pin-toggle","data-testid":"column-pin-toggle",children:[(0,u.tZ)("input",{type:"checkbox",checked:t,onChange:()=>{e.onTogglePin(e.data.runUuid)}}),t?(0,u.tZ)(m.D$V,{}):(0,u.tZ)(m.qQX,{})]})})]})}),((e,t)=>e.value.hidden===t.value.hidden&&e.value.pinned===t.value.pinned)),Ae={actionsContainer:()=>({display:"flex",gap:18}),actionCheckbox:e=>({input:{width:0,appearance:"none"},cursor:"pointer",display:"flex",svg:{width:14,height:14,cursor:"pointer"},"&.is-pin-toggle svg":{color:"transparent",".ag-row:hover &":{color:e.colors.grey600}},"&.is-visibility-toggle svg":{color:e.colors.grey400,".ag-row:hover &":{color:e.colors.grey600}},"& input:checked + span svg":{color:e.colors.grey600}})},Le=n.memo((e=>(0,u.BX)(m.h_2.Root,{modal:!1,children:[(0,u.tZ)(m.h_2.Trigger,{asChild:!0,children:(0,u.tZ)("button",{css:De.actionButton,"data-testid":"experiment-view-runs-visibility-column-header",children:(0,u.tZ)(m.bMb,{})})}),(0,u.BX)(m.h_2.Content,{children:[(0,u.BX)(m.h_2.Item,{onClick:()=>e.onToggleVisibility(Te.HIDEALL),"data-testid":"experiment-view-runs-visibility-hide-all",children:[(0,u.tZ)(m.h_2.IconWrapper,{children:(0,u.tZ)(m.wJG,{})}),(0,u.tZ)(b.Z,{id:"UEESlL",defaultMessage:"Hide all runs"})]}),(0,u.BX)(m.h_2.Item,{onClick:()=>e.onToggleVisibility(Te.SHOWALL),"data-testid":"experiment-view-runs-visibility-show-all",children:[(0,u.tZ)(m.h_2.IconWrapper,{children:(0,u.tZ)(m.bMb,{})}),(0,u.tZ)(b.Z,{id:"4yjF8O",defaultMessage:"Show all runs"})]})]})]}))),De={actionButton:e=>({background:"transparent",border:"none",cursor:"pointer",padding:"8px",".ag-checkbox:not(.ag-hidden) + &":{padding:"0 1px"},svg:{width:14,height:14,cursor:"pointer",color:e.colors.grey600}})},Ne=n.memo((e=>{let{onExpand:t,data:{runName:r,experimentId:n,runUuid:a,runDateAndNestInfo:i,color:s}}=e;const{hasExpander:l,expanderOpen:o,childrenIds:c,level:d}=i||{},p=!isNaN(d)&&l;return(0,u.BX)("div",{css:Oe.cellWrapper,children:[(0,u.tZ)("div",{css:Oe.expanderWrapper,children:(0,u.tZ)("div",{css:Oe.nestLevel(d),children:p&&(0,u.tZ)(x.B,{css:Oe.expanderButton,size:"small",onClick:()=>{t(a,c)},type:"link",icon:o?(0,u.tZ)(m.uSo,{}):(0,u.tZ)(m.IAe,{})},"Expander-"+a)})}),(0,u.BX)(re.rU,{to:ne.Z.getRunPageRoute(n,a),css:Oe.runLink,children:[(0,u.tZ)("div",{css:Oe.colorPill,"data-testid":"experiment-view-table-run-color",style:{backgroundColor:s}}),(0,u.tZ)("span",{css:Oe.runName,children:r})]})]})})),Oe={link:e=>({display:"inline-block",minWidth:e.typography.fontSizeBase,minHeight:e.typography.fontSizeBase}),cellWrapper:{display:"flex"},expanderButton:{svg:{width:12,height:12}},runLink:{overflow:"hidden",display:"flex",gap:8,alignItems:"center"},runName:{overflow:"hidden",textOverflow:"ellipsis"},expanderWrapper:{display:"none",".ag-grid-expanders-visible &":{display:"block"}},colorPill:{width:12,height:12,borderRadius:6,flexShrink:0,"@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)":{marginBottom:1}},nestLevel:e=>t=>({display:"flex",justifyContent:"flex-end",width:(e+1)*t.spacing.lg,height:t.spacing.lg})};var He={name:"gikiyg",styles:"display:flex;justify-content:center;align-items:center;height:32px"};const Pe=n.memo((e=>{let{loadMoreRunsFunc:t}=e;return(0,u.tZ)("div",{css:He,children:(0,u.tZ)(x.B,{type:"primary",onClick:t,size:"small",children:(0,u.tZ)(b.Z,{id:"9CqEWy",defaultMessage:"Load more"})})})}));var Ue=r(77909);const Xe=e=>{let{datasetWithTags:t,onDatasetSelected:r,appendComma:n=!1,inPopover:a=!1}=e;const{theme:i}=(0,x.u)(),{dataset:s,tags:l}=t;if(!s)return null;const o=null===l||void 0===l?void 0:l.find((e=>{let{key:t}=e;return t===j.Ak}));return(0,u.BX)("div",{css:(0,f.iv)({display:"flex",flexShrink:0,alignItems:"center",overflow:"hidden",marginRight:i.spacing.xs},""),children:[(0,u.tZ)(m.$eq,{css:(0,f.iv)({color:i.colors.textSecondary,marginRight:i.spacing.xs},"")})," ",(0,u.tZ)("span",{css:(0,f.iv)({minWidth:32,marginRight:i.spacing.xs,flexShrink:0},""),children:a?(0,u.tZ)(m.J2e.Close,{asChild:!0,children:(0,u.tZ)(x.B,{type:"link",onClick:r,children:(0,u.BX)("span",{children:[s.name," (",s.digest,")"]})})}):(0,u.tZ)(x.B,{type:"link",onClick:r,children:(0,u.BX)("span",{children:[s.name," (",s.digest,")"]})})}),o&&(0,u.tZ)(m.Vp9,{css:(0,f.iv)({textTransform:"capitalize",marginRight:i.spacing.xs},""),children:o.value}),n&&(0,u.tZ)(u.HY,{children:","})]})};var We={name:"zjik7",styles:"display:flex"},_e={name:"eq7f8j",styles:"display:flex;align-items:flex-end"};const Ke=n.memo((e=>{let{value:t,data:r,onDatasetSelected:a,expandRows:i}=e;const s=(0,n.useRef)(null),[o,c]=(0,n.useState)(0),d=(0,n.useMemo)((()=>t.slice(0,3)),[t]),{theme:p}=(0,x.u)();(0,n.useEffect)((()=>{if(!s.current)return()=>{};const e=(0,l.throttle)((e=>{let[t]=e;if(i){const e=t.contentRect.height;let r=0,n=0;for(let a=0;a<t.target.children.length;a++){const i=t.target.children.item(a);if(n+i.clientHeight>e)break;n+=i.clientHeight,r++}c(r)}else{const e=t.contentRect.width;let r=0,n=0;for(let a=0;a<t.target.children.length;a++){const i=t.target.children.item(a);if(n+i.clientWidth>=e)break;n+=i.clientWidth,r++}c(r)}}),100),t=new ResizeObserver(e);return t.observe(s.current),()=>t.disconnect()}),[i]);const h=t.length-o;if(!t||t.length<1)return(0,u.tZ)(u.HY,{children:"-"});const g=i?d:t;return(0,u.BX)("div",{css:We,children:[(0,u.tZ)("div",{css:(0,f.iv)({overflow:"hidden",display:"flex",flexDirection:i?"column":"row"},""),ref:s,children:g.map(((e,t)=>(0,u.tZ)(Xe,{appendComma:!i&&t<d.length-1,datasetWithTags:e,onDatasetSelected:()=>null===a||void 0===a?void 0:a(e,r)},`${e.dataset.name}-${e.dataset.digest}`)))}),h>0&&(0,u.BX)("div",{css:_e,children:[!i&&(0,u.tZ)("span",{css:(0,f.iv)({paddingLeft:p.spacing.xs,paddingRight:p.spacing.xs},""),children:"\u2026"}),(0,u.BX)(m.J2e.Root,{modal:!1,children:[(0,u.tZ)(m.J2e.Trigger,{asChild:!0,children:(0,u.tZ)(x.B,{size:"small",style:{borderRadius:"8px",width:"40px"},children:(0,u.BX)(x.T.Text,{color:"secondary",children:["+",h]})})}),(0,u.tZ)(m.J2e.Content,{align:"start",children:t.slice(t.length-h).map((e=>(0,u.tZ)("div",{css:(0,f.iv)({height:p.general.heightSm,display:"flex",alignItems:"center"},""),children:(0,u.tZ)(Xe,{datasetWithTags:e,onDatasetSelected:()=>null===a||void 0===a?void 0:a(e,r),inPopover:!0})},`${e.dataset.name}-${e.dataset.digest}`)))})]})]})]})})),Fe=e=>e?70:104,Ve=(e,t)=>e+".`"+t+"`",ze=(e,t)=>e.startsWith(t),$e=(e,t)=>e.substring(t.length+2).slice(0,-1),je=e=>`${Se}-${e}`,Ye=e=>`${Ee}-${e}`,qe=e=>`${we}-${e}`,Ge={[j.XZ.USER]:Ve(j.D5.ATTRIBUTES,"User"),[j.XZ.RUN_NAME]:Ve(j.D5.ATTRIBUTES,"Run Name"),[j.XZ.SOURCE]:Ve(j.D5.ATTRIBUTES,"Source"),[j.XZ.VERSION]:Ve(j.D5.ATTRIBUTES,"Version")},Je=e=>{let{data:t}=e;return t.runUuid},Qe=e=>{let{rowNode:t}=e;return t.data.isLoadMoreRow},et=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[j.z.USER,j.z.SOURCE,j.z.VERSION,j.z.MODELS];return(0,Ue.GW)()&&t.push(j.z.DATASET),e&&t.push(j.z.EXPERIMENT_NAME),t},tt=e=>{let{searchFacetsState:t,onSortBy:r,compareExperiments:a,onTogglePin:i,onToggleVisibility:o,onExpand:c,paramKeyList:d,metricKeyList:u,tagKeyList:p,columnApi:h,onDatasetSelected:m,isComparingRuns:g,expandRows:v}=e;const{orderByAsc:f,orderByKey:y,selectedColumns:x}=t,C=(e=>{let{paramKeyList:t,metricKeyList:r,tagKeyList:a}=e;const i=(0,n.useRef)(new Set),s=(0,n.useRef)(new Set),l=(0,n.useRef)(new Set),o=(0,n.useMemo)((()=>(t.forEach((e=>s.current.add(e))),Array.from(s.current))),[t]),c=(0,n.useMemo)((()=>(r.forEach((e=>i.current.add(e))),Array.from(i.current))),[r]),d=(0,n.useMemo)((()=>(a.forEach((e=>l.current.add(e))),Array.from(l.current))),[a]);return(0,n.useMemo)((()=>({paramKeys:o,metricKeys:c,tagKeys:d})),[c,o,d])})({metricKeyList:u,tagKeyList:p,paramKeyList:d}),b=(0,n.useMemo)((()=>{const e={orderByKey:y,orderByAsc:f,onSortBy:r},t=e=>e===y?"is-ordered-by":void 0,n=e=>t(e),d=e=>{let{colDef:r}=e;return t(r.headerComponentParams.canonicalSortKey)},u=[];if(u.push({valueGetter:e=>{let{data:{pinned:t,hidden:r}}=e;return{pinned:t,hidden:r}},checkboxSelection:!g,headerComponent:"RowActionsHeaderCellRenderer",headerComponentParams:{onToggleVisibility:o},headerCheckboxSelection:!g,headerName:"",cellClass:"is-checkbox-cell",cellRenderer:"RowActionsCellRenderer",cellRendererParams:{onTogglePin:i,onToggleVisibility:o},pinned:"left",minWidth:Fe(g),width:Fe(g),maxWidth:Fe(g),resizable:!1}),u.push({headerName:j.z.RUN_NAME,colId:Ge[j.XZ.RUN_NAME],headerTooltip:j.XZ.RUN_NAME,pinned:"left",sortable:!0,field:"runDateAndNestInfo",cellRenderer:"RunNameCellRenderer",cellRendererParams:{onExpand:c},equals:(e,t)=>(0,l.isEqual)(e,t),headerComponentParams:{...e,canonicalSortKey:j.XZ.RUN_NAME,getClassName:n},cellClass:d,initialWidth:310,resizable:!g}),g)return u;u.push({headerName:j.z.DATE,headerTooltip:j.XZ.DATE,pinned:"left",sortable:!0,field:"runDateAndNestInfo",cellRenderer:"DateCellRenderer",cellRendererParams:{onExpand:c},equals:(e,t)=>(0,l.isEqual)(e,t),headerComponentParams:{...e,canonicalSortKey:j.XZ.DATE,getClassName:n},cellClass:d,initialWidth:150}),(0,Ue.GW)()&&u.push({headerName:j.z.DATASET,colId:Ve(j.D5.ATTRIBUTES,j.z.DATASET),headerTooltip:j.z.DATASET,sortable:!1,field:"datasets",cellRenderer:"DatasetsCellRenderer",cellRendererParams:{onDatasetSelected:m,expandRows:v},cellClass:"is-multiline-cell",initialWidth:300}),u.push({headerName:j.z.DURATION,field:"duration",initialWidth:80,cellClass:d}),a&&u.push({headerName:j.z.EXPERIMENT_NAME,colId:Ve(j.D5.ATTRIBUTES,j.z.EXPERIMENT_NAME),field:"experimentName",cellRenderer:"ExperimentNameCellRenderer",equals:(e,t)=>(0,l.isEqual)(e,t),initialWidth:140,cellClass:d,initialHide:!0}),u.push({headerName:j.z.USER,colId:Ge[j.XZ.USER],headerTooltip:j.XZ.USER,field:"user",sortable:!0,headerComponentParams:{...e,canonicalSortKey:j.XZ.USER,getClassName:n},cellClass:d,initialHide:!0}),u.push({headerName:j.z.SOURCE,colId:Ge[j.XZ.SOURCE],field:"tags",cellRenderer:"SourceCellRenderer",equals:(e,t)=>s.default.getSourceName(e)===s.default.getSourceName(t),sortable:!0,headerComponentParams:{...e,canonicalSortKey:j.XZ.SOURCE,getClassName:n},cellClass:d,initialHide:!0}),u.push({headerName:j.z.VERSION,colId:Ge[j.XZ.VERSION],field:"version",cellRenderer:"VersionCellRenderer",equals:(e,t)=>(0,l.isEqual)(e,t),sortable:!0,headerComponentParams:{...e,canonicalSortKey:j.XZ.VERSION,getClassName:n},cellClass:d,initialHide:!0}),u.push({headerName:j.z.MODELS,colId:Ve(j.D5.ATTRIBUTES,j.z.MODELS),field:"models",cellRenderer:"ModelsCellRenderer",initialWidth:200,equals:(e,t)=>(0,l.isEqual)(e,t),initialHide:!0});const{metricKeys:p,paramKeys:h,tagKeys:x}=C;return p.length&&u.push({headerName:"Metrics",groupId:j.D5.METRICS,children:p.map((t=>{const r=Ve(j.D5.METRICS,t);return{headerName:t,colId:r,headerTooltip:Be(j.D5.METRICS,t),field:Ye(t),tooltipField:Ye(t),initialWidth:100,initialHide:!0,sortable:!0,headerComponentParams:{...e,canonicalSortKey:r,getClassName:n},cellClass:e=>`${d(e)} is-previewable-cell`}}))}),h.length&&u.push({headerName:"Parameters",groupId:j.D5.PARAMS,children:h.map((t=>{const r=Ve(j.D5.PARAMS,t);return{colId:r,headerName:t,headerTooltip:Be(j.D5.PARAMS,t),field:je(t),tooltipField:je(t),initialHide:!0,initialWidth:100,sortable:!0,headerComponentParams:{...e,canonicalSortKey:r,getClassName:n},cellClass:e=>`${d(e)} is-previewable-cell`}}))}),x.length&&u.push({headerName:"Tags",colId:j.D5.TAGS,children:x.map((e=>({colId:Ve(j.D5.TAGS,e),headerName:e,initialHide:!0,initialWidth:100,headerTooltip:Be(j.D5.TAGS,e),field:qe(e),tooltipField:qe(e)})))}),u}),[y,f,r,i,o,c,a,C,g,m,v]),Z=(0,n.useMemo)((()=>[...et(!0).map((e=>Ve(j.D5.ATTRIBUTES,e))),...C.paramKeys.map((e=>Ve(j.D5.PARAMS,e))),...C.metricKeys.map((e=>Ve(j.D5.METRICS,e))),...C.tagKeys.map((e=>Ve(j.D5.TAGS,e)))]),[C]);return(0,n.useEffect)((()=>{if(h&&!g)for(const e of Z){const t=x.includes(e);h.setColumnVisible(e,t)}}),[x,h,Z,g]),b},rt={initialWidth:100,autoSizePadding:0,headerComponentParams:{menuIcon:"fa-bars"},resizable:!0,filter:!0,suppressMenu:!0,suppressMovable:!0};var nt=r(54383),at=r(68294);class it extends n.Component{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(){const e=[];return this.props.selectedRunIds.forEach((t=>{e.push(this.props.deleteRunApi(t))})),Promise.all(e).catch((()=>{this.props.openErrorModal("While deleting an experiment run, an error occurred.")}))}render(){const e=this.props.selectedRunIds.length;return(0,u.tZ)(at.s,{isOpen:this.props.isOpen,onClose:this.props.onClose,handleSubmit:this.handleSubmit,title:`Delete Experiment ${s.default.pluralize("Run",e)}`,helpText:(0,u.BX)("div",{children:[(0,u.tZ)("p",{children:(0,u.BX)("b",{children:[e," experiment ",s.default.pluralize("run",e)," will be deleted."]})}),""]}),confirmButtonText:"Delete"})}}const st={deleteRunApi:i.Gd,openErrorModal:i.yQ};var lt=(0,c.$j)(null,st)(it),ot=r(96648);class ct extends n.Component{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(){const e=[];return this.props.selectedRunIds.forEach((t=>{e.push(this.props.restoreRunApi(t))})),Promise.all(e).catch((e=>{let t="While restoring an experiment run, an error occurred.";e.textJson&&"RESOURCE_LIMIT_EXCEEDED"===e.textJson.error_code&&(t=t+" "+e.textJson.message),this.props.openErrorModal(t)}))}render(){const e=this.props.selectedRunIds.length;return(0,u.tZ)(at.s,{isOpen:this.props.isOpen,onClose:this.props.onClose,handleSubmit:this.handleSubmit,title:`Restore Experiment ${s.default.pluralize("Run",e)}`,helpText:`${e} experiment ${s.default.pluralize("run",e)} will be restored.`,confirmButtonText:"Restore"})}}const dt={restoreRunApi:i.Y1,openErrorModal:i.yQ};var ut=(0,c.$j)(null,dt)(ct),pt=r(33871),ht=r.n(pt);const mt=()=>{const e=(0,nt.UO)(),t=(0,nt.TH)(),r=(0,n.useMemo)((()=>decodeURIComponent(t.search)),[t.search]),a=(0,n.useMemo)((()=>{const e=ht().parse(r.substring(1));if(e.experiments){const t=e.experiments;return(null===t||void 0===t?void 0:t.toString())||""}return""}),[r]);return(0,n.useMemo)((()=>{if(null!==e&&void 0!==e&&e.experimentId)return[null===e||void 0===e?void 0:e.experimentId];if(a)try{return JSON.parse(a)}catch{return s.default.logErrorAndNotifyUser(`Could not parse experiment query parameter ${a}`),""}return[]}),[a,null===e||void 0===e?void 0:e.experimentId])},gt=e=>{const{lifecycleFilter:t,modelVersionFilter:r,searchFilter:n,startTime:a,orderByAsc:i,orderByKey:s}=new ft;return{...e,lifecycleFilter:t,modelVersionFilter:r,searchFilter:n,startTime:a,orderByAsc:i,orderByKey:s}},vt=e=>{const{lifecycleFilter:t,modelVersionFilter:r,searchFilter:n,startTime:a}=e;return Boolean(t!==j.FJ||r!==j.oj||n||a!==j.wi)};class ft{constructor(){this.searchFilter="",this.orderByKey=j.gB,this.orderByAsc=j.yG,this.startTime=j.wi,this.lifecycleFilter=j.FJ,this.modelVersionFilter=j.oj,this.selectedColumns=(()=>{const e=[Ve(j.D5.ATTRIBUTES,j.z.SOURCE),Ve(j.D5.ATTRIBUTES,j.z.MODELS)];return(0,Ue.GW)()&&e.push(Ve(j.D5.ATTRIBUTES,j.z.DATASET)),e})(),this.runsExpanded={},this.runsPinned=[],this.runsHidden=[],this.compareRunsMode=void 0,this.compareRunCharts=void 0}}var yt=r(96120),xt=r(39270);const Ct={ALL:null,LAST_HOUR:36e5,LAST_24_HOURS:864e5,LAST_7_DAYS:6048e5,LAST_30_DAYS:2592e6,LAST_YEAR:31104e6},bt=(e,t,r,n)=>{const a=t.lifecycleFilter===V.VW.ACTIVE?xt.bW.ACTIVE_ONLY:xt.bW.DELETED_ONLY,{runsPinned:i}=t,s=(e=>{let{orderByKey:t,orderByAsc:r}=e;return t?r?[t+" ASC"]:[t+" DESC"]:[]})(t),l=((e,t)=>{let{startTime:r}=e;const n=Ct[r];return r&&n&&"ALL"!==r?"attributes.start_time >= "+(t-n):null})(t,r),o=((e,t)=>{let{searchFilter:r}=e;return r&&t?`${r} and ${t}`:!r&&t?t:r||void 0})(t,l),c=(e=>{let{orderByKey:t,searchFilter:r}=e;return!t&&!r||t===j.XZ.DATE})(t);return{experimentIds:e,filter:o,runViewType:a,orderBy:s,shouldFetchParents:c,pageToken:n,runsPinned:i}};var Zt=r(77616),Rt=r(71186);const St=e=>(0,l.isArray)(e)?e.join():e,Et={searchFilter:{deserializeLocalStorage:St,deserializeQueryString:St},compareRunCharts:{serializeQueryString(e){return(0,Rt.g4)(JSON.stringify(e))},deserializeQueryString(e){try{const t=JSON.parse((0,Rt.DL)(e));if(!Array.isArray(t))return;return t}catch{return}}},compareRunsMode:{serializeLocalStorage(){}}},wt=e=>{const t={...e};for(const n of Object.keys(t)){var r;const e=null===(r=Et[n])||void 0===r?void 0:r.serializeQueryString;e&&(t[n]=e(t[n]))}return t},kt=e=>{const t={...e};for(const n of Object.keys(t)){var r;const e=null===(r=Et[n])||void 0===r?void 0:r.serializeLocalStorage;e&&(t[n]=e(t[n]))}return t},Tt=Object.keys(new ft),Bt=(e,t,r,n)=>{if("value"===n){if("true"===e)return!0;if("false"===e)return!1;if(void 0===e)return""}return t(e)},Mt=(e,t)=>Object.assign(new ft,{...e,...t});function It(e,t){const r=Zt.Z.getStoreForComponent("ExperimentPage",t),n=kt(e);r.saveComponentState(n)}function At(e){const t=wt(e);return ht().stringify(t,{addQueryPrefix:!0,arrayFormat:"comma",encodeValuesOnly:!0})}function Lt(e,t){let r=new ft;try{const e=Zt.Z.getStoreForComponent("ExperimentPage",t).loadComponentState();if((!(n=e).runsExpanded||(0,l.isObject)(n.runsExpanded))&&(!n.selectedColumns||(0,l.isArray)(n.selectedColumns))){const t=(e=>{const t={...e};for(const n of Object.keys(t)){var r;const e=null===(r=Et[n])||void 0===r?void 0:r.deserializeLocalStorage;e&&(t[n]=e(t[n]))}return t})(e);r=Mt(r,t)}}catch{s.default.logErrorAndNotifyUser(`Error: malformed persisted search state for experiment(s) ${t}`)}var n;const a=decodeURIComponent(e),i=ht().parse(a,{ignoreQueryPrefix:!0,comma:!0,arrayLimit:500,decoder:Bt}),{restData:o,stateData:c}=function(e){const t={},r={};for(const n in e)if(e.hasOwnProperty(n)){const a=Tt.includes(n);Object.assign(a?t:r,{[n]:e[n]})}return{stateData:t,restData:r}}(i),d=(e=>{const t={...e};for(const n of Object.keys(t)){var r;const e=null===(r=Et[n])||void 0===r?void 0:r.deserializeQueryString;e&&(t[n]=e(t[n]))}return t})(c);if(!(Object.keys(d).length<1)){const e=Object.assign(new ft,d);r=Mt(r,e)}return It(r,t),{state:r,queryString:At({...o,...r})}}const Dt=(0,n.createContext)(null),Nt=e=>{let{children:t,actions:r}=e;const a=(0,nt.s0)(),i=mt(),c=d(),p=(0,nt.TH)(),[h,m]=(0,n.useState)(""),[g,v]=(0,n.useState)(!1),[f,y]=(0,n.useState)(""),[x,C]=(0,n.useState)(!1),[b,Z]=(0,n.useState)(null),R=(0,n.useMemo)((()=>JSON.stringify(i.sort())),[i]),S=(0,n.useRef)(""),[E,w]=(0,n.useState)(new ft),k=(0,n.useRef)([]),T=(0,n.useRef)(""),B=(0,n.useRef)(""),M=(0,n.useRef)(!0),I=(0,n.useCallback)((()=>M.current),[]),A=(0,n.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),a=arguments.length>3?arguments[3]:void 0;const i=Boolean(a);i||(B.current=n);const o=(i?r.loadMoreRunsApi:r.searchRunsApi)(bt(t,e,n,a||void 0));v(!0);const d=c(o).then((e=>{const{value:t}=e;return T.current=t.next_page_token,C(Boolean(t.next_page_token)),((e,t,r)=>{const n=e.filter((e=>e.data.tags.some((e=>"mlflow.log-model.history"===e.key))));(0,l.chunk)(n,yt.mc).forEach((e=>{const n=t({run_id:e.map((e=>e.info.run_id))});r(n)}))})(t.runs||[],r.searchModelVersionsApi,c),k.current.some((e=>e.id===o.meta.id&&!e.active))&&v(!1),t.runs||[]})).catch((e=>{s.default.logErrorAndNotifyUser(e,0),v(!1)}));return m(o.meta.id),d}),[c,r]),L=(0,n.useCallback)((()=>A(E,i,B.current||void 0,T.current||void 0)),[A,E,i]),D=(0,n.useCallback)((()=>{A(E,i)}),[i,A,E]),N=(0,n.useCallback)(((e,t)=>{const r=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=ht().parse(r,{ignoreQueryPrefix:!0,comma:!0,arrayLimit:500,decoder:Bt}),{experiments:a}=n;return It(e,t),At({experiments:a,...e})}(e,R,p.search);S.current=r,p.search!==r&&a(`${p.pathname}${r}`,{replace:t})}),[a,p,R]),O=(0,n.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{forceRefresh:r=!1,preservePristine:n=!1,replaceHistory:a=!1}=t;w((t=>{const n=(0,l.isFunction)(e)?e(t):{...t,...e};var s,o;return!r&&(s=t,o=n,(0,l.isEqual)(s.searchFilter,o.searchFilter)&&(0,l.isEqual)(s.orderByAsc,o.orderByAsc)&&(0,l.isEqual)(s.orderByKey,o.orderByKey)&&(0,l.isEqual)(s.lifecycleFilter,o.lifecycleFilter)&&(0,l.isEqual)(s.startTime,o.startTime))||A(n,i),N(n,a),n})),n||(M.current=!1)}),[i,A,N]);(0,n.useEffect)((()=>{if(p.search&&S.current===p.search)return;const{state:e}=Lt(p.search,R);O(e,{replaceHistory:!0,forceRefresh:!0,preservePristine:!0})}),[p.search,O,R]);const H=(0,n.useMemo)((()=>({actions:r,searchFacetsState:E,fetchExperimentRuns:D,updateSearchFacets:O,loadMoreRuns:L,requestError:b,isLoadingRuns:g,moreRunsAvailable:x,isPristine:I})),[r,E,D,L,b,g,O,x,I]);return(0,u.tZ)(Dt.Provider,{value:H,children:(0,u.tZ)(o.ZP,{shouldOptimisticallyRender:!0,requestIds:h?[h]:[],children:(e,r,n)=>(k.current=n,n.forEach((e=>{Z(e.error)})),t)})})},Ot=()=>{const e=(0,n.useContext)(Dt);if(!e)throw new Error("Trying to use SearchExperimentRunsContext actions outside of the context!");return e},Ht=e=>{let{showDeleteRunModal:t,showRestoreRunModal:r,showRenameRunModal:a,runsSelected:i,onCloseDeleteRunModal:s,onCloseRestoreRunModal:l,onCloseRenameRunModal:o,renamedRunName:c}=e;const{updateSearchFacets:d}=Ot(),p=Object.entries(i).filter((e=>{let[,t]=e;return t})).map((e=>{let[t]=e;return t})),h=(0,n.useCallback)((()=>d({},{forceRefresh:!0,preservePristine:!0})),[d]);return(0,u.BX)(u.HY,{children:[(0,u.tZ)(lt,{isOpen:t,onClose:s,selectedRunIds:p}),(0,u.tZ)(ut,{isOpen:r,onClose:l,selectedRunIds:p}),(0,u.tZ)(ot.UQ,{runUuid:p[0],onClose:o,runName:c,isOpen:a,onSuccess:()=>h()})]})};var Pt={name:"1j5vobt",styles:"display:flex;align-items:center;gap:4px"};const Ut=n.memo((e=>{let{searchFacetsState:t,sortOptions:r,onSortKeyChanged:a}=e;const{orderByKey:i,orderByAsc:s}=t,{theme:l}=(0,x.u)(),o=(0,n.useMemo)((()=>`${i}${j.T_}${s?j.aU:j.iX}`),[s,i]),c=(0,n.useMemo)((()=>{const e=r.find((e=>e.value===o));let t=null===e||void 0===e?void 0:e.label;if(!t){const e=i.match(/^.+\.`(.+)`$/);e&&(t=e[1])}return(0,u.BX)("span",{css:Pt,children:[s?(0,u.tZ)(m.TV4,{}):(0,u.tZ)(m.mcG,{})," ",(0,u.tZ)(b.Z,{id:"llrWuc",defaultMessage:"Sort"}),": ",t]})}),[o,s,i,r]);return(0,u.tZ)(m.Select,{className:"sort-select",css:(0,f.iv)({minWidth:140,maxWidth:360,background:l.colors.actionTertiaryBackgroundDefault,color:l.colors.actionTertiaryTextDefault,"&:hover":{background:l.colors.actionTertiaryBackgroundHover,color:l.colors.actionTertiaryTextHover},"&:active":{background:l.colors.actionTertiaryBackgroundPress,color:l.colors.actionTertiaryTextPress}},""),value:{value:o,label:c},labelInValue:!0,virtual:!1,dangerouslySetAntdProps:{dropdownStyle:Xt.sortSelectDropdown},onChange:a,"data-test-id":"sort-select-dropdown",children:r.map((e=>(0,u.BX)(m.Wxm,{title:e.label,"data-test-id":`sort-select-${e.label}-${e.order}`,value:e.value,children:[(0,u.tZ)("span",{css:Xt.sortMenuArrowWrapper,children:e.order===j.aU?(0,u.tZ)(m.Hf3,{}):(0,u.tZ)(m.veu,{})})," ",(0,Rt.mJ)(e.label,50)]},e.value)))})})),Xt={sortSelectDropdown:{minWidth:360},sortMenuArrowWrapper:{svg:{width:12,height:12}}},Wt="GROUP",_t=Ve(Wt,j.D5.ATTRIBUTES),Kt=Ve(Wt,j.D5.PARAMS),Ft=Ve(Wt,j.D5.METRICS),Vt=Ve(Wt,j.D5.TAGS),zt=(e,t)=>e.filter((e=>e.toLowerCase().includes(t.toLowerCase()))),$t=(e,t)=>{if(!t)return e;const r=e.toLowerCase().indexOf(t.toLowerCase()),n=e.substring(0,r),a=e.substring(r,r+t.length),i=e.substring(r+t.length);return r>-1?(0,u.BX)("span",{children:[n,(0,u.tZ)("strong",{children:a}),i]}):e},jt=n.memo((e=>{let{runsData:t,columnSelectorVisible:r,onChangeColumnSelectorVisible:a,updateSearchFacets:i,selectedColumns:l}=e;const o=mt(),[c,d]=(0,n.useState)(""),p=(0,n.useRef)(null),h=(0,n.useRef)(null),g=(0,n.useRef)(null),v=(0,n.useMemo)((()=>(e=>{const t=[j.z.USER,j.z.SOURCE,j.z.VERSION,j.z.MODELS];return e&&t.unshift(j.z.EXPERIMENT_NAME),(0,Ue.GW)()&&t.unshift(j.z.DATASET),t})(o.length>1)),[o.length]),f=(0,n.useCallback)((e=>i((t=>{const r=e(t.selectedColumns),n=Array.from(new Set(r));return{...t,selectedColumns:n}}))),[i]),y=(0,n.useMemo)((()=>s.default.getVisibleTagKeyList(t.tagsList)),[t]),C=(0,n.useMemo)((()=>({[j.D5.ATTRIBUTES]:v.map((e=>Ve(j.D5.ATTRIBUTES,e))),[j.D5.PARAMS]:t.paramKeyList.map((e=>Ve(j.D5.PARAMS,e))),[j.D5.METRICS]:t.metricKeyList.map((e=>Ve(j.D5.METRICS,e))),[j.D5.TAGS]:y.map((e=>Ve(j.D5.TAGS,e)))})),[t,v,y]),Z=(0,n.useMemo)((()=>{const e=[],r=zt(v,c),n=zt(t.paramKeyList,c),a=zt(t.metricKeyList,c),i=zt(y,c);return r.length&&e.push({key:_t,title:"Attributes",children:r.map((e=>({key:Ve(j.D5.ATTRIBUTES,e),title:$t(e,c)})))}),a.length&&e.push({key:Ft,title:`Metrics (${a.length})`,children:a.map((e=>({key:Ve(j.D5.METRICS,e),title:$t(e,c)})))}),n.length&&e.push({key:Kt,title:`Parameters (${n.length})`,children:n.map((e=>({key:Ve(j.D5.PARAMS,e),title:$t(e,c)})))}),i.length&&e.push({key:Vt,title:`Tags (${i.length})`,children:i.map((e=>({key:Ve(j.D5.TAGS,e),title:e})))}),e}),[v,c,t,y]),R=(0,n.useCallback)(((e,t)=>{f(e?e=>e.filter((e=>!t.includes(e))):e=>[...e,...t])}),[f]),S=(0,n.useCallback)(((e,t)=>{f(t?t=>t.filter((t=>t!==e)):t=>[...t,e])}),[f]);(0,n.useEffect)((()=>{r&&(d(""),requestAnimationFrame((()=>{var e,t;null===h||void 0===h||null===(e=h.current)||void 0===e||e.scrollTo(0,0),null===(t=p.current)||void 0===t||t.focus({preventScroll:!0}),g.current&&g.current.scrollIntoView({block:"nearest",behavior:"smooth"})})))}),[r]);const E=(0,n.useCallback)(((e,t)=>{let{node:{key:r,checked:n}}=t;if(ze(r.toString(),Wt)){const e=$e(r.toString(),Wt),t=C[e];t&&R(n,zt(t,c))}else S(r.toString(),n)}),[C,R,S,c]),w=(0,n.useCallback)((e=>{if("ArrowDown"===e.key){const e=(null===(t=h.current)||void 0===t?void 0:t.querySelector('[role="tree"] input'))||null;e&&e.focus()}var t}),[]),k=(0,u.BX)("div",{css:qt.dropdown,children:[(0,u.tZ)("div",{css:e=>({padding:e.spacing.md}),children:(0,u.tZ)(x.e,{value:c,prefix:(0,u.tZ)(m.W1M,{}),placeholder:"Search columns",allowClear:!0,ref:p,onChange:e=>{d(e.target.value)},onKeyDown:w})}),(0,u.tZ)("div",{ref:h,css:qt.scrollableContainer,children:(0,u.tZ)(m.mpN,{"data-testid":"column-selector-tree",mode:"checkable",dangerouslySetAntdProps:{checkedKeys:l,onCheck:E},defaultExpandedKeys:[_t,Kt,Ft,Vt],treeData:Z})})]});return(0,u.tZ)(m.Ltx,{overlay:k,placement:"bottomRight",trigger:["click"],visible:r,onVisibleChange:a,children:(0,u.BX)(x.B,{ref:g,style:{display:"flex",alignItems:"center"},"data-testid":"column-selection-dropdown",icon:(0,u.tZ)(m.DE2,{}),children:[(0,u.tZ)(b.Z,{id:"ny+fBZ",defaultMessage:"Columns"})," ",(0,u.tZ)(m.v4q,{})]})})})),Yt=e=>{const{updateSearchFacets:t,searchFacetsState:r}=Ot();return(0,u.tZ)(jt,{...e,selectedColumns:r.selectedColumns,updateSearchFacets:t})},qt={dropdown:e=>({backgroundColor:e.colors.white,width:400,border:"1px solid",borderColor:e.colors.border}),scrollableContainer:e=>({maxHeight:480,overflowY:"scroll",overflowX:"hidden",paddingBottom:e.spacing.md,"span[title]":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})},Gt=e=>{const{pressed:t,onClick:r,icon:n}=e,{theme:a}=(0,x.u)();return(0,u.tZ)("button",{onClick:r,css:(0,f.iv)({cursor:"pointer",width:a.general.heightSm,height:a.general.heightSm,borderRadius:a.borders.borderRadiusMd,lineHeight:a.typography.lineHeightBase,padding:0,border:0,display:"flex",alignItems:"center",justifyContent:"center",background:t?a.colors.actionDefaultBackgroundPress:"transparent",color:t?a.colors.actionDefaultTextPress:a.colors.textSecondary,"&:hover":{background:a.colors.actionDefaultBackgroundHover,color:a.colors.actionDefaultTextHover}},""),children:n})};const Jt=e=>{let{children:t}=e;return(0,u.tZ)(u.HY,{children:t})};var Qt={name:"zjik7",styles:"display:flex"},er={name:"82a6rk",styles:"flex:1"};const tr=n.memo((e=>{let{viewState:t,runsData:r,sortOptions:a,searchFacetsState:i,updateSearchFacets:s,updateViewState:l,expandRows:o,updateExpandRows:c}=e;const{runsSelected:d}=t,{runInfos:p}=r,{lifecycleFilter:h,compareRunsMode:g}=i,v=void 0!==g,f=(0,nt.s0)(),y=(0,n.useCallback)((e=>{let{value:t}=e;const[r,n]=t.split(j.T_),a=Ge[r]||r,i=n===j.aU;s((e=>{const{selectedColumns:t}=e;return t.includes(a)||t.push(a),{...e,selectedColumns:t,orderByKey:r,orderByAsc:i}}))}),[s]),C=(0,n.useCallback)((e=>l({columnSelectorVisible:e})),[l]),[Z,R]=(0,n.useState)(!1),[S,E]=(0,n.useState)(!1),[w,k]=(0,n.useState)(!1),[T,B]=(0,n.useState)(""),M=(0,n.useCallback)((()=>{const e=Object.keys(d),t=p.find((t=>t.run_uuid===e[0]));t&&(B(t.run_name),k(!0))}),[p,d]),I=(0,n.useCallback)((()=>{const e=Object.keys(d),t=p.filter((t=>{let{run_uuid:r}=t;return e.includes(r)})).map((e=>{let{experiment_id:t}=e;return t}));f(ne.Z.getCompareRunPageRoute(e,[...new Set(t)].sort()))}),[f,p,d]),A=(0,n.useCallback)((()=>R(!0)),[]),L=(0,n.useCallback)((()=>E(!0)),[]),D=(0,n.useCallback)((()=>R(!1)),[]),N=(0,n.useCallback)((()=>E(!1)),[]),O=(0,n.useCallback)((()=>k(!1)),[]),H=Object.values(t.runsSelected).filter(Boolean).length,P=H>0,U=1===H,X=H>1,W=X||U||P,_=(0,n.useCallback)((()=>c(!o)),[o,c]),K=void 0===g||"ARTIFACT"===g;return(0,u.BX)("div",{css:rr.controlBar,children:[(0,u.tZ)(Ht,{runsSelected:d,onCloseRenameRunModal:O,onCloseDeleteRunModal:D,onCloseRestoreRunModal:N,showDeleteRunModal:Z,showRestoreRunModal:S,showRenameRunModal:w,renamedRunName:T}),!W&&(0,u.BX)(u.HY,{children:[(0,u.tZ)(Ut,{onSortKeyChanged:y,searchFacetsState:i,sortOptions:a}),!v&&(0,u.tZ)(Yt,{columnSelectorVisible:t.columnSelectorVisible,onChangeColumnSelectorVisible:C,runsData:r}),!v&&(0,Ue.GW)()&&(0,u.tZ)(x.B,{onClick:()=>_(),children:(0,u.BX)("div",{css:Qt,children:[(0,u.tZ)(m.XZJ,{isChecked:o}),(0,u.tZ)(b.Z,{id:"mRc7MY",defaultMessage:"Expand rows"})]})})]}),W&&(0,u.BX)(u.HY,{children:[(0,u.tZ)(x.B,{"data-testid":"run-rename-button",onClick:M,disabled:!U,children:(0,u.tZ)(b.Z,{id:"oWPgX7",defaultMessage:"Rename"})}),h===j.VW.ACTIVE?(0,u.tZ)(x.B,{"data-testid":"runs-delete-button",disabled:!P,onClick:A,danger:!0,children:(0,u.tZ)(b.Z,{id:"3Rb4sG",defaultMessage:"Delete"})}):null,h===j.VW.DELETED?(0,u.tZ)(x.B,{"data-testid":"runs-restore-button",disabled:!P,onClick:L,children:(0,u.tZ)(b.Z,{id:"Potju2",defaultMessage:"Restore"})}):null,(0,u.tZ)("div",{css:rr.buttonSeparator}),(0,u.tZ)(Jt,{children:(0,u.tZ)(x.B,{"data-testid":"runs-compare-button",disabled:!X,onClick:I,children:(0,u.tZ)(b.Z,{id:"RaGnOQ",defaultMessage:"Compare"})})})]}),(0,u.tZ)("div",{css:er}),(0,Ue.Hi)()&&K&&(0,u.tZ)(Gt,{pressed:t.previewPaneVisible,icon:(0,u.tZ)(m.BSo,{}),onClick:()=>l({previewPaneVisible:!t.previewPaneVisible})})]})})),rr={groupSeparator:()=>({flex:1}),buttonSeparator:e=>({borderLeft:`1px solid ${e.colors.border}`,marginLeft:e.spacing.xs,marginRight:e.spacing.xs,height:"100%"}),controlBar:e=>({display:"flex",gap:e.spacing.sm,alignItems:"center",paddingTop:e.spacing.sm,borderTop:`1px solid ${e.colors.border}`})};var nr=r(4942),ar=r(71002),ir=r(87462),sr=r(3017),lr=r(55819),or=r.n(lr),cr=r(47337),dr=r(75356),ur=r(29439);function pr(e){var t,r=e.prefixCls,a=e.value,i=e.current,s=e.offset,l=void 0===s?0:s;return l&&(t={position:"absolute",top:"".concat(l,"00%"),left:0}),n.createElement("span",{style:t,className:or()("".concat(r,"-only-unit"),{current:i})},a)}function hr(e,t,r){for(var n=e,a=0;(n+10)%10!==t;)n+=r,a+=r;return a}function mr(e){var t,r,a=e.prefixCls,i=e.count,s=e.value,l=Number(s),o=Math.abs(i),c=n.useState(l),d=(0,ur.Z)(c,2),u=d[0],p=d[1],h=n.useState(o),m=(0,ur.Z)(h,2),g=m[0],v=m[1],f=function(){p(l),v(o)};if(n.useEffect((function(){var e=setTimeout((function(){f()}),1e3);return function(){clearTimeout(e)}}),[l]),u===l||Number.isNaN(l)||Number.isNaN(u))t=[n.createElement(pr,(0,ir.Z)({},e,{key:l,current:!0}))],r={transition:"none"};else{t=[];for(var y=l+10,x=[],C=l;C<=y;C+=1)x.push(C);var b=x.findIndex((function(e){return e%10===u}));t=x.map((function(t,r){var a=t%10;return n.createElement(pr,(0,ir.Z)({},e,{key:t,value:a,offset:r-b,current:r===b}))})),r={transform:"translateY(".concat(-hr(u,l,g<o?1:-1),"00%)")}}return n.createElement("span",{className:"".concat(a,"-only"),style:r,onTransitionEnd:f},t)}var gr=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},vr=function(e){var t=e.prefixCls,r=e.count,a=e.className,i=e.motionClassName,s=e.style,l=e.title,o=e.show,c=e.component,d=void 0===c?"sup":c,u=e.children,p=gr(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),h=(0,n.useContext(cr.E_).getPrefixCls)("scroll-number",t),m=(0,ir.Z)((0,ir.Z)({},p),{"data-show":o,style:s,className:or()(h,a,i),title:l}),g=r;if(r&&Number(r)%1===0){var v=String(r).split("");g=v.map((function(e,t){return n.createElement(mr,{prefixCls:h,count:Number(r),value:e,key:v.length-t})}))}return s&&s.borderColor&&(m.style=(0,ir.Z)((0,ir.Z)({},s),{boxShadow:"0 0 0 1px ".concat(s.borderColor," inset")})),u?(0,dr.Tm)(u,(function(e){return{className:or()("".concat(h,"-custom-component"),null===e||void 0===e?void 0:e.className,i)}})):n.createElement(d,m,g)},fr=r(22446);function yr(e){return-1!==fr.Y.indexOf(e)}var xr=function(e){var t,r=e.className,a=e.prefixCls,i=e.style,s=e.color,l=e.children,o=e.text,c=e.placement,d=void 0===c?"end":c,u=n.useContext(cr.E_),p=u.getPrefixCls,h=u.direction,m=p("ribbon",a),g=yr(s),v=or()(m,"".concat(m,"-placement-").concat(d),(t={},(0,nr.Z)(t,"".concat(m,"-rtl"),"rtl"===h),(0,nr.Z)(t,"".concat(m,"-color-").concat(s),g),t),r),f={},y={};return s&&!g&&(f.background=s,y.color=s),n.createElement("div",{className:"".concat(m,"-wrapper")},l,n.createElement("div",{className:v,style:(0,ir.Z)((0,ir.Z)({},f),i)},n.createElement("span",{className:"".concat(m,"-text")},o),n.createElement("div",{className:"".concat(m,"-corner"),style:y})))},Cr=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},br=function(e){var t,r,a=e.prefixCls,i=e.scrollNumberPrefixCls,s=e.children,l=e.status,o=e.text,c=e.color,d=e.count,u=void 0===d?null:d,p=e.overflowCount,h=void 0===p?99:p,m=e.dot,g=void 0!==m&&m,v=e.size,f=void 0===v?"default":v,y=e.title,x=e.offset,C=e.style,b=e.className,Z=e.showZero,R=void 0!==Z&&Z,S=Cr(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),E=n.useContext(cr.E_),w=E.getPrefixCls,k=E.direction,T=w("badge",a),B=u>h?"".concat(h,"+"):u,M=null!==l&&void 0!==l||null!==c&&void 0!==c,I="0"===B||0===B,A=g&&!I||M,L=A?"":B,D=(0,n.useMemo)((function(){return(null===L||void 0===L||""===L||I&&!R)&&!A}),[L,I,R,A]),N=(0,n.useRef)(u);D||(N.current=u);var O=N.current,H=(0,n.useRef)(L);D||(H.current=L);var P=H.current,U=(0,n.useRef)(A);D||(U.current=A);var X=(0,n.useMemo)((function(){if(!x)return(0,ir.Z)({},C);var e={marginTop:x[1]};return"rtl"===k?e.left=parseInt(x[0],10):e.right=-parseInt(x[0],10),(0,ir.Z)((0,ir.Z)({},e),C)}),[k,x,C]),W=null!==y&&void 0!==y?y:"string"===typeof O||"number"===typeof O?O:void 0,_=D||!o?null:n.createElement("span",{className:"".concat(T,"-status-text")},o),K=O&&"object"===(0,ar.Z)(O)?(0,dr.Tm)(O,(function(e){return{style:(0,ir.Z)((0,ir.Z)({},X),e.style)}})):void 0,F=or()((t={},(0,nr.Z)(t,"".concat(T,"-status-dot"),M),(0,nr.Z)(t,"".concat(T,"-status-").concat(l),!!l),(0,nr.Z)(t,"".concat(T,"-status-").concat(c),yr(c)),t)),V={};c&&!yr(c)&&(V.background=c);var z=or()(T,(r={},(0,nr.Z)(r,"".concat(T,"-status"),M),(0,nr.Z)(r,"".concat(T,"-not-a-wrapper"),!s),(0,nr.Z)(r,"".concat(T,"-rtl"),"rtl"===k),r),b);if(!s&&M){var $=X.color;return n.createElement("span",(0,ir.Z)({},S,{className:z,style:X}),n.createElement("span",{className:F,style:V}),n.createElement("span",{style:{color:$},className:"".concat(T,"-status-text")},o))}return n.createElement("span",(0,ir.Z)({},S,{className:z}),s,n.createElement(sr.Z,{visible:!D,motionName:"".concat(T,"-zoom"),motionAppear:!1},(function(e){var t,r=e.className,a=w("scroll-number",i),s=U.current,o=or()((t={},(0,nr.Z)(t,"".concat(T,"-dot"),s),(0,nr.Z)(t,"".concat(T,"-count"),!s),(0,nr.Z)(t,"".concat(T,"-count-sm"),"small"===f),(0,nr.Z)(t,"".concat(T,"-multiple-words"),!s&&P&&P.toString().length>1),(0,nr.Z)(t,"".concat(T,"-status-").concat(l),!!l),(0,nr.Z)(t,"".concat(T,"-status-").concat(c),yr(c)),t)),d=(0,ir.Z)({},X);return c&&!yr(c)&&((d=d||{}).background=c),n.createElement(vr,{prefixCls:a,show:!D,motionClassName:r,className:o,count:P,title:W,style:d,key:"scrollNumber"},K)})),_)};br.Ribbon=xr;var Zr=br;const Rr=n.memo((e=>{let{runInfos:t}=e;const{actions:{searchRunsPayload:r},updateSearchFacets:a}=Ot(),i=mt(),[s,l]=(0,n.useState)(0),[o,c]=(0,n.useState)(0),d=(0,n.useCallback)((()=>a({},{forceRefresh:!0,preservePristine:!0})),[a]);return(0,n.useEffect)((()=>{c(0),l((()=>Date.now()))}),[t]),(0,n.useEffect)((()=>{if(!s)return;const e=setInterval((()=>{const e={experimentIds:i,filter:`attributes.start_time > ${s}`,maxResults:j.mz};r(e).then((e=>{var t;const r=(null===(t=e.runs)||void 0===t?void 0:t.length)||0;c(r)}))}),j.FK);return()=>clearInterval(e)}),[s,r,i]),(0,u.tZ)(Zr,{count:o,offset:[-5,5],css:Sr.pill,overflowCount:j.mz-1,children:(0,u.tZ)(x.B,{onClick:d,"data-testid":"runs-refresh-button",icon:(0,u.tZ)(m.bnu,{}),children:(0,u.tZ)(b.Z,{id:"ag05Pe",defaultMessage:"Refresh"})})})})),Sr={pill:e=>({sup:{backgroundColor:e.colors.lime,zIndex:1}})},Er=(0,c.$j)((e=>({runInfos:e.entities.runInfosByUuid})),void 0,void 0,{areStatesEqual:(e,t)=>e.entities.runInfosByUuid===t.entities.runInfosByUuid})(Rr),wr=e=>(0,n.useMemo)((()=>Zt.Z.getStoreForComponent("ExperimentView",e)),[e]);const kr="seenBefore";var Tr={name:"b98nv4",styles:"position:absolute;inset:0"},Br={name:"1ww443i",styles:"max-width:200px"},Mr={name:"2qga7i",styles:"text-align:right"};const Ir=e=>{let{multipleRunsSelected:t,isComparingRuns:r}=e;const a=wr("compareRunsTooltip"),[i,s]=(0,n.useState)(t&&!a.getItem(kr));(0,n.useEffect)((()=>{const e=a.getItem(kr);s(!(!t||r||e))}),[t,r,a]);const l=(0,n.useCallback)((e=>{s(e),a.setItem(kr,!0)}),[s,a]);return(0,u.tZ)(u.HY,{children:(0,u.BX)(m.J2e.Root,{open:i,children:[(0,u.tZ)(m.J2e.Trigger,{asChild:!0,children:(0,u.tZ)("div",{css:Tr})}),(0,u.BX)(m.J2e.Content,{align:"start",children:[(0,u.BX)("div",{css:Br,children:[(0,u.tZ)(x.T.Paragraph,{children:(0,u.tZ)(b.Z,{id:"1ECve7",defaultMessage:"You can now switch to the chart view to compare runs"})}),(0,u.tZ)("div",{css:Mr,children:(0,u.tZ)(x.B,{onClick:()=>l(!1),type:"primary",children:(0,u.tZ)(b.Z,{id:"khknxG",defaultMessage:"Got it"})})})]}),(0,u.tZ)(m.J2e.Arrow,{})]})]})})},Ar=e=>{let{compareRunsMode:t,setCompareRunsMode:r,viewState:n}=e;const a=void 0!==t;return(0,u.BX)(m.Xzw,{value:t,onChange:e=>{let{target:{value:t}}=e;r(t)},children:[(0,u.tZ)(m.HeI,{value:void 0,"data-testid":"experiment-runs-mode-switch-list",children:(0,u.tZ)(b.Z,{id:"Uw3UMI",defaultMessage:"Table view"})}),(0,u.BX)(m.HeI,{value:"CHART","data-testid":"experiment-runs-mode-switch-compare",children:[(0,u.tZ)(b.Z,{id:"DYvd0s",defaultMessage:"Chart view"}),(0,u.tZ)(Ir,{isComparingRuns:a,multipleRunsSelected:Object.keys(n.runsSelected).length>1})]}),(0,Ue.Hi)()&&(0,u.tZ)(m.HeI,{value:"ARTIFACT","data-testid":"experiment-runs-mode-switch-compare",children:(0,u.tZ)(b.Z,{id:"rIx1O4",defaultMessage:"Artifact view"})})]})},Lr=()=>(0,u.BX)("div",{className:"search-input-tooltip-content",children:[(0,u.tZ)(b.Z,{id:"kIlkgf",defaultMessage:"Search runs using a simplified version of the SQL {whereBold} clause.",values:{whereBold:(0,u.tZ)("b",{children:"WHERE"})}})," ",(0,u.tZ)(b.Z,{id:"nYKZy4",defaultMessage:"<link>Learn more</link>",values:{link:e=>(0,u.tZ)("a",{href:g.Kp,target:"_blank",rel:"noopener noreferrer",children:e})}}),(0,u.tZ)("br",{}),(0,u.tZ)(b.Z,{id:"U3btBc",defaultMessage:"Examples:"}),(0,u.tZ)("br",{}),"\u2022 metrics.rmse >= 0.8",(0,u.tZ)("br",{}),"\u2022 metrics.`f1 score` < 1",(0,u.tZ)("br",{}),"\u2022 params.model = 'tree'",(0,u.tZ)("br",{}),"\u2022 attributes.run_name = 'my run'",(0,u.tZ)("br",{}),"\u2022 tags.`mlflow.user` = 'myUser'",(0,u.tZ)("br",{}),"\u2022 metric.f1_score > 0.9 AND params.model = 'tree'",(0,u.tZ)("br",{}),"\u2022 attributes.run_id IN ('a1b2c3d4', 'e5f6g7h8')",(0,u.tZ)("br",{}),"\u2022 tags.model_class LIKE 'sklearn.linear_model%'"]});const Dr=["run_id","run_name","status","artifact_uri","user_id","start_time","end_time","created"].map((e=>({value:`attributes.${e}`})));var Nr={name:"lugakg",styles:"font-weight:normal"};const Or=(e,t)=>{const r=e.split(RegExp(t.replace(".","\\."),"ig")),n=e.match(RegExp(t.replace(".","\\."),"ig"));return(0,u.tZ)("span",{css:Nr,"data-test-id":e,children:r.map(((e,t)=>(0,u.BX)(u.HY,{children:[e,t!==r.length-1&&n&&(0,u.tZ)("b",{children:n[t]})]})))})};const Hr="tooltipLastPopup";var Pr={name:"1ua1wyk",styles:"width:560px"};const Ur=e=>{const{runsData:t,searchFacetsState:r,updateSearchFacets:a,requestError:i}=e,[s,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(void 0),[p,h]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!1),f=(0,n.useRef)({metricNames:[],paramNames:[],tagNames:[]}),[y,C]=(0,n.useState)({Metrics:10,Parameters:10,Tags:10}),b=(0,n.useRef)([]),[Z,R]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{o(r.searchFilter)}),[r]);const S=(0,n.useMemo)((()=>{const e=f.current,r=((e,t)=>{const r=(e,t)=>[...new Set([...e,...t])],n=e=>e.flatMap((e=>Object.keys(e)));return{metricNames:r(t.metricNames,e.metricKeyList),paramNames:r(t.paramNames,e.paramKeyList),tagNames:r(n(t.tagNames),n(e.tagsList)).filter((e=>!e.startsWith("mlflow."))).map((e=>e.includes('"')||e.includes(" ")||e.includes(".")?`\`${e}\``:e.includes("`")?`"${e}"`:e))}})(t,e);return f.current=r,[{label:"Metrics",options:(n=r).metricNames.map((e=>({value:`metrics.${e}`})))},{label:"Parameters",options:n.paramNames.map((e=>({value:`params.${e}`})))},{label:"Tags",options:n.tagNames.map((e=>({value:`tags.${e}`})))},{label:"Attributes",options:Dr}];var n}),[t]);(0,n.useEffect)((()=>{const e=b.current,t=(e=>{const t=/>|<|>=|<=|=|!=|like|ilike/gi,r=(e=>{const t=/and[\s]+/gi,r=[];let n,a;for(;a=t.lastIndex,n=t.exec(e);)r.push({clause:e.substring(a,n.index),startIndex:a});return r.push({clause:e.substring(a),startIndex:a}),r})(e),n=[];return r.forEach((e=>{const r=e.clause.split(t)[0],{startIndex:a}=e;n.push({name:r,startIndex:0+a,endIndex:r.length+a})})),n})(s);if(b.current=t,g)return void v(!1);const r=t.map((e=>e.name)),n=e.map((e=>e.name));if(!(0,l.isEqual)(r,n)&&t.length>=e.length){let r=0;for(;r<t.length;){if(r>=e.length||t[r].name.trim()!==e[r].name.trim())return d(!0),void R(t[r]);r++}}d(!1)}),[s]);const E=(0,n.useMemo)((()=>Z?((e,t,r)=>e.map((e=>{const n=e.options.filter((e=>e.value.toLowerCase().includes(t.name.toLowerCase().trim()))).map((e=>({value:e.value,label:Or(e.value,t.name.trim())}))),a=r[e.label],i=[...n.slice(0,a),...n.length>a?[{label:"...",value:`..._${e.label}`}]:[]];return{label:e.label,options:i}})).filter((e=>e.options.length>0)))(S,Z,y):[]),[S,Z,y]),w=(0,n.useCallback)(((e,t)=>{if(Z)if(e.startsWith("...")){d(!0);const e=t.value.split("_")[1];C((t=>({...t,[e]:t[e]+10})))}else{const t=s.substring(0,Z.startIndex),r=s.substring(Z.endIndex);o(t+e+" "+r),v(!0),d(!1)}}),[s,o,Z,d]),k=(0,n.useCallback)((()=>{a(gt)}),[a]),T=wr(Hr),[B,M]=(0,n.useState)((()=>{const e=Math.floor(Date.now()/1e3),t=T.getItem(Hr);return!t||parseInt(t,10)<e-604800})),I=n.useRef(null);(0,n.useEffect)((()=>{if(i&&B){var e;const t=Math.floor(Date.now()/1e3);T.setItem(Hr,t),M(!1),null===(e=I.current)||void 0===e||e.click()}}),[i]);const A=0===E.flatMap((e=>e.options)).length,L=c&&p&&!A,D=(0,n.useCallback)((e=>{"Enter"===e.key&&(L?d(!1):a({searchFilter:s})),"Escape"===e.key&&(e.preventDefault(),L&&d(!1))}),[L,s,a]);return(0,u.tZ)("div",{css:Xr.searchBox,children:(0,u.tZ)(m.QcG,{dropdownMatchSelectWidth:560,css:Pr,defaultOpen:!1,defaultActiveFirstOption:!0,open:L,options:E,onSelect:w,value:s,"data-test-id":"runs-search-autocomplete",dropdownRender:e=>(0,u.tZ)("div",{css:Xr.dropdownOverride,children:e}),children:(0,u.tZ)(x.e,{value:s,prefix:(0,u.tZ)(m.W1M,{css:Xr.searchBarIcon}),onKeyDown:D,onClick:()=>h(!0),onBlur:()=>h(!1),onChange:e=>o(e.target.value),placeholder:'metrics.rmse < 1 and params.model = "tree"',"data-test-id":"search-box",suffix:(0,u.BX)("div",{css:Xr.searchInputSuffix,children:[s&&(0,u.tZ)(x.B,{onClick:k,type:"link","data-test-id":"clear-button",children:(0,u.tZ)(x.C,{})}),(0,u.tZ)(m.ua7,{title:(0,u.tZ)(Lr,{}),placement:"right",dangerouslySetAntdProps:{overlayInnerStyle:{width:"150%"},trigger:"click"},children:(0,u.tZ)("div",{ref:I,children:(0,u.tZ)(m.szr,{css:Xr.searchBarIcon})})})]})})})})},Xr={searchBox:e=>({display:"flex",gap:e.spacing.sm,width:430}),searchBarIcon:e=>({svg:{width:16,height:16,color:e.colors.textSecondary}}),searchInputSuffix:{display:"flex",gap:4,alignItems:"center"},dropdownOverride:{".du-bois-light-select-item-option-active:not(.du-bois-light-select-item-option-disabled)":{backgroundColor:"#e6f1f5"}}},Wr=n.memo((e=>{let{searchFacetsState:t,updateSearchFacets:r,runsData:i,viewState:s,onDownloadCsv:l,requestError:o}=e;const{compareRunsMode:c,startTime:d,lifecycleFilter:p}=t,h=(0,a.Z)(),g=(0,n.useMemo)((()=>(e=>({LAST_HOUR:e.formatMessage({id:"bjoGjg",defaultMessage:"Last hour"}),LAST_24_HOURS:e.formatMessage({id:"JChRnq",defaultMessage:"Last 24 hours"}),LAST_7_DAYS:e.formatMessage({id:"eQsXm7",defaultMessage:"Last 7 days"}),LAST_30_DAYS:e.formatMessage({id:"p1H1KR",defaultMessage:"Last 30 days"}),LAST_YEAR:e.formatMessage({id:"EI7moF",defaultMessage:"Last year"})}))(h)),[h]),v=p===j.VW.ACTIVE?h.formatMessage({id:"0pdAuV",defaultMessage:"Active"}):h.formatMessage({id:"yJpGwW",defaultMessage:"Deleted"}),f=(0,u.tZ)(u.HY,{children:(0,u.tZ)(b.Z,{id:"+fb25b",defaultMessage:"Time created"})});return(0,u.tZ)(u.HY,{children:(0,u.BX)("div",{css:_r.groupBar,children:[(0,u.BX)("div",{css:_r.controlBar,children:[(0,u.tZ)(Ar,{compareRunsMode:c,setCompareRunsMode:e=>r({compareRunsMode:e}),viewState:s}),(0,u.tZ)(Ur,{runsData:i,searchFacetsState:t,updateSearchFacets:r,requestError:o}),(0,u.BX)(m.M6x,{label:f,value:"ALL"!==d?[g[d]]:[],children:[(0,u.tZ)(m.Aa0,{allowClear:"ALL"!==d,onClear:()=>r({startTime:"ALL"}),"data-test-id":"start-time-select-dropdown"}),(0,u.tZ)(m.hJM,{children:(0,u.tZ)(m.X_T,{children:Object.keys(g).map((e=>(0,u.tZ)(m.PC4,{checked:e===d,title:g[e],"data-test-id":`start-time-select-${e}`,value:e,onChange:()=>r({startTime:e}),children:g[e]},e)))})})]}),(0,u.BX)(m.M6x,{label:(0,u.tZ)(b.Z,{id:"iLFoPb",defaultMessage:"State"}),value:[v],children:[(0,u.tZ)(m.Aa0,{allowClear:!1,"data-testid":"lifecycle-filter"}),(0,u.tZ)(m.hJM,{children:(0,u.BX)(m.X_T,{children:[(0,u.tZ)(m.PC4,{checked:p===j.VW.ACTIVE,"data-testid":"active-runs-menu-item",value:j.VW.ACTIVE,onChange:()=>r({lifecycleFilter:j.VW.ACTIVE}),children:(0,u.tZ)(b.Z,{id:"0pdAuV",defaultMessage:"Active"})},j.VW.ACTIVE),(0,u.tZ)(m.PC4,{checked:p===j.VW.DELETED,"data-testid":"deleted-runs-menu-item",value:j.VW.DELETED,onChange:()=>r({lifecycleFilter:j.VW.DELETED}),children:(0,u.tZ)(b.Z,{id:"yJpGwW",defaultMessage:"Deleted"})},j.VW.DELETED)]})})]})]}),(0,u.tZ)("div",{css:_r.groupSeparator}),(0,u.BX)("div",{css:_r.controlBar,children:[(0,u.tZ)(m.Ltx,{trigger:["click"],placement:"bottomRight",overlay:(0,u.tZ)(m.v2r,{children:(0,u.BX)(m.v2r.Item,{className:"csv-button",onClick:l,children:[(0,u.tZ)(m._8t,{})," ",(0,u.tZ)(b.Z,{id:"rOnjGB",defaultMessage:"Download CSV"})]})}),children:(0,u.tZ)(x.B,{type:"tertiary",icon:(0,u.tZ)(m.VZO,{})})}),(0,u.tZ)(Er,{})]})]})})})),_r={groupBar:{display:"grid",gridTemplateColumns:"auto 1fr auto"},controlBar:e=>({display:"flex",gap:e.spacing.sm,alignItems:"center",flexWrap:"wrap"}),groupSeparator:e=>({minWidth:e.spacing.sm}),columnSwitch:{margin:"5px"},searchBox:e=>({display:"flex",gap:e.spacing.sm,width:560}),lifecycleFilters:e=>({display:"flex",gap:8,alignItems:"center",marginTop:e.spacing.sm,marginBottom:e.spacing.sm,marginLeft:2*e.spacing.lg})},Kr=n.memo((e=>{let{runsData:t,viewState:r,updateViewState:a,updateSearchFacets:i,searchFacetsState:l,requestError:o,expandRows:c,updateExpandRows:d}=e;const{paramKeyList:p,metricKeyList:h,tagsList:m}=t,g=p,v=h,f=s.default.getVisibleTagKeyList(m),y=(0,n.useCallback)((()=>((e,t,r,n)=>{const{runInfos:a,paramsList:i,metricsList:s,tagsList:l}=e,o=Re({runInfos:a,paramKeyList:r,metricKeyList:n,tagKeyList:t,paramsList:i,metricsList:s,tagsList:l}),c=new Blob([o],{type:"application/csv;charset=utf-8"});(0,me.saveAs)(c,"runs.csv")})(t,f,g,v)),[v,g,f,t]),x=((e,t)=>(0,n.useMemo)((()=>{let r=[];const n=[j.aU,j.iX];return r=[...Object.keys(j.Ul).reduce(((e,t)=>{const r=j.Ul[t];return n.forEach((n=>{e.push({label:r,value:j.XZ[t]+j.T_+n,order:n})})),e}),[]),...e.reduce(((e,t)=>(n.forEach((r=>{e.push({label:t,value:`${Ve(j.D5.METRICS,t)}${j.T_}${r}`,order:r})})),e)),[]),...t.reduce(((e,t)=>(n.forEach((r=>{e.push({label:t,value:`${Ve(j.D5.PARAMS,t)}${j.T_}${r}`,order:r})})),e)),[])],r}),[e,t]))(v,g);return(0,u.BX)("div",{css:Fr.wrapper,children:[(0,u.tZ)(Wr,{onDownloadCsv:y,updateSearchFacets:i,searchFacetsState:l,viewState:r,updateViewState:a,runsData:t,requestError:o}),(0,u.tZ)(tr,{sortOptions:x,runsData:t,updateSearchFacets:i,searchFacetsState:l,updateViewState:a,viewState:r,expandRows:c,updateExpandRows:d})]})})),Fr={wrapper:e=>({display:"flex",gap:e.spacing.sm,flexDirection:"column",marginTop:e.spacing.md,marginBottom:e.spacing.sm})},Vr=n.lazy((()=>Promise.all([r.e(225),r.e(412)]).then(r.bind(r,39412)))),zr=e=>(0,u.tZ)(n.Suspense,{fallback:(0,u.tZ)("div",{css:e=>({display:"flex",justifyContent:"center",margin:e.spacing.md}),children:(0,u.tZ)(m.$jN,{})}),children:(0,u.tZ)(Vr,{...e})}),$r=e=>{let{isFiltered:t,onClearFilters:r}=e;return(0,u.tZ)("div",{css:jr.noResultsWrapper,children:(0,u.tZ)("div",{css:jr.noResults,children:t?(0,u.tZ)(m.HYy,{button:(0,u.tZ)(x.B,{type:"primary",onClick:r,children:(0,u.tZ)(b.Z,{id:"pEpexK",defaultMessage:"Clear filters"})}),description:(0,u.tZ)(b.Z,{id:"Nnsm0p",defaultMessage:"All runs in this experiment have been filtered. Change or clear filters to view runs."}),title:(0,u.tZ)(b.Z,{id:"Tl63jz",defaultMessage:"All runs are filtered"}),image:(0,u.tZ)(m.k1n,{})}):(0,u.tZ)(m.HYy,{description:(0,u.tZ)(b.Z,{id:"coo35p",defaultMessage:"No runs have been logged yet. <link>Learn more</link> about how to create ML model training runs in this experiment.",values:{link:e=>(0,u.tZ)("a",{target:"_blank",href:g.gM,rel:"noreferrer",children:e})}}),title:(0,u.tZ)(b.Z,{id:"sByLVU",defaultMessage:"No runs logged"}),image:(0,u.tZ)(m.uOV,{})})})})},jr={noResults:{maxWidth:360},noResultsWrapper:e=>({marginTop:e.spacing.lg,inset:0,backgroundColor:e.colors.backgroundPrimary,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"})},Yr="is-out-of-viewport",qr="is-hidden",Gr="is-minimized",Jr=".ag-root",Qr=".ag-pinned-left-cols-container",en=".ag-center-cols-container",tn=".ag-header",rn=".ag-body-viewport",nn=e=>{let{onClick:t,gridContainerElement:r,isInitialized:a,visible:i,moreRunsAvailable:s,moreAvailableRunsTableColumnCount:l=0}=e;const o=(0,n.useRef)(null),c=(0,n.useRef)(),d=(0,n.useRef)(Boolean(s));(0,n.useEffect)((()=>{d.current=Boolean(s)}),[s]);const p=(0,n.useCallback)((e=>{if(!o.current||!window.ResizeObserver||!e)return;const t=o.current,r=e.querySelector(Jr),n=e.querySelector(Qr),a=e.querySelector(en),i=e.querySelector(tn),s=e.querySelector(rn);let l=0,u=0,p=0,h=0,m=0,g=0;if(n&&a&&i&&r&&s){const e=new ResizeObserver((e=>{var o,v,f,y;for(const t of e)t.target===r&&(l=t.contentRect.width),t.target===n&&(u=t.contentRect.width,p=t.contentRect.height),t.target===s&&(m=t.contentRect.height),t.target===i&&(g=t.contentRect.height),t.target===a&&(h=t.contentRect.width);const x=u+h,C=g;x+180>=l?null===(o=c.current)||void 0===o||o.classList.add(Yr):null===(v=c.current)||void 0===v||v.classList.remove(Yr);const b=d.current?32:0,Z=p<m?p-b:m;Z<100?null===(f=c.current)||void 0===f||f.classList.add(Gr):null===(y=c.current)||void 0===y||y.classList.remove(Gr),t.style.transform=`translate3d(${x}px, ${C}px, 0)`,t.style.height=`${Z+1}px`}));return e.observe(n),e.observe(a),e.observe(i),e.observe(r),e.observe(s),()=>e.disconnect()}}),[]);return(0,n.useEffect)((()=>{a&&r&&(c.current=r,p(r))}),[p,a,r]),window.ResizeObserver?(0,u.tZ)("div",{ref:o,css:an.columnContainer,className:i?"":qr,children:i&&(0,u.tZ)("div",{css:an.buttonContainer,children:(0,u.BX)(x.B,{css:an.button,type:"link",onClick:t,children:[(0,u.tZ)(m.wl8,{css:an.buttonIcon}),(0,u.tZ)("div",{css:an.caption,children:(0,u.tZ)(b.Z,{id:"npHb2a",defaultMessage:"Show more columns {count, select, 0 {} other {({count} total)}}",values:{count:l}})})]})})}):null},an={columnContainer:e=>({width:180,height:0,position:"absolute",border:`1px solid ${e.colors.grey200}`,borderTop:0,top:0,left:0,willChange:"transform",transform:"translate3d(0, 0, 0)",[`.${Gr} &`]:{display:"flex",alignItems:"center"},[`&.${qr}, .${Yr} &`]:{display:"none"},pointerEvents:"none",display:"flex",alignItems:"center"}),buttonContainer:e=>({top:0,paddingLeft:e.spacing.lg,paddingRight:e.spacing.lg,width:"100%",[`.${Gr} &`]:{paddingTop:e.spacing.xs},pointerEvents:"all"}),button:{whiteSpace:"pre-wrap",width:"100%"},buttonIcon:e=>({color:e.colors.textSecondary}),caption:e=>({color:e.colors.textSecondary,[`.${Gr} &`]:{display:"none"}})},sn=e=>(0,u.tZ)("strong",{children:e}),ln=e=>{let{isLoading:t,allRunsCount:r}=e;return(0,u.BX)("div",{css:on.statusBar,children:[(0,u.tZ)(x.T.Text,{size:"sm",color:t?"secondary":void 0,children:(0,u.tZ)(b.Z,{id:"gLj8lU",defaultMessage:"<strong>{length}</strong> matching {length, plural, =0 {runs} =1 {run} other {runs}}",values:{strong:sn,length:r}})}),t&&(0,u.tZ)(m.$jN,{size:"small"})]})},on={statusBar:e=>({height:28,display:"flex",gap:8,marginTop:-1,position:"relative",alignItems:"center",borderTop:`1px solid ${e.colors.border}`})},cn=e=>{let{content:t,copyText:r,headerText:n,empty:a}=e;const{theme:i}=(0,x.u)();return(0,u.tZ)("div",{css:(0,f.iv)({width:300,padding:i.spacing.sm,paddingRight:0,borderLeft:`1px solid ${i.colors.borderDecorative}`,overflow:"auto",height:"100%"},""),children:t?(0,u.BX)(u.HY,{children:[(0,u.BX)("div",{css:(0,f.iv)({display:"grid",gridTemplateColumns:"1fr auto",rowGap:i.spacing.sm,alignItems:"center"},""),children:[n&&(0,u.tZ)(x.T.Title,{level:4,children:n}),r&&(0,u.tZ)(D,{copyText:r,showLabel:!1,icon:(0,u.tZ)(m.TIy,{})})]}),t]}):(0,u.tZ)("div",{css:(0,f.iv)({marginTop:i.spacing.md},""),children:a})})},dn=n.memo((e=>{let{experiments:t,searchFacetsState:r,runsData:a,isLoading:i,moreRunsAvailable:o,updateSearchFacets:c,updateViewState:d,onAddColumnClicked:p,rowsData:h,loadMoreRunsFunc:g,onDatasetSelected:v,expandRows:f,viewState:y}=e;const{compareRunsMode:x}=r,C=void 0!==x,{paramKeyList:Z,metricKeyList:R,tagsList:S}=a,[E,w]=(0,n.useState)(),[k,T]=(0,n.useState)(),B=(0,n.useRef)([]),M=(0,n.useMemo)((()=>s.default.getVisibleTagKeyList(S)),[S]),I=(0,n.useRef)(null),A=(0,n.useMemo)((()=>h.some((e=>{var t;return null===(t=e.runDateAndNestInfo)||void 0===t?void 0:t.hasExpander}))),[h]),L=(0,n.useCallback)((e=>{let{api:t}=e;const r=t.getSelectedRows().filter((e=>!e.isLoadMoreRow)).map((e=>{let{runInfo:t}=e;return t.run_uuid}));d({runsSelected:r.reduce(((e,t)=>({...e,[t]:!0})),{})}),B.current=r}),[d]),D=(0,n.useCallback)((e=>{const t=e.api.getSelectedRows().filter((e=>!e.isLoadMoreRow));if(B.current&&t.length!==B.current.length){const t=Boolean(e.node.isSelected()),{runDateAndNestInfo:r}=e.data;if(!r)return;const{isParent:n,expanderOpen:a,childrenIds:i}=r;if(n&&a&&i){const r=i;e.api.forEachNode((e=>{var n;if(null!==(n=e.data)&&void 0!==n&&n.isLoadMoreRow)return;const{runInfo:a,runDateAndNestInfo:i}=e.data,s=a.run_uuid;r.includes(s)&&(null!==i&&void 0!==i&&i.childrenIds&&r.push(...i.childrenIds),e.setSelected(t,!1,!0))}))}}}),[]),N=(0,n.useCallback)(((e,t)=>{c({orderByKey:e,orderByAsc:t})}),[c]),O=(0,n.useCallback)((e=>c((t=>{let{runsExpanded:r,...n}=t;return{...n,runsExpanded:{...r,[e]:!r[e]}}}))),[c]),H=(0,n.useCallback)((e=>{c((t=>({...t,runsPinned:t.runsPinned.includes(e)?t.runsPinned.filter((t=>t!==e)):[...t.runsPinned,e]}))),requestAnimationFrame((()=>{if(!E)return;const t=E.getRowNode(e);t&&E.redrawRows({rowNodes:[t]})}))}),[E,c]),P=(0,n.useCallback)((e=>{c((t=>{if(e===Te.SHOWALL)return{...t,runsHidden:[]};if(e===Te.HIDEALL)return{...t,runsHidden:h.map((e=>e.runUuid))};const r=e;return{...t,runsHidden:t.runsHidden.includes(r)?t.runsHidden.filter((e=>e!==r)):[...t.runsHidden,r]}}))}),[c,h]),U=(0,n.useCallback)((e=>{w(e.api),T(e.columnApi)}),[]),X=tt({searchFacetsState:r,onSortBy:N,onExpand:O,compareExperiments:t.length>1,onTogglePin:H,onToggleVisibility:P,metricKeyList:R,paramKeyList:Z,tagKeyList:M,columnApi:k,isComparingRuns:C,onDatasetSelected:v,expandRows:f});(0,n.useEffect)((()=>{if(E)if(i)E.showLoadingOverlay();else{if(E.hideOverlay(),h.length&&o)return void E.setRowData([...h,{runUuid:(0,l.uniqueId)("load_more"),isLoadMoreRow:!0}]);E.setRowData(h)}}),[E,h,i,o,g]);const W=(0,n.useMemo)((()=>et(t.length>1).length+(R.length+Z.length+M.length)),[t.length,M.length,R.length,Z.length]),_=r.selectedColumns.length>=W,K=Math.max(0,W-r.selectedColumns.length),F=!_&&!C&&h.length>0,V=(0,n.useMemo)((()=>a.runInfos.filter((e=>r.runsPinned.includes(e.run_uuid)||a.runUuidsMatchingFilter.includes(e.run_uuid))).length),[a,r.runsPinned]);(0,n.useLayoutEffect)((()=>{E&&(C&&(E.deselectAll(),E.sizeColumnsToFit()),E.resetRowHeights())}),[E,C]);const z=(0,n.useCallback)((e=>C||!f?32:((e,t)=>{const r=Ve(j.D5.ATTRIBUTES,j.z.DATASET);if((0,Ue.GW)()&&e.selectedColumns.includes(r)){var n;const{data:e}=t;return 32*Math.min((null===(n=e.datasets)||void 0===n?void 0:n.length)||1,3)}return 32})(r,e)),[r,C,f]);(0,n.useEffect)((()=>{(0,Ue.GW)()&&(null===E||void 0===E||E.resetRowHeights())}),[E,r.selectedColumns,f]);const[$,q]=(0,n.useState)(null),G=(0,n.useCallback)((e=>{var t;let{column:r,data:n,value:a}=e;const i=null===(t=r.getParent())||void 0===t?void 0:t.getGroupId();(i===j.D5.METRICS||i===j.D5.PARAMS)&&(q({value:a,header:`Run name: ${n.runName}, Column name: ${r.getColId()}`}),d({previewPaneVisible:!0}))}),[d]),J=!C&&y.previewPaneVisible;return(0,u.BX)("div",{css:e=>({display:"grid",gridTemplateColumns:J?"1fr auto":"1fr",borderTop:`1px solid ${e.colors.border}`}),children:[(0,u.BX)("div",{css:un.tableAreaWrapper,children:[(0,u.BX)("div",{ref:I,className:or()("ag-theme-balham ag-grid-sticky",{"ag-grid-expanders-visible":A}),css:un.agGridOverrides,children:[(0,u.tZ)(zr,{defaultColDef:rt,columnDefs:X,rowSelection:"multiple",onGridReady:U,onSelectionChanged:L,getRowHeight:z,headerHeight:32,onRowSelected:D,suppressRowClickSelection:!0,suppressColumnMoveAnimation:!0,suppressScrollOnNewData:!0,isFullWidthRow:Qe,fullWidthCellRenderer:"LoadMoreRowRenderer",fullWidthCellRendererParams:{loadMoreRunsFunc:g},suppressFieldDotNotation:!0,enableCellTextSelection:!0,components:{agColumnHeader:Y,loadingOverlayComponent:m.$jN,LoadMoreRowRenderer:Pe,SourceCellRenderer:pe,ModelsCellRenderer:de,VersionCellRenderer:he,DateCellRenderer:ee,ExperimentNameCellRenderer:ae,RowActionsCellRenderer:Ie,RowActionsHeaderCellRenderer:Le,RunNameCellRenderer:Ne,DatasetsCellRenderer:Ke},suppressNoRowsOverlay:!0,loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:{showImmediately:!0},getRowId:Je,rowBuffer:101,onCellClicked:G}),F&&(0,u.tZ)(nn,{gridContainerElement:I.current,isInitialized:Boolean(E),onClick:p,visible:!i,moreRunsAvailable:o,moreAvailableRunsTableColumnCount:K})]}),h.length<1&&!i&&(0,u.tZ)($r,{onClearFilters:()=>c(gt),isFiltered:vt(r)}),(0,u.tZ)(ln,{allRunsCount:V,isLoading:i})]}),J&&(0,u.tZ)(cn,{content:null===$||void 0===$?void 0:$.value,copyText:null===$||void 0===$?void 0:$.value,headerText:null===$||void 0===$?void 0:$.header,empty:(0,u.tZ)(m.HYy,{description:(0,u.tZ)(b.Z,{id:"cAKSkQ",defaultMessage:"Select a cell to display preview"})})})]})})),un={tableAreaWrapper:{display:"flex",flexDirection:"column",position:"relative"},agGridOverrides:e=>{const t=(e=>({rowBackground:e.colors.backgroundPrimary,rowBackgroundHover:`${e.colors.grey600}0A`,rowBackgroundSelected:`${e.colors.grey600}14`,rowBackgroundHoverSelected:`${e.colors.grey600}1F`,columnSortedBy:`${e.colors.blue100}b3`,headerBackground:e.colors.grey100,headerTextColor:"#2E3840",headerGroupTextColor:e.colors.textSecondary,borderColor:e.colors.grey200,headerBorderColor:"transparent",checkboxBorderColor:e.colors.actionDefaultBorderDefault,checkboxBorderColorChecked:e.colors.backgroundPrimary,checkboxBackgroundColorChecked:e.colors.actionPrimaryBackgroundDefault}))(e);return{height:"100%",position:"relative","&.ag-theme-balham":{"--ag-border-color":t.borderColor,"--ag-row-border-color":t.borderColor,"--ag-odd-row-background-color":t.rowBackground,"--ag-row-hover-color":t.rowBackgroundHover,"--ag-selected-row-background-color":t.rowBackgroundSelected,"--ag-header-foreground-color":t.headerTextColor,"--ag-header-background-color":t.headerBackground,"&.ag-grid-sticky .ag-header":{position:"sticky",top:0,zIndex:1},"&.ag-grid-sticky .ag-root":{overflow:"visible"},"&.ag-grid-sticky .ag-root-wrapper":{border:"0",borderRadius:"4px",overflow:"visible"},".ag-header::after":{content:'""',position:"absolute",top:32,left:0,right:0,height:1,backgroundColor:t.borderColor},".ag-cell":{display:"flex",overflow:"hidden","& > .ag-cell-wrapper":{overflow:"hidden"}},".ag-header-cell":{padding:0},".ag-header-cell .ag-checkbox":{padding:"0 7px",borderLeft:"1px solid transparent"},".ag-cell.is-ordered-by, .ag-header-cell > .is-ordered-by":{backgroundColor:t.columnSortedBy},".ag-header-row":{"--ag-border-color":t.headerBorderColor},".ag-header-row.ag-header-row-column-group":{"--ag-header-foreground-color":t.headerGroupTextColor},".ag-row.ag-row-selected.ag-row-hover":{backgroundColor:t.rowBackgroundHoverSelected},".ag-header:not(:hover) .ag-header-cell::after, .ag-header:not(:hover) .ag-header-group-cell::after":{opacity:0},".ag-pinned-left-header":{borderRight:"none"},".ag-overlay-loading-wrapper":{paddingTop:4*e.spacing.md,alignItems:"center",zIndex:2},".ag-overlay-loading-wrapper .ag-react-container":{flex:1},".ag-center-cols-container":{minHeight:0},".ag-full-width-row":{borderBottom:0,backgroundColor:"transparent",zIndex:1,"&.ag-row-hover":{backgroundColor:"transparent"}},".is-checkbox-cell":{display:"flex",alignItems:"center",paddingLeft:7,".is-multiline-cell .ag-cell-value":{height:"100%"}},".is-previewable-cell":{cursor:"pointer"},".ag-header-cell .ag-checkbox .ag-input-wrapper:not(.ag-indeterminate):not(.ag-checked)":{"--ag-checkbox-background-color":t.headerBackground},".ag-cell-wrapper .ag-selection-checkbox":{marginRight:20},".is-checkbox-cell, .ag-header-cell .ag-checkbox":{".ag-checkbox-input-wrapper::after":{color:t.checkboxBorderColor},".ag-checkbox-input-wrapper.ag-checked":{"--ag-checkbox-background-color":t.checkboxBackgroundColorChecked,"--ag-checkbox-checked-color":t.checkboxBorderColorChecked,"&::after":{color:t.checkboxBorderColorChecked}}}}}}};var pn=r(79108);class hn{constructor(){this.runsSelected={},this.hiddenChildRunsSelected={},this.columnSelectorVisible=!1,this.previewPaneVisible=!1,this.artifactViewState={selectedTables:[],groupByCols:[],outputColumn:"",intersectingOnly:!1}}}const mn=e=>e.map(((e,t)=>{var r;let{runInfo:n,metrics:a=[],params:i=[],tags:s={},datasets:l=[]}=e;return{index:t,runInfo:n,level:0,isPinnable:!(null!==(r=s[ke])&&void 0!==r&&r.value),metrics:a,params:i,tags:s,datasets:l}})),gn=(e,t,r)=>{if(!e)return[];const n={};for(const a of t)n[`${r}-${a}`]="-";for(const{key:a,value:i}of e)(i||(0,l.isNumber)(i))&&(n[`${r}-${a}`]=i);return n},vn=e=>{const t=["#077A9D","#8BCAE7","#FFAB00","#FFDB96","#00A972","#99DDB4","#BA7B23","#FF3621","#FCA4A1","#919191","#00875C","#1B5162","#914B9F","#D01F0B","#BD89C7","#AB4057","#5F5F5F","#BF7080","#C2C2C2","#7F1035"];let r=0,n=0;for(let a=0;a<e.length;a++)r=(r+e.charCodeAt(a))%255,n=(n+r)%255;return t[(r|n<<8)%t.length]},fn=e=>{let{experiments:t,modelVersionsByRunUuid:r,runsExpanded:n,nestChildren:a,referenceTime:i,paramKeyList:l,metricKeyList:o,tagKeyList:c,runsPinned:d,runsHidden:u,runData:p,runUuidsMatchingFilter:h}=e;const m=s.default.getExperimentNameMap(s.default.sortExperimentsById(t)),g=a?(e=>{let{runsExpanded:t,runData:r}=e;const n={};r.forEach(((e,t)=>{let{runInfo:r}=e;n[r.run_uuid]=t}));const a=r.map((e=>{let{runInfo:t}=e;return{value:t.run_uuid}}));let i=!1;if(r.forEach(((e,t)=>{let{tags:r}=e;const s=null===r||void 0===r?void 0:r[ke];if(s){const e=n[s.value];void 0!==e&&(i=!0,a[t].parent=a[e])}})),!i)return mn(r);const s={},l=[];a.forEach(((e,t)=>{const{parent:r}=e;void 0!==r&&r.value!==e.value?s[r.value]?s[r.value].push(t):s[r.value]=[t]:l.push(t)}));const o=[],c=new Set,d=(e,n)=>{if(!c.has(e)){const a=r[e].runInfo,i=a.run_uuid,u=Boolean(l.includes(e))||0===n,p={index:e,isParent:!1,hasExpander:!1,level:n,runInfo:a,params:r[e].params||[],metrics:r[e].metrics||[],tags:r[e].tags||{},datasets:r[e].datasets||[],isPinnable:u};s[i]&&(p.isParent=!0,p.hasExpander=!0,p.expanderOpen=Boolean(t[i]),p.childrenIds=s[i].map((e=>r[e].runInfo.run_uuid))),o.push(p),c.add(e);const h=s[i];h&&t[i]&&h.forEach((e=>{d(e,n+1)}))}};return l.forEach((e=>{d(e,0)})),o})({runData:p,runsExpanded:n}):mn(p),v=[],f=g.map((e=>{const{runInfo:t,isParent:n=!1,hasExpander:a=!1,level:p=0,expanderOpen:h=!1,isPinnable:g=!1,childrenIds:f=[],tags:y,params:x,metrics:C,datasets:b}=e,Z=(C||[]).map((e=>{let{key:t,value:r}=e;return{key:t,value:s.default.formatMetric(r)}})),R=t.run_uuid,{experiment_id:S}=t,E=m[S],w=s.default.getUser(t,y),k=s.default.getDuration(t.start_time,t.end_time),T=s.default.getRunName(t)||t.run_uuid,B=s.default.getVisibleTagValues(y).map((e=>{let[t,r]=e;return{key:t,value:r}})),M={startTime:t.start_time,referenceTime:i,experimentId:S,runUuid:R,runStatus:t.status,isParent:n,hasExpander:a,expanderOpen:h,childrenIds:f,level:p},I={registeredModels:r[t.run_uuid]||[],loggedModels:s.default.getLoggedModelsFromTags(y),experimentId:t.experiment_id,runUuid:t.run_uuid},A={version:s.default.getSourceVersion(y),name:s.default.getSourceName(y),type:s.default.getSourceType(y)},L=u.includes(R),D=g&&d.includes(R),N=v.includes(R);return(D||N)&&v.push(...f),{runUuid:R,runDateAndNestInfo:M,runInfo:t,experimentName:E,experimentId:S,duration:k,user:w,runName:T,tags:y,models:I,version:A,pinnable:g,color:vn(R),hidden:L,pinned:D||N,...gn(x,l,Se),...gn(Z,o,Ee),datasets:b,...gn(B,c,we)}}));return[...f.filter((e=>{let{pinned:t}=e;return t})),...f.filter((e=>{let{pinned:t,runUuid:r}=e;return!t&&h.includes(r)}))]};var yn=r(78438);let xn=function(e){return e.BAR="BAR",e.LINE="LINE",e.SCATTER="SCATTER",e.CONTOUR="CONTOUR",e.PARALLEL="PARALLEL",e}({});class Cn{constructor(e){this.uuid=void 0,this.type=xn.BAR,this.runsCountToCompare=10,this.uuid=e}static serialize(e){return Object.keys(e).reduce(((t,r)=>({...t,[r]:e[r]})),{})}static getEmptyChartCardByType(e,t){return e===xn.BAR?new Rn(t):e===xn.SCATTER?new bn(t):e===xn.PARALLEL?new En(t):e===xn.LINE?new Zn(t):new Sn(t)}static getBaseChartConfigs(e){const t=[Cn.getEmptyChartCardByType(xn.PARALLEL,(0,yn.Fs)())];return e&&t.push({...Cn.getEmptyChartCardByType(xn.BAR,(0,yn.Fs)()),metricKey:e}),t}}class bn extends Cn{constructor(){super(...arguments),this.type=xn.SCATTER,this.xaxis={key:"",type:"METRIC"},this.yaxis={key:"",type:"METRIC"},this.runsCountToCompare=100}}class Zn extends Cn{constructor(){super(...arguments),this.type=xn.LINE,this.metricKey="",this.scaleType="linear",this.xAxisKey="step"}}class Rn extends Cn{constructor(){super(...arguments),this.type=xn.BAR,this.metricKey=""}}class Sn extends Cn{constructor(){super(...arguments),this.type=xn.CONTOUR,this.xaxis={key:"",type:"METRIC"},this.yaxis={key:"",type:"METRIC"},this.zaxis={key:"",type:"METRIC"}}}class En extends Cn{constructor(){super(...arguments),this.type=xn.PARALLEL,this.selectedParams=[],this.selectedMetrics=[]}}var wn,kn,Tn,Bn,Mn;function In(){return In=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},In.apply(this,arguments)}function An(e,t){let{title:r,titleId:a,...i}=e;return n.createElement("svg",In({width:18,height:16,viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,wn||(wn=n.createElement("path",{d:"M1 0.813599V15.1865H17",stroke:"#A3AEB8",strokeLinecap:"round"})),kn||(kn=n.createElement("rect",{x:3.16943,y:10.5763,width:2.16949,height:3.25424,fill:"#338ECC"})),Tn||(Tn=n.createElement("rect",{x:6.42371,y:5.15259,width:2.16949,height:8.67797,fill:"#338ECC"})),Bn||(Bn=n.createElement("rect",{x:9.67798,y:8.40686,width:2.16949,height:5.42373,fill:"#338ECC"})),Mn||(Mn=n.createElement("rect",{x:12.9323,y:1.89832,width:2.16949,height:11.9322,fill:"#338ECC"})))}const Ln=n.forwardRef(An);var Dn,Nn,On;r.p;function Hn(){return Hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hn.apply(this,arguments)}function Pn(e,t){let{title:r,titleId:a,...i}=e;return n.createElement("svg",Hn({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,Dn||(Dn=n.createElement("path",{d:"M1 1V17H17",stroke:"#A3AEB8",strokeLinecap:"round"})),Nn||(Nn=n.createElement("path",{d:"M12.9749 4.94148C12.9188 4.71702 12.221 4.73284 12.0618 4.71515C11.1779 4.61693 10.2817 4.66052 9.39271 4.66052C8.11919 4.66052 7.15648 4.97961 6.24753 5.90922C5.86197 6.30355 5.5235 6.77684 5.23295 7.24378C4.99434 7.62726 4.65544 7.93479 4.40569 8.31299C3.93777 9.02154 3.56281 9.80723 3.56281 10.6699C3.56281 11.1806 3.37479 11.598 3.76962 12.0669C4.19449 12.5714 4.6863 12.9507 5.27978 13.2649C5.88594 13.5858 6.42202 13.8619 7.13723 13.8619C7.74338 13.8619 8.34952 13.8619 8.95567 13.8619C9.45735 13.8619 9.96042 13.8731 10.4619 13.8619C11.1412 13.8468 11.9484 13.1895 12.413 12.7381C13.581 11.6035 14.2393 9.88016 14.2393 8.24665C14.2393 7.69923 14.3797 7.17063 14.3797 6.62723C14.3797 6.40084 14.4779 5.87696 14.2744 5.71411C13.9268 5.43606 13.5785 5.13789 13.1857 4.94148",stroke:"#338ECC",strokeLinecap:"round"})),On||(On=n.createElement("path",{d:"M11.9213 6.83789C11.2761 6.83789 10.6309 6.83789 9.98577 6.83789C9.19776 6.83789 8.80182 7.44144 8.2844 7.97734C7.58163 8.70521 7.28544 9.67306 7.28544 10.666C7.28544 10.9641 7.22004 11.177 7.46104 11.3645C7.6831 11.5372 8.10719 11.6142 8.37806 11.6142C9.07316 11.6142 9.91042 11.5583 10.4462 11.0523C10.9277 10.5975 11.473 10.3701 11.8159 9.75284C12.045 9.34042 12.2022 8.86324 12.2022 8.38317C12.2022 8.14903 12.2022 7.9149 12.2022 7.68077C12.2022 7.4241 12.0208 7.38817 11.9213 7.18909",stroke:"#338ECC",strokeLinecap:"round"})))}const Un=n.forwardRef(Pn);var Xn,Wn;r.p;function _n(){return _n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_n.apply(this,arguments)}function Kn(e,t){let{title:r,titleId:a,...i}=e;return n.createElement("svg",_n({width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,Xn||(Xn=n.createElement("path",{d:"M4.38977 15.717L8.79655 10.8113L12.5254 14.9622L19.644 7.03772",stroke:"#338ECC",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Wn||(Wn=n.createElement("path",{d:"M1 1V21H21",stroke:"#A3AEB8",strokeLinecap:"round"})))}const Fn=n.forwardRef(Kn);var Vn,zn,$n,jn,Yn;r.p;function qn(){return qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qn.apply(this,arguments)}function Gn(e,t){let{title:r,titleId:a,...i}=e;return n.createElement("svg",qn({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,Vn||(Vn=n.createElement("path",{d:"M1 1V17H17",stroke:"#A3AEB8",strokeLinecap:"round"})),zn||(zn=n.createElement("path",{d:"M4.21875 3.58289C4.55663 3.58289 4.88067 3.68935 5.21469 3.73008C5.6474 3.78285 6.02137 3.96513 6.37191 4.21552C6.76902 4.49917 7.0271 4.74589 7.24101 5.18954C7.44337 5.60925 7.59378 6.06989 7.72958 6.51432C7.86002 6.94121 8.09708 7.33726 8.19153 7.77803C8.25347 8.0671 8.34514 8.32427 8.44678 8.60015C8.58028 8.96252 8.80086 9.27915 8.96667 9.62583C9.15145 10.0122 9.216 10.4461 9.34876 10.8551C9.57831 11.5623 9.91132 12.4763 10.7205 12.6731C11.4284 12.8453 12.1459 12.8845 12.8705 12.8845C13.0981 12.8845 13.3979 12.898 13.5831 12.7499C13.6402 12.7042 13.7451 12.6907 13.8164 12.6591C13.8752 12.6329 14.0919 12.5871 14.1123 12.5463",stroke:"#CCE3F2",strokeLinecap:"round"})),$n||($n=n.createElement("path",{d:"M4.16162 12.9805C4.32512 12.9805 4.4895 12.9859 4.65284 12.9805C4.84076 12.9742 5.0468 12.7952 5.2099 12.707C5.62236 12.4841 5.99426 12.0648 6.24299 11.6739C6.49491 11.2781 6.8776 10.9871 7.0887 10.5649C7.27767 10.187 7.50992 9.80749 7.73691 9.45078C7.93911 9.13304 8.10211 8.77722 8.28637 8.44554C8.43088 8.18544 8.45 7.88672 8.60542 7.62768C8.94898 7.05509 9.16215 6.418 9.45873 5.82484C9.72614 5.29001 9.96898 4.82426 10.4159 4.42207C10.5753 4.27853 10.8984 4.21824 11.0995 4.14861C11.3303 4.06873 11.579 4.02714 11.8136 3.93592C12.0394 3.84807 12.2521 3.84383 12.4795 3.77386C12.6993 3.70623 12.9319 3.63713 13.1632 3.63713C13.5192 3.63713 13.9089 3.59155 14.2798 3.59155",stroke:"#CCE3F2",strokeLinecap:"round"})),jn||(jn=n.createElement("path",{d:"M3.79248 2.74207V13.8225",stroke:"#338ECC",strokeLinecap:"round"})),Yn||(Yn=n.createElement("path",{d:"M14.873 3.04419V13.7217",stroke:"#338ECC",strokeLinecap:"round"})))}const Jn=n.forwardRef(Gn);var Qn,ea,ta,ra,na,aa,ia;r.p;function sa(){return sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sa.apply(this,arguments)}function la(e,t){let{title:r,titleId:a,...i}=e;return n.createElement("svg",sa({width:18,height:16,viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,Qn||(Qn=n.createElement("path",{d:"M1 0.813599V15.1865H17",stroke:"#A3AEB8",strokeLinecap:"round"})),ea||(ea=n.createElement("circle",{cx:3.98301,cy:12.4746,r:1.35593,fill:"#338ECC"})),ta||(ta=n.createElement("ellipse",{cx:9.40684,cy:10.8475,rx:1.35593,ry:1.35593,fill:"#338ECC"})),ra||(ra=n.createElement("circle",{cx:5.6102,cy:8.1356,r:1.35593,fill:"#338ECC",fillOpacity:.25})),na||(na=n.createElement("circle",{cx:9.40684,cy:6.50852,r:1.35593,fill:"#338ECC"})),aa||(aa=n.createElement("ellipse",{cx:13.7457,cy:5.96616,rx:1.35593,ry:1.35593,fill:"#338ECC",fillOpacity:.25})),ia||(ia=n.createElement("ellipse",{cx:16.4576,cy:2.46128,rx:1.35593,ry:1.35593,fill:"#338ECC"})))}const oa=n.forwardRef(la);r.p;const ca=e=>{let{onAddChart:t}=e;return(0,u.BX)(m.h_2.Root,{modal:!1,children:[(0,u.tZ)(m.h_2.Trigger,{asChild:!0,children:(0,u.tZ)(x.B,{css:da.addChartButton,icon:(0,u.tZ)(m.pOD,{}),"data-testid":"experiment-view-compare-runs-add-chart",children:"Add chart"})}),(0,u.BX)(m.h_2.Content,{align:"end",children:[(0,u.BX)(m.h_2.Item,{onClick:()=>t(xn.BAR),"data-testid":"experiment-view-compare-runs-chart-type-bar",children:[(0,u.tZ)(m.h_2.IconWrapper,{css:da.iconWrapper,children:(0,u.tZ)(Ln,{})}),"Bar chart"]}),(0,u.BX)(m.h_2.Item,{onClick:()=>t(xn.LINE),"data-testid":"experiment-view-compare-runs-chart-type-line",children:[(0,u.tZ)(m.h_2.IconWrapper,{css:da.iconWrapper,children:(0,u.tZ)(Fn,{})}),"Line chart"]}),(0,u.BX)(m.h_2.Item,{onClick:()=>t(xn.PARALLEL),"data-testid":"experiment-view-compare-runs-chart-type-parallel",children:[(0,u.tZ)(m.h_2.IconWrapper,{css:da.iconWrapper,children:(0,u.tZ)(Jn,{})}),"Parallel coordinates"]}),(0,u.BX)(m.h_2.Item,{onClick:()=>t(xn.SCATTER),"data-testid":"experiment-view-compare-runs-chart-type-scatter",children:[(0,u.tZ)(m.h_2.IconWrapper,{css:da.iconWrapper,children:(0,u.tZ)(oa,{})}),"Scatter chart"]}),(0,u.BX)(m.h_2.Item,{onClick:()=>t(xn.CONTOUR),"data-testid":"experiment-view-compare-runs-chart-type-contour",children:[(0,u.tZ)(m.h_2.IconWrapper,{css:da.iconWrapper,children:(0,u.tZ)(Un,{})}),"Contour chart"]})]})]})},da={addChartButton:e=>({backgroundColor:`${e.colors.backgroundPrimary} !important`}),iconWrapper:e=>({width:e.general.iconSize+e.spacing.xs})};var ua=r(79424);const pa=e=>{const t=(0,n.useRef)(e);return(0,n.useEffect)((()=>{t.current=e}),[e]),e=>{t.current(e)}},ha=(e,t)=>(r,n,a)=>{var i,s;const l=-1===n&&-1===a;var o,c,d,u;(null===(i=r.querySelector(".is-hover-highlight"))||void 0===i||i.classList.remove("is-hover-highlight"),n>-1)&&(null===(o=r.querySelectorAll(e)[n])||void 0===o||o.classList.add("is-hover-highlight"));(null===(s=r.querySelector(".is-selection-highlight"))||void 0===s||s.classList.remove("is-selection-highlight"),a>-1)&&(null===(c=r.querySelectorAll(e)[a])||void 0===c||c.classList.add("is-selection-highlight"));l?null===(d=r.querySelector(t))||void 0===d||d.classList.remove("is-highlight"):null===(u=r.querySelector(t))||void 0===u||u.classList.add("is-highlight")},ma=ha("svg .trace.bars g.point",".trace.bars"),ga=ha("svg .scatterlayer g.trace",".scatterlayer"),va=ha("svg .scatterlayer path.point",".trace.scatter"),fa=(e,t,r,a)=>{const i=(0,n.useMemo)((()=>e?r.findIndex((e=>e.runInfo.run_uuid===t)):-1),[r,e,t]),[s,l]=(0,n.useState)(-1);return(0,n.useEffect)((()=>{e&&a(e,s,i)}),[a,e,i,s]),{selectedTraceIndex:i,hoveredPointIndex:s,setHoveredPointIndex:l}};var ya=r(1132);const xa={displaylogo:!1,scrollZoom:!0,doubleClick:"autosize",showTips:!1},Ca=n.memo((e=>{let{runsData:t,metricKey:r,className:i,margin:s=ya.MP,onUpdate:l,onHover:o,onUnhover:c,barWidth:d=.5,width:p,height:h,displayRunNames:m=!0,useDefaultHoverBox:g=!0,displayMetricKey:v=!0,selectedRunUuid:f}=e;const y=(0,n.useMemo)((()=>{const e=t.map((e=>e.runInfo.run_uuid)),n=t.map((e=>{var t;return(0,ya.To)(null===(t=e.metrics[r])||void 0===t?void 0:t.value)})),a=t.map((e=>{var t;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"number"===typeof e?e.toFixed(t):e}(null===(t=e.metrics[r])||void 0===t?void 0:t.value)})),i=t.map((e=>e.color)),s=n.some((e=>e&&e<0));return[{y:e,x:n,text:a,textposition:s?"auto":"outside",textfont:{size:11},type:"bar",hovertemplate:g?"%{label}<extra></extra>":void 0,hoverinfo:g?"y":"none",hoverlabel:g?ya.Lg:void 0,width:d,orientation:"h",marker:{color:i}}]}),[t,r,d,g]),{layoutHeight:x,layoutWidth:C,setContainerDiv:b,containerDiv:Z,isDynamicSizeSupported:R}=(0,ya.Ih)(),{formatMessage:S}=(0,a.Z)(),[E,w]=(0,n.useState)({width:p||C,height:h||x,margin:s,xaxis:{title:v?r:void 0},yaxis:{showticklabels:m,title:m?S({id:"+hQ+de",defaultMessage:"Run name"}):void 0,tickfont:{size:11},fixedrange:!0}});(0,n.useEffect)((()=>{w((e=>({...e,width:p||C,height:h||x,margin:s,xaxis:{...e.xaxis,title:v?r:void 0}})))}),[C,x,s,r,p,h,v]);const{setHoveredPointIndex:k}=fa(Z,f,t,ma),T=(0,n.useCallback)((e=>{var t,r,n;let{points:a,event:i}=e;k(null!==(t=null===(r=a[0])||void 0===r?void 0:r.pointIndex)&&void 0!==t?t:-1);const s=null===(n=a[0])||void 0===n?void 0:n.label;s&&(null===o||void 0===o||o(s,i))}),[o,k]),B=(0,n.useCallback)((()=>{null===c||void 0===c||c(),k(-1)}),[c,k]),M=pa(T);return(0,u.tZ)("div",{css:[ya.QW.chartWrapper,ba.highlightStyles,""],className:i,ref:b,children:(0,u.tZ)(ua.L,{data:y,useResizeHandler:!R,css:ya.QW.chart,onUpdate:l,layout:E,config:xa,onHover:M,onUnhover:B})})})),ba={highlightStyles:{".trace.bars g.point path":{transition:"var(--trace-transition)"},".trace.bars.is-highlight g.point path":{opacity:"var(--trace-opacity-dimmed-high) !important"},".trace.bars g.point.is-hover-highlight path":{opacity:"var(--trace-opacity-highlighted) !important"},".trace.bars g.point.is-selection-highlight path":{opacity:"var(--trace-opacity-highlighted) !important",stroke:"var(--trace-stroke-color)",strokeWidth:"var(--trace-stroke-width) !important"}}},Za=n.createContext(null);let Ra=function(e){return e[e.HIDDEN=0]="HIDDEN",e[e.HOVER=1]="HOVER",e[e.VISIBLE=2]="VISIBLE",e}({});const Sa=e=>{if(null===e||!(e instanceof Element))return null;if(e instanceof HTMLElement)return e;let t=e;for(;t&&!(t instanceof HTMLElement);)t=t.parentElement;return t},Ea=e=>{let{className:t,children:r,contextData:a,component:i,hoverOnly:s=!1}=e;const l=(0,n.useRef)(null),o=(0,n.useRef)(null),c=(0,n.useRef)({x:0,y:0}),[d,p]=(0,n.useState)(Ra.HIDDEN),[h,m]=(0,n.useState)(null),[g,v]=(0,n.useState)(""),[f,y]=(0,n.useState)(null),x=(0,n.useRef)(null),C=(0,n.useRef)(d),b=(0,n.useRef)(g),Z=(0,n.useRef)(h),R=(0,n.useCallback)((()=>{if(!o.current||!l.current)return;let e=c.current.x,t=c.current.y;const r=o.current.getBoundingClientRect(),n=l.current.getBoundingClientRect();c.current.x+r.width>=n.width&&(e-=r.width),c.current.y+r.height>=n.height&&(t-=r.height),o.current.style.left="0px",o.current.style.top="0px",o.current.style.transform=`translate3d(${e+1}px, ${t+1}px, 0)`}),[]);(0,n.useEffect)((()=>{C.current=d}),[d]);const S=(0,n.useCallback)(((e,t)=>{var r;const n=e.getBoundingClientRect(),a=(null===(r=l.current)||void 0===r?void 0:r.getBoundingClientRect())||{left:0,top:0};return{x:t.offsetX+(n.left-a.left),y:t.offsetY+(n.top-a.top)}}),[]),E=(0,n.useCallback)((e=>{if(C.current===Ra.HOVER&&o.current&&l.current){x.current=null;const t=Sa(e.target);t&&(c.current=S(t,e.nativeEvent),R())}}),[R,S]),w=(0,n.useCallback)(((e,t,r,n)=>{var a;b.current=e,Z.current=t,C.current!==Ra.VISIBLE&&(m(t),!e&&null!==(a=x.current)&&void 0!==a&&a.runUuid||v((t=>(n&&y(n),C.current===Ra.HIDDEN||C.current===Ra.HOVER&&e!==t?(p(Ra.HOVER),e):t))))}),[]),k=(0,n.useCallback)((e=>{s||0===e.button&&b.current&&(x.current={x:e.nativeEvent.pageX,y:e.nativeEvent.pageY,runUuid:b.current})}),[s]),T=(0,n.useCallback)((e=>{var t;if(null!==(t=x.current)&&void 0!==t&&t.runUuid&&e.nativeEvent.pageX===x.current.x&&e.nativeEvent.pageY===x.current.y){if(C.current===Ra.VISIBLE){v(x.current.runUuid);const t=Sa(e.nativeEvent.target);t&&(c.current=S(t,e.nativeEvent),R())}else p(Ra.VISIBLE);e.stopPropagation()}x.current=null}),[R,S]),B=(0,n.useCallback)((()=>p(Ra.HIDDEN)),[]);(0,n.useLayoutEffect)((()=>{if(!l.current)return;const e=l.current.getRootNode(),t=e=>{var t;if(C.current!==Ra.VISIBLE)return;const r=Sa(e.target);if(!r)return;r instanceof HTMLElement&&(null===o||void 0===o?void 0:o.current)instanceof HTMLElement&&o.current.contains(r)||null!==(t=x.current)&&void 0!==t&&t.runUuid||p(Ra.HIDDEN)};return e.addEventListener("click",t,{capture:!0}),()=>{e.removeEventListener("click",t,{capture:!0})}}),[S,R]);const M=(0,n.useCallback)((()=>{var e;b.current="",null!==(e=x.current)&&void 0!==e&&e.runUuid||C.current===Ra.VISIBLE||(v(""),p(Ra.HIDDEN))}),[]),I=(0,n.useMemo)((()=>d!==Ra.VISIBLE?null:g),[d,g]),A=(0,n.useMemo)((()=>({updateTooltip:w,resetTooltip:M,selectedRunUuid:I,closeContextMenu:B})),[w,M,I,B]);return(0,u.BX)(Za.Provider,{value:A,children:[(0,u.tZ)("div",{onMouseMove:E,onMouseDownCapture:k,onClickCapture:T,children:r}),(0,u.tZ)("div",{css:ka.contextMenuContainer,className:t,ref:l,children:d!==Ra.HIDDEN&&g&&(0,u.tZ)("div",{ref:o,css:ka.contextMenuWrapper,"data-testid":"tooltip-container",style:{userSelect:d===Ra.HOVER?"none":"unset",pointerEvents:d===Ra.HOVER?"none":"all"},children:(0,u.tZ)(i,{runUuid:g,additionalAxisData:f,hoverData:h,contextData:a,isHovering:d===Ra.HOVER,closeContextMenu:B})})})]})},wa=e=>{const t=(0,n.useContext)(Za);if(!t)throw new Error("You must invoke useCompareRunsTooltip() in a component being ancestor of <CompareRunsTooltipWrapper />!");const{updateTooltip:r,resetTooltip:a,selectedRunUuid:i,closeContextMenu:s}=t,l=(0,n.useCallback)((function(){r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e,arguments.length>1?arguments[1]:void 0,arguments.length>2?arguments[2]:void 0)}),[r,e]);return{setTooltip:l,resetTooltip:a,selectedRunUuid:i,closeContextMenu:s}},ka={contextMenuContainer:{overflow:"hidden",top:0,left:0,width:"100%",height:"100%",position:"fixed",pointerEvents:"none"},contextMenuWrapper:e=>({zIndex:1,position:"absolute",padding:e.spacing.sm,backgroundColor:"white",border:`1px solid ${e.colors.border}`,left:-999,top:-999}),overlayElement:()=>({"&::after":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"transparent"}})};var Ta={name:"1ykowef",styles:"margin-bottom:0"};const Ba=e=>{let{title:t,subtitle:r,onDelete:n,onEdit:a,children:i,fullWidth:s=!1}=e;return(0,u.BX)("div",{css:Ma.chartEntry(s),"data-testid":"experiment-view-compare-runs-card",children:[(0,u.BX)("div",{css:Ma.chartEntryTitle,children:[(0,u.BX)("div",{children:[(0,u.tZ)(x.T.Title,{level:4,css:Ta,children:t}),r&&(0,u.tZ)("span",{css:Ma.subtitle,children:r})]}),(0,u.BX)(m.h_2.Root,{modal:!1,children:[(0,u.tZ)(m.h_2.Trigger,{asChild:!0,children:(0,u.tZ)(x.B,{type:"tertiary",icon:(0,u.tZ)(m.VZO,{}),"data-testid":"experiment-view-compare-runs-card-menu"})}),(0,u.BX)(m.h_2.Content,{align:"end",minWidth:100,children:[(0,u.tZ)(m.h_2.Item,{onClick:a,"data-testid":"experiment-view-compare-runs-card-edit",children:"Configure"}),(0,u.tZ)(m.h_2.Item,{onClick:n,"data-testid":"experiment-view-compare-runs-card-delete",children:"Delete"})]})]})]}),i]})},Ma={chartEntry:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>({height:360,maxWidth:e?"unset":800,overflow:"hidden",display:"grid",gridTemplateRows:"auto 1fr",backgroundColor:t.colors.backgroundPrimary,padding:t.spacing.md,border:`1px solid ${t.colors.border}`,borderRadius:t.general.borderRadiusBase})},chartComponentWrapper:()=>({overflow:"hidden"}),chartEntryTitle:()=>({display:"grid",gridTemplateColumns:"1fr auto",alignItems:"flex-start"}),subtitle:e=>({color:e.colors.textSecondary,fontSize:11})},Ia={t:24,b:48,r:0,l:4,pad:0},Aa=e=>{let{config:t,chartRunData:r,onDelete:a,onEdit:i}=e;const s=(0,n.useMemo)((()=>r.slice(0,t.runsCountToCompare||10).reverse()),[r,t]),{setTooltip:l,resetTooltip:o,selectedRunUuid:c}=wa(t);return(0,u.tZ)(Ba,{onEdit:i,onDelete:a,title:t.metricKey,subtitle:(0,u.BX)(u.HY,{children:["Comparing first ",s.length," runs"]}),children:(0,u.tZ)("div",{css:La.barChartCardWrapper,children:(0,u.tZ)(Ca,{runsData:s,metricKey:t.metricKey,displayRunNames:!1,displayMetricKey:!1,useDefaultHoverBox:!1,margin:Ia,onHover:l,onUnhover:o,selectedRunUuid:c})})})},La={barChartCardWrapper:{overflow:"hidden"}};var Da,Na,Oa,Ha;function Pa(){return Pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pa.apply(this,arguments)}function Ua(e,t){let{title:r,titleId:a,...i}=e;return n.createElement("svg",Pa({width:80,height:42,viewBox:"0 0 80 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,Da||(Da=n.createElement("path",{d:"M1.28418 2.34094L39.4998 17.0908L76.3746 7.87216",stroke:"#CF797B",strokeLinecap:"round"})),Na||(Na=n.createElement("path",{d:"M1.95459 20.443L40.1702 25.1361L77.045 21.1134M1.95459 36.5338L40.1702 35.1929L77.045 25.1361",stroke:"#A88E6F",strokeLinecap:"round"})),Oa||(Oa=n.createElement("g",{opacity:.8},n.createElement("path",{d:"M1.28418 1V40.3341",stroke:"#338ECC",strokeLinecap:"round"}),n.createElement("path",{d:"M40.6189 2.07251V39.9763",stroke:"#338ECC",strokeLinecap:"round"}),n.createElement("path",{d:"M77.7156 2.07251V39.9763",stroke:"url(#paint0_linear_2781_406689)",strokeWidth:4,strokeLinecap:"square"}))),Ha||(Ha=n.createElement("defs",null,n.createElement("linearGradient",{id:"paint0_linear_2781_406689",x1:78.2156,y1:2.07251,x2:78.2156,y2:39.9763,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#D04F5E"}),n.createElement("stop",{offset:1,stopColor:"#4D9734"})))))}const Xa=n.forwardRef(Ua);r.p;const Wa=n.lazy((()=>Promise.all([r.e(807),r.e(97)]).then(r.bind(r,63308))));function _a(e,t,r){return e.map((e=>{const n={uuid:e.runInfo.run_uuid};function a(e,t){if(Array.isArray(e))for(const r of e)n[r]=r in t?t[r].value:null}return a(t,e.params),a(r,e.metrics),n}))}var Ka=e=>(0,u.tZ)(n.Suspense,{fallback:(0,u.tZ)(m.OdW,{}),children:(0,u.tZ)(Wa,{...e})});var Fa={name:"1neqb0a",styles:"display:flex;flex:1;justify-content:center;align-items:center"},Va={name:"10zh1lj",styles:"display:flex;flex-direction:column;align-items:center;max-width:360px"},za={name:"yz1nei",styles:"margin-top:16px"},$a={name:"18uqayh",styles:"margin-bottom:16px"};const ja=e=>{let{onEdit:t}=e;return(0,u.tZ)("div",{css:Fa,children:(0,u.BX)("div",{css:Va,children:[(0,u.tZ)(Xa,{}),(0,u.tZ)(x.T.Title,{css:za,color:"secondary",level:3,children:"Compare parameter importance"}),(0,u.tZ)(x.T.Text,{css:$a,color:"secondary",children:"Use the parallel coordinates chart to compare how various parameters in model affect your model metrics."}),(0,u.tZ)(x.B,{type:"primary",onClick:t,children:"Configure chart"})]})})},Ya=e=>{let{config:t,chartRunData:r,onDelete:a,onEdit:i}=e;const[s,l]=(0,n.useMemo)((()=>{var e,n;const a=((null===(e=t.selectedParams)||void 0===e?void 0:e.length)||0)+((null===(n=t.selectedMetrics)||void 0===n?void 0:n.length)||0)>=2;return[a,a?_a(r,t.selectedParams,t.selectedMetrics):[]]}),[t,r]),{setTooltip:o,resetTooltip:c,selectedRunUuid:d,closeContextMenu:p}=wa(t);return(0,u.tZ)(Ba,{onEdit:i,onDelete:a,title:"Parallel Coordinates",subtitle:s?(0,u.BX)(u.HY,{children:["Comparing ",r.length," runs"]}):null,fullWidth:!0,children:s?l.length?(0,u.tZ)("div",{css:qa.parallelChartCardWrapper,children:(0,u.tZ)(Ka,{data:l,selectedParams:t.selectedParams,selectedMetrics:t.selectedMetrics,onHover:o,onUnhover:c,axesRotateThreshold:8,selectedRunUuid:d,closeContextMenu:p})}):null:(0,u.tZ)(ja,{onEdit:i})})},qa={parallelChartCardWrapper:{display:"flex",overflow:"hidden",cursor:"pointer"}};var Ga=r(64218);const Ja={displaylogo:!1,scrollZoom:!0},Qa=n.memo((e=>{let{runsData:t,xAxis:r,yAxis:a,markerSize:i=10,className:s,margin:l=ya.MP,onUpdate:o,onHover:c,onUnhover:d,width:p,height:h,useDefaultHoverBox:m=!0,selectedRunUuid:g}=e;const v=(0,Ga.u)(),{layoutHeight:f,layoutWidth:y,setContainerDiv:x,containerDiv:C,isDynamicSizeSupported:b}=(0,ya.Ih)(),Z=(0,n.useMemo)((()=>{const e=[],n=[],s=[],l=[];for(const i of t){var o,c;const{runInfo:{run_uuid:t,run_name:d},metrics:u,params:p,color:h}=i,m="METRIC"===r.type?u:p,g="METRIC"===a.type?u:p,f=(null===m||void 0===m||null===(o=m[r.key])||void 0===o?void 0:o.value)||void 0,y=(null===g||void 0===g||null===(c=g[a.key])||void 0===c?void 0:c.value)||void 0;f&&y&&(e.push(f),n.push(y),s.push(h||v.colors.primary),l.push([t,d||t]))}return[{x:e,y:n,customdata:l,hovertemplate:m?"<b>%{customdata[1]}:</b><br><b>%{xaxis.title.text}:</b> %{x:.2f}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><extra></extra>":void 0,hoverinfo:m?void 0:"none",hoverlabel:m?ya.Lg:void 0,type:"scatter",mode:"markers",marker:{size:i,color:s}}]}),[t,r,a,v,i,m]),[R,S]=(0,n.useState)({width:p||y,height:h||f,margin:l,xaxis:{title:r.key},yaxis:{title:a.key}});(0,n.useEffect)((()=>{S((e=>{const t={...e,width:p||y,height:h||f,margin:l};return t.xaxis&&(t.xaxis.title=r.key),t.yaxis&&(t.yaxis.title=a.key),t}))}),[y,f,l,r.key,a.key,p,h]);const{setHoveredPointIndex:E}=fa(C,g,t,va),w=(0,n.useCallback)((e=>{var t,r,n,a;let{points:i}=e;const s=null===(t=i[0])||void 0===t||null===(r=t.customdata)||void 0===r?void 0:r[0];E(null!==(n=null===(a=i[0])||void 0===a?void 0:a.pointIndex)&&void 0!==n?n:-1),s&&(null===c||void 0===c||c(s))}),[c,E]),k=(0,n.useCallback)((()=>{null===d||void 0===d||d(),E(-1)}),[d,E]),T=pa(w);return(0,u.tZ)("div",{css:[ya.QW.chartWrapper,ya.QW.scatterChartHighlightStyles,""],className:s,ref:x,children:(0,u.tZ)(ua.L,{data:Z,useResizeHandler:!b,css:ya.QW.chart,layout:R,config:Ja,onUpdate:o,onHover:T,onUnhover:k})})})),ei=e=>{let{config:t,chartRunData:r,onDelete:a,onEdit:i}=e;const s=(0,n.useMemo)((()=>r.slice(0,t.runsCountToCompare||10).reverse()),[r,t]),{setTooltip:l,resetTooltip:o,selectedRunUuid:c}=wa(t);return(0,u.tZ)(Ba,{onEdit:i,onDelete:a,title:`${t.xaxis.key} vs. ${t.yaxis.key}`,subtitle:(0,u.BX)(u.HY,{children:["Comparing first ",s.length," runs"]}),children:(0,u.tZ)("div",{css:ti.scatterChartCardWrapper,children:(0,u.tZ)(Qa,{runsData:s,xAxis:t.xaxis,yAxis:t.yaxis,onHover:l,onUnhover:o,useDefaultHoverBox:!1,selectedRunUuid:c})})})},ti={scatterChartCardWrapper:{overflow:"hidden"}},ri={displaylogo:!1,scrollZoom:!0},ni=[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],ai=n.memo((e=>{let{runsData:t,xAxis:r,yAxis:a,zAxis:i,markerSize:s=10,className:l,reverseScale:o,margin:c=ya.r$,colorScale:d=ni,onUpdate:p,onHover:h,onUnhover:m,width:g,height:v,useDefaultHoverBox:f=!0,selectedRunUuid:y}=e;const x=(0,Ga.u)(),{layoutHeight:C,layoutWidth:b,setContainerDiv:Z,containerDiv:R,isDynamicSizeSupported:S}=(0,ya.Ih)(),E=(0,n.useMemo)((()=>{const e=[],n=[],l=[],c=[],u=[];for(const s of t){var p,h,m;const{runInfo:{run_uuid:t,run_name:o},metrics:d,params:g,color:v}=s,f="METRIC"===r.type?d:g,y="METRIC"===a.type?d:g,C="METRIC"===i.type?d:g,b=(null===f||void 0===f||null===(p=f[r.key])||void 0===p?void 0:p.value)||void 0,Z=(null===y||void 0===y||null===(h=y[a.key])||void 0===h?void 0:h.value)||void 0,R=(null===C||void 0===C||null===(m=C[i.key])||void 0===m?void 0:m.value)||void 0;b&&Z&&R&&(e.push(b),n.push(Z),l.push(R),c.push(v||x.colors.primary),u.push([t,o||t,R]))}const g=[{x:e,y:n,customdata:u,hovertemplate:f?(v=i.key,`<b>%{customdata[1]}:</b><br><b>%{xaxis.title.text}:</b> %{x:.2f}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><b>${v}:</b> %{customdata[2]:.2f}<extra></extra>`):void 0,hoverinfo:f?void 0:"none",hoverlabel:f?ya.Lg:void 0,type:"scatter",mode:"markers",marker:{size:s,color:c,line:{color:"black",width:1}}}];var v;return t.length>1&&g.unshift({x:e,y:n,z:l,type:"contour",connectgaps:!0,hoverinfo:"none",contours:{coloring:"heatmap"},colorscale:d,reversescale:o}),g}),[d,o,s,t,r.type,r.key,a.type,a.key,i.type,i.key,x.colors.primary,f]),[w,k]=(0,n.useState)({width:g||b,height:v||C,margin:c,xaxis:{title:r.key},yaxis:{ticks:"inside",title:{standoff:32,text:a.key}}});(0,n.useEffect)((()=>{k((e=>{const t={...e,width:g||b,height:v||C,margin:c};return t.xaxis&&(t.xaxis.title=r.key),t.yaxis&&(t.yaxis.title={standoff:32,text:a.key}),t}))}),[b,C,c,r.key,a.key,g,v]);const{setHoveredPointIndex:T}=fa(R,y,t,va),B=(0,n.useCallback)((e=>{var t,r;let{points:n}=e;const a=n.find((e=>{let{curveNumber:t}=e;return 1===t}));if(T(null!==(t=null===a||void 0===a?void 0:a.pointIndex)&&void 0!==t?t:-1),!a)return;const i=null===a||void 0===a||null===(r=a.customdata)||void 0===r?void 0:r[0];i&&(null===h||void 0===h||h(i))}),[h,T]),M=(0,n.useCallback)((()=>{null===m||void 0===m||m(),T(-1)}),[m,T]),I=pa(B);return(0,u.tZ)("div",{css:[ya.QW.chartWrapper,ya.QW.scatterChartHighlightStyles,""],className:l,ref:Z,children:(0,u.tZ)(ua.L,{data:E,useResizeHandler:!S,css:ya.QW.chart,onUpdate:p,layout:w,config:ri,onHover:I,onUnhover:M})})})),ii=e=>{let{config:t,chartRunData:r,onDelete:a,onEdit:i}=e;const s=(0,n.useMemo)((()=>r.slice(0,t.runsCountToCompare||10).reverse()),[r,t]),{setTooltip:l,resetTooltip:o,selectedRunUuid:c}=wa(t);return(0,u.tZ)(Ba,{onEdit:i,onDelete:a,title:`${t.xaxis.key} vs. ${t.yaxis.key} vs. ${t.zaxis.key}`,subtitle:(0,u.BX)(u.HY,{children:["Comparing first ",s.length," runs"]}),children:(0,u.tZ)("div",{css:si.contourChartCardWrapper,children:(0,u.tZ)(ai,{runsData:s,xAxis:t.xaxis,yAxis:t.yaxis,zAxis:t.zaxis,useDefaultHoverBox:!1,onHover:l,onUnhover:o,selectedRunUuid:c})})})},si={contourChartCardWrapper:{overflow:"hidden"}},li={displaylogo:!1,doubleClick:"autosize",scrollZoom:!0},oi=(e,t)=>{if(!e)return[];if("time-relative"===t){const{timestamp:t}=(0,l.minBy)(e,"timestamp")||{};if(t)return e.map((e=>(e.timestamp-t)/1e3))}else if("time"===t)return e.map((e=>e.timestamp));return e.map((e=>e.step))},ci=n.memo((e=>{let{runsData:t,metricKey:r,scaleType:i="linear",xAxisKey:s="step",className:l,margin:o=ya.MP,lineShape:c="spline",onUpdate:d,onHover:p,onUnhover:h,width:m,height:g,useDefaultHoverBox:v=!0,selectedRunUuid:f}=e;const y=(0,n.useMemo)((()=>t.map((e=>{var t,n;return e.metricsHistory?{uuid:e.runInfo.run_uuid,name:e.runInfo.run_name,x:oi(e.metricsHistory[r],s),y:null===(t=e.metricsHistory[r])||void 0===t?void 0:t.map((e=>(0,ya.To)(e.value))),hovertext:e.runInfo.run_name,text:"x",textposition:"outside",textfont:{size:11},hovertemplate:v?(n=e.runInfo.run_name,`<b>${n}</b>:<br><b>%{xaxis.title.text}:</b> %{x}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><extra></extra>`):void 0,hoverinfo:v?void 0:"none",hoverlabel:v?ya.Lg:void 0,type:"scatter",line:{shape:c},marker:{color:e.color}}:{}}))),[t,c,s,r,v]),{layoutHeight:x,layoutWidth:C,setContainerDiv:b,containerDiv:Z,isDynamicSizeSupported:R}=(0,ya.Ih)(),{formatMessage:S}=(0,a.Z)(),{setHoveredPointIndex:E}=fa(Z,f,t,ga),w=(0,n.useMemo)((()=>S("time"===s?{id:"y0rS56",defaultMessage:"Time"}:"time-relative"===s?{id:"d/lwTE",defaultMessage:"Time (s)"}:{id:"vPUy4a",defaultMessage:"Step"})),[S,s]),k=(0,n.useMemo)((()=>({tickfont:{size:11},type:"log"===i?"log":"linear"})),[i]),[T,B]=(0,n.useState)({width:m||C,height:g||x,margin:o,xaxis:{title:w},yaxis:k});(0,n.useEffect)((()=>{B((e=>({...e,width:m||C,height:g||x,margin:o,yaxis:k,showlegend:!1})))}),[C,x,o,k,m,g,w]);const M=(0,n.useCallback)((e=>{var t,r,n,a,i;let{points:s,event:l}=e;E(null!==(t=null===(r=s[0])||void 0===r?void 0:r.curveNumber)&&void 0!==t?t:-1);const o=(null===(n=s[0])||void 0===n?void 0:n.data).uuid,c={value:null===(a=s[0])||void 0===a?void 0:a.x,index:null===(i=s[0])||void 0===i?void 0:i.pointIndex,label:w};o&&(null===p||void 0===p||p(o,l,c))}),[p,E,w]),I=(0,n.useCallback)((()=>{null===h||void 0===h||h(),E(-1)}),[h,E]),A=T;A.xaxis&&(A.xaxis.title=w,A.xaxis.type="time"===s?"date":void 0),A.yaxis&&(A.yaxis.title=r);const L=pa(M);return(0,u.tZ)("div",{css:[ya.QW.chartWrapper,di.highlightStyles,""],className:l,ref:b,children:(0,u.tZ)(ua.L,{data:y,useResizeHandler:!R,css:ya.QW.chart,onUpdate:d,layout:A,config:li,onHover:L,onUnhover:I})})})),di={highlightStyles:{".scatterlayer g.trace":{transition:"var(--trace-transition)"},".scatterlayer.is-highlight g.trace":{opacity:"var(--trace-opacity-dimmed-low) !important"},".scatterlayer g.trace.is-hover-highlight":{opacity:"var(--trace-opacity-highlighted) !important"},".scatterlayer g.trace.is-selection-highlight":{opacity:"var(--trace-opacity-highlighted) !important"},".scatterlayer g.trace.is-selection-highlight path.point":{stroke:"var(--trace-stroke-color)",strokeWidth:"var(--trace-stroke-width) !important"}}},ui=e=>{let{config:t,chartRunData:r,isMetricHistoryLoading:a,onDelete:i,onEdit:s}=e;const l=(0,n.useMemo)((()=>r.slice(0,t.runsCountToCompare||10).reverse()),[r,t]),{setTooltip:o,resetTooltip:c,selectedRunUuid:d}=wa(t);return(0,u.tZ)(Ba,{onEdit:s,onDelete:i,title:t.metricKey,subtitle:(0,u.BX)(u.HY,{children:["Comparing first ",l.length," runs"]}),children:(0,u.tZ)("div",{css:pi.lineChartCardWrapper,children:a?(0,u.tZ)(m.OdW,{}):(0,u.tZ)(ci,{runsData:l,metricKey:t.metricKey,scaleType:t.scaleType,xAxisKey:t.xAxisKey,useDefaultHoverBox:!1,onHover:o,onUnhover:c,selectedRunUuid:d})})})},pi={lineChartCardWrapper:{overflow:"hidden"}},hi=e=>{let{chartRunData:t,cardsConfig:r,isMetricHistoryLoading:a,onRemoveChart:i,onStartEditChart:s}=e;const[l,o]=(0,n.useMemo)((()=>Array.isArray(r)?[r.filter((e=>e.type===xn.PARALLEL)),r.filter((e=>e.type!==xn.PARALLEL))]:[[],[]]),[r]);return(0,u.BX)(u.HY,{children:[l.length?(0,u.tZ)("div",{css:mi.parallelChartsWrapper,children:l.map((e=>(0,u.tZ)(Ya,{config:e,chartRunData:t,onEdit:()=>s(e),onDelete:()=>i(e)})))}):null,(0,u.tZ)("div",{css:mi.chartsWrapper,children:o.map((e=>e.type===xn.BAR?(0,u.tZ)(Aa,{config:e,chartRunData:t,onEdit:()=>s(e),onDelete:()=>i(e)}):e.type===xn.LINE?(0,u.tZ)(ui,{config:e,chartRunData:t,onEdit:()=>s(e),onDelete:()=>i(e),isMetricHistoryLoading:a}):e.type===xn.SCATTER?(0,u.tZ)(ei,{config:e,chartRunData:t,onEdit:()=>s(e),onDelete:()=>i(e)}):e.type===xn.CONTOUR?(0,u.tZ)(ii,{config:e,chartRunData:t,onEdit:()=>s(e),onDelete:()=>i(e)}):null))})]})},mi={chartGroupWrapper:e=>({display:"flex",flexDirection:"column",gap:e.spacing.md}),parallelChartsWrapper:e=>({display:"flex",flexDirection:"column",gap:e.spacing.md,marginBottom:e.spacing.md}),chartsWrapper:e=>({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(520px, 1fr))",gap:e.spacing.md})},gi=e=>{let{title:t,children:r}=e;return(0,u.BX)("div",{css:e=>({marginBottom:2*e.spacing.md}),"data-testid":"experiment-view-compare-runs-config-field",children:[(0,u.BX)(x.T.Title,{level:4,children:[t,":"]}),r]})},vi=e=>{let{value:t,onChange:r,metricKeyList:n,paramKeyList:i}=e;const{formatMessage:s}=(0,a.Z)(),l=!(null!==i&&void 0!==i&&i.length)&&!(null!==n&&void 0!==n&&n.length);return(0,u.BX)(m.Select,{css:xi.selectFull,value:l?s({id:"3VURvw",defaultMessage:"No metrics or parameters available"}):t,disabled:l,onChange:r,dangerouslySetAntdProps:{showSearch:!0},children:[null!==n&&void 0!==n&&n.length?(0,u.tZ)(m.Select.OptGroup,{label:s({id:"jH0+gA",defaultMessage:"Metrics"}),children:n.map((e=>(0,u.tZ)(m.Select.Option,{value:Ve("METRIC",e),children:e},Ve("METRIC",e))))}):null,null!==i&&void 0!==i&&i.length?(0,u.tZ)(m.Select.OptGroup,{label:s({id:"kWUhea",defaultMessage:"Params"}),children:i.map((e=>(0,u.tZ)(m.Select.Option,{value:Ve("PARAM",e),children:e},Ve("PARAM",e))))}):null]})},fi=e=>{let{onChange:t,value:r,options:n}=e;const{formatMessage:i}=(0,a.Z)();return(0,u.tZ)(gi,{title:i({id:"AW2rVK",defaultMessage:"Max. no of runs shown"}),children:(0,u.tZ)(m.Select,{css:xi.selectFull,value:r,onChange:t,children:n.map((e=>{const t="number"===typeof e?e:e.value,r="number"===typeof e?e:e.label;return(0,u.tZ)(m.Select.Option,{value:t,children:r},t)}))})})},yi=[{value:5,label:(0,u.tZ)(b.Z,{id:"Mc6Dhy",defaultMessage:"5"})},{value:10,label:(0,u.tZ)(b.Z,{id:"2K8tsp",defaultMessage:"10"})},{value:20,label:(0,u.tZ)(b.Z,{id:"zwO8+l",defaultMessage:"20"})}],xi={selectFull:{width:"100%"}},Ci=e=>{let{state:t,onStateChange:r,metricKeyList:a}=e;const i=(0,n.useCallback)((e=>{r((t=>({...t,metricKey:e})))}),[r]),s=(0,n.useCallback)((e=>{r((t=>({...t,runsCountToCompare:e})))}),[r]);(0,n.useEffect)((()=>{!t.metricKey&&null!==a&&void 0!==a&&a[0]&&i(a[0])}),[t.metricKey,i,a]);const l=0===a.length;return(0,u.BX)(u.HY,{children:[(0,u.tZ)(gi,{title:"Metric",children:(0,u.tZ)(m.Select,{css:bi.selectFull,value:l?"No metrics available":t.metricKey,onChange:i,disabled:l,children:a.map((e=>(0,u.tZ)(m.Select.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))})}),(0,u.tZ)(fi,{value:t.runsCountToCompare,onChange:s,options:yi})]})},bi={selectFull:{width:"100%"}},Zi=e=>{let{state:t,onStateChange:r,metricKeyList:a,paramKeyList:i}=e;const s=(0,n.useCallback)((e=>{r((t=>({...t,selectedParams:e})))}),[r]),l=(0,n.useCallback)((e=>{r((t=>({...t,selectedMetrics:e})))}),[r]),o=0===a.length,c=0===i.length;return(0,u.BX)(u.HY,{children:[(0,u.tZ)(gi,{title:"Params",children:(0,u.tZ)(m.Select,{mode:c?void 0:"multiple",onChange:s,style:{width:300},value:c?"No parameters available":t.selectedParams,disabled:c,children:i.map((e=>(0,u.tZ)(m.Select.Option,{value:e,children:e})))})}),(0,u.tZ)(gi,{title:"Metrics",children:(0,u.tZ)(m.Select,{mode:o?void 0:"multiple",onChange:l,style:{width:300},value:o?"No metrics available":t.selectedMetrics,disabled:o,children:a.map((e=>(0,u.tZ)(m.Select.Option,{value:e,children:e})))})})]})},Ri=e=>{let{state:t,onStateChange:r,metricKeyList:a}=e;const i=(0,n.useCallback)((e=>{r((t=>({...t,metricKey:e})))}),[r]),s=(0,n.useCallback)((e=>{r((t=>({...t,xAxisKey:e})))}),[r]),l=(0,n.useCallback)((e=>r((t=>({...t,scaleType:e?"log":"linear"})))),[r]),o=(0,n.useCallback)((e=>{r((t=>({...t,runsCountToCompare:e})))}),[r]);(0,n.useEffect)((()=>{!t.metricKey&&null!==a&&void 0!==a&&a[0]&&i(a[0])}),[t.metricKey,i,a]);const c=0===a.length;return(0,u.BX)(u.HY,{children:[(0,u.tZ)(gi,{title:"Metric (Y-axis)",children:(0,u.tZ)(m.Select,{css:Si.selectFull,value:c?"No metrics available":t.metricKey,onChange:i,disabled:c,children:a.map((e=>(0,u.tZ)(m.Select.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))})}),(0,u.tZ)(gi,{title:"X-axis",children:(0,u.BX)(m.Y8K.Group,{value:t.xAxisKey,onChange:e=>{let{target:{value:t}}=e;return s(t)},children:[(0,u.tZ)(m.Y8K,{value:"step",children:"Step"}),(0,u.BX)(m.Y8K,{value:"time",children:["Time (wall)",(0,u.BX)(m.ua7,{title:(0,u.tZ)(b.Z,{id:"nlXn2G",defaultMessage:"Absolute date and time"}),placement:"right",children:[" ",(0,u.tZ)(m.AMp,{css:Si.timeStepQuestionMarkIcon})]})]}),(0,u.BX)(m.Y8K,{value:"time-relative",children:["Time (relative)",(0,u.BX)(m.ua7,{title:(0,u.tZ)(b.Z,{id:"NwNrl4",defaultMessage:"Amount of time that has passed since the first metric value was logged"}),placement:"right",children:[" ",(0,u.tZ)(m.AMp,{css:Si.timeStepQuestionMarkIcon})]})]})]})}),(0,u.tZ)(gi,{title:"Y-axis log scale",children:(0,u.tZ)(m.rsf,{checked:"log"===t.scaleType,onChange:l,label:"Enabled"})}),(0,u.tZ)(fi,{value:t.runsCountToCompare,onChange:o,options:[5,10,20]})]})},Si={selectFull:{width:"100%"},timeStepQuestionMarkIcon:()=>({svg:{width:12,height:12}})},Ei=(e,t,r)=>{const a=d(),[s,l]=(0,n.useState)(null),[o,c]=(0,n.useState)({}),u=(0,n.useCallback)(((e,t,r)=>{c((n=>{const a={...n};for(const i of e){a[`${i}-${t}`]=r}return a}))}),[c]),p=(0,n.useCallback)(((e,t)=>u(e,t,!0)),[u]),h=(0,n.useCallback)(((e,t)=>u(e,t,!1)),[u]),m=(0,n.useMemo)((()=>{const r=t.map((e=>e.runInfo.run_uuid));for(const t of r)for(const r of e){if(o[`${t}-${r}`])return!0}return!1}),[e,o,t]);return(0,n.useEffect)((()=>{if(e.length)for(const n of e){if(!n)continue;const e=t.map((e=>e.runInfo.run_uuid)).filter((e=>{var t;const a=Boolean(null===(t=r[e])||void 0===t?void 0:t[n]),i=o[`${e}-${n}`];return!a&&!i}));e.length&&(p(e,n),a((0,i.zL)(e,n)).then((()=>{h(e,n)})).catch((e=>{l(e)})))}}),[p,r,a,h,e,o,t]),{isLoading:m,error:s}},wi=(0,c.$j)((e=>{let{entities:{metricsByRunUuid:t}}=e;return{metricsByRunUuid:t}}),void 0,void 0,{areStatesEqual:(e,t)=>e.entities.metricsByRunUuid===t.entities.metricsByRunUuid})((e=>{let{previewData:t,cardConfig:r,metricsByRunUuid:a}=e;const i=(0,n.useMemo)((()=>[r.metricKey]),[r.metricKey]),{isLoading:s,error:l}=Ei(i,t,a),o=(0,n.useMemo)((()=>t.map((e=>({...e,metricsHistory:a[e.runInfo.run_uuid]})))),[t,a]),{resetTooltip:c,setTooltip:d}=wa(r);return s?(0,u.tZ)(m.OdW,{}):l?(0,u.tZ)(u.HY,{children:"Error occured!"}):(0,u.tZ)(ci,{runsData:o,metricKey:r.metricKey,scaleType:r.scaleType,xAxisKey:r.xAxisKey,useDefaultHoverBox:!1,onHover:d,onUnhover:c})}));var ki={name:"1vcob1d",styles:"display:flex;justify-content:center;align-items:center"};const Ti=e=>{let{state:t,onStateChange:r,metricKeyList:i,paramKeyList:s}=e;const{formatMessage:l}=(0,a.Z)(),o=(0,n.useCallback)(((e,t)=>{const n=ze(e,"METRIC")?"METRIC":"PARAM",a=$e(e,n);r((e=>({...e,[t]:{key:a,type:n}})))}),[r]),c=(0,n.useCallback)((e=>{r((t=>({...t,runsCountToCompare:e})))}),[r]);return(0,n.useEffect)((()=>{var e,r,n;const a=null===i||void 0===i?void 0:i[0],l=null===s||void 0===s?void 0:s[0];null!==(e=t.xaxis)&&void 0!==e&&e.key||(a?o(Ve("METRIC",a),"xaxis"):l&&o(Ve("PARAM",l),"xaxis")),null!==(r=t.yaxis)&&void 0!==r&&r.key||(a?o(Ve("METRIC",a),"yaxis"):l&&o(Ve("PARAM",l),"yaxis")),null!==(n=t.zaxis)&&void 0!==n&&n.key||(a?o(Ve("METRIC",a),"zaxis"):l&&o(Ve("PARAM",l),"zaxis"))}),[t.xaxis,t.yaxis,t.zaxis,o,i,s]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(gi,{title:l({id:"2Us2jl",defaultMessage:"X axis"}),children:(0,u.tZ)(vi,{value:t.xaxis.key?Ve(t.xaxis.type,t.xaxis.key):"",onChange:e=>{o(e,"xaxis")},paramKeyList:s,metricKeyList:i})}),(0,u.tZ)(gi,{title:l({id:"8YmId5",defaultMessage:"Y axis"}),children:(0,u.tZ)(vi,{value:t.yaxis.key?Ve(t.yaxis.type,t.yaxis.key):"",onChange:e=>{o(e,"yaxis")},paramKeyList:s,metricKeyList:i})}),(0,u.tZ)(gi,{title:l({id:"cB0/61",defaultMessage:"Z axis"}),children:(0,u.tZ)(vi,{value:t.zaxis.key?Ve(t.zaxis.type,t.zaxis.key):"",onChange:e=>{o(e,"zaxis")},paramKeyList:s,metricKeyList:i})}),(0,u.tZ)(fi,{value:t.runsCountToCompare,onChange:c,options:[5,10,20]})]})},Bi=yi;Bi.push({value:100,label:(0,u.tZ)(b.Z,{id:"Bbm59f",defaultMessage:"100"})},{value:250,label:(0,u.tZ)(b.Z,{id:"W8bOkn",defaultMessage:"250"})},{value:500,label:(0,u.tZ)(b.Z,{id:"Bnruyp",defaultMessage:"500"})});const Mi=e=>{let{state:t,onStateChange:r,metricKeyList:i,paramKeyList:s}=e;const{formatMessage:l}=(0,a.Z)(),o=(0,n.useCallback)(((e,t)=>{const n=ze(e,"METRIC")?"METRIC":"PARAM",a=$e(e,n);r((e=>({...e,[t]:{key:a,type:n}})))}),[r]),c=(0,n.useCallback)((e=>{r((t=>({...t,runsCountToCompare:e})))}),[r]);return(0,n.useEffect)((()=>{var e,r;const n=null===i||void 0===i?void 0:i[0],a=null===s||void 0===s?void 0:s[0];null!==(e=t.xaxis)&&void 0!==e&&e.key||(n?o(Ve("METRIC",n),"xaxis"):a&&o(Ve("PARAM",a),"xaxis")),null!==(r=t.yaxis)&&void 0!==r&&r.key||(n?o(Ve("METRIC",n),"yaxis"):a&&o(Ve("PARAM",a),"yaxis"))}),[t.xaxis,t.yaxis,o,i,s]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(gi,{title:l({id:"vBKFgp",defaultMessage:"X axis"}),children:(0,u.tZ)(vi,{value:t.xaxis.key?Ve(t.xaxis.type,t.xaxis.key):"",onChange:e=>{o(e,"xaxis")},paramKeyList:s,metricKeyList:i})}),(0,u.tZ)(gi,{title:l({id:"DaF+KK",defaultMessage:"Y axis"}),children:(0,u.tZ)(vi,{value:t.yaxis.key?Ve(t.yaxis.type,t.yaxis.key):"",onChange:e=>{o(e,"yaxis")},paramKeyList:s,metricKeyList:i})}),(0,u.tZ)(fi,{value:t.runsCountToCompare,onChange:c,options:Bi})]})},Ii=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if("number"===typeof e)return e.toFixed(t);const r=Number(e);return isNaN(r)?(0,ya.aS)(e,8):r.toFixed(t)},Ai=e=>{let{activeRun:t,cardConfig:r,isHovering:n,xAxisValues:a}=e;return r.type===xn.BAR?((e,t)=>{const{metricKey:r}=e,n=null===t||void 0===t?void 0:t.metrics[r];return n?(0,u.BX)("div",{css:Di.value,children:[(0,u.BX)("strong",{children:[n.key,":"]})," ",Ii(n.value)]}):null})(r,t):r.type===xn.SCATTER?((e,t)=>{var r,n,a,i;const{xaxis:s,yaxis:l}=e,o=s.key,c=l.key,d="METRIC"===s.type?null===(r=t.metrics[o])||void 0===r?void 0:r.value:null===(n=t.params[o])||void 0===n?void 0:n.value,p="METRIC"===l.type?null===(a=t.metrics[c])||void 0===a?void 0:a.value:null===(i=t.params[c])||void 0===i?void 0:i.value;return(0,u.BX)(u.HY,{children:[d&&(0,u.BX)("div",{css:Di.value,children:[(0,u.BX)("strong",{children:["X (",o,"):"]})," ",Ii(d)]}),p&&(0,u.BX)("div",{css:Di.value,children:[(0,u.BX)("strong",{children:["Y (",c,"):"]})," ",Ii(p)]})]})})(r,t):r.type===xn.CONTOUR?((e,t)=>{var r,n,a,i,s,l;const{xaxis:o,yaxis:c,zaxis:d}=e,p=o.key,h=c.key,m=d.key,g="METRIC"===o.type?null===(r=t.metrics[p])||void 0===r?void 0:r.value:null===(n=t.params[p])||void 0===n?void 0:n.value,v="METRIC"===c.type?null===(a=t.metrics[h])||void 0===a?void 0:a.value:null===(i=t.params[h])||void 0===i?void 0:i.value,f="METRIC"===d.type?null===(s=t.metrics[m])||void 0===s?void 0:s.value:null===(l=t.params[m])||void 0===l?void 0:l.value;return(0,u.BX)(u.HY,{children:[g&&(0,u.BX)("div",{css:Di.value,children:[(0,u.BX)("strong",{children:["X (",p,"):"]})," ",Ii(g)]}),v&&(0,u.BX)("div",{css:Di.value,children:[(0,u.BX)("strong",{children:["Y (",h,"):"]})," ",Ii(v)]}),f&&(0,u.BX)("div",{css:Di.value,children:[(0,u.BX)("strong",{children:["Z (",m,"):"]})," ",Ii(f)]})]})})(r,t):r.type===xn.LINE?((e,t,r)=>{var n,a,i;const{metricKey:s}=e,l=null!==(n=r&&(null===t||void 0===t||null===(a=t.metricsHistory)||void 0===a||null===(i=a[s])||void 0===i?void 0:i[null===r||void 0===r?void 0:r.index]))&&void 0!==n?n:null===t||void 0===t?void 0:t.metrics[s];return l?(0,u.BX)(u.HY,{children:[r&&(0,u.BX)("div",{css:Di.value,children:[(0,u.BX)("strong",{children:[r.label,":"]})," ",r.value]}),(0,u.BX)("div",{css:Di.value,children:[(0,u.BX)("strong",{children:[l.key,":"]})," ",Ii(l.value)]})]}):null})(r,t,a):r.type===xn.PARALLEL?((e,t,r)=>{const{selectedParams:n,selectedMetrics:a}=e,i=n.map((e=>{const r=null===t||void 0===t?void 0:t.params[e];return!r||(0,u.BX)("div",{children:[(0,u.BX)("strong",{children:[r.key,":"]})," ",Ii(r.value)]})})),s=a.map((e=>{const r=null===t||void 0===t?void 0:t.metrics[e];return!r||(0,u.BX)("div",{children:[(0,u.BX)("strong",{children:[r.key,":"]})," ",Ii(r.value)]})}));return r?(0,u.BX)(u.HY,{children:[i.slice(0,3),s[s.length-1],(i.length>3||s.length>1)&&(0,u.tZ)("div",{children:"..."})]}):(0,u.BX)(u.HY,{children:[i,s]})})(r,t,n):null},Li=e=>{let{closeContextMenu:t,contextData:r,additionalAxisData:n,hoverData:a,runUuid:i,isHovering:s}=e;const{runs:l,onTogglePin:o,onHideRun:c}=r,[d]=mt(),p=null===l||void 0===l?void 0:l.find((e=>e.runInfo.run_uuid===i));return p?(0,u.BX)("div",{children:[(0,u.BX)("div",{css:Di.contentWrapper,children:[(0,u.BX)("div",{css:Di.header,children:[(0,u.tZ)("div",{css:Di.colorPill,style:{backgroundColor:p.color}}),(0,u.tZ)(re.rU,{to:ne.Z.getRunPageRoute(d,i),target:"_blank",css:Di.runLink,onClick:t,children:p.runInfo.run_name||p.runInfo.run_uuid})]}),!s&&(0,u.tZ)(x.B,{size:"small",onClick:t,icon:(0,u.tZ)(x.C,{})})]}),(0,u.tZ)(Ai,{isHovering:s,activeRun:p,cardConfig:a,xAxisValues:n}),(0,u.BX)("div",{css:Di.actionsWrapper,children:[p.pinnable&&o&&(0,u.tZ)(m.ua7,{title:p.pinned?(0,u.tZ)(b.Z,{id:"ugm2f6",defaultMessage:"Unpin run"}):(0,u.tZ)(b.Z,{id:"58xhem",defaultMessage:"Click to pin the run"}),placement:"bottom",children:(0,u.tZ)(x.B,{size:"small",onClick:()=>{o(i),t()},icon:p.pinned?(0,u.tZ)(m.D$V,{}):(0,u.tZ)(m.qQX,{})})}),c&&(0,u.tZ)(m.ua7,{title:(0,u.tZ)(b.Z,{id:"eE5VIF",defaultMessage:"Click to hide the run"}),placement:"bottom",children:(0,u.tZ)(x.B,{"data-testid":"experiment-view-compare-runs-tooltip-visibility-button",size:"small",onClick:()=>{c(i),t()},icon:(0,u.tZ)(m.bMb,{})})})]})]}):null},Di={runLink:e=>({color:e.colors.primary,"&:hover":{}}),actionsWrapper:{marginTop:8,display:"flex",gap:8,alignItems:"center"},header:{display:"flex",gap:8,alignItems:"center"},value:{maxWidth:300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},contentWrapper:{display:"flex",gap:8,alignItems:"center",marginBottom:12,justifyContent:"space-between",height:24},colorPill:{width:12,height:12,borderRadius:"100%"}};const Ni={[xn.BAR]:e=>{let{previewData:t,cardConfig:r}=e;const{resetTooltip:n,setTooltip:a}=wa(r);return(0,u.tZ)(Ca,{useDefaultHoverBox:!1,displayRunNames:!1,displayMetricKey:!1,metricKey:r.metricKey,runsData:t,margin:Ia,onHover:a,onUnhover:n})},[xn.CONTOUR]:e=>{let{previewData:t,cardConfig:r}=e;const{resetTooltip:n,setTooltip:a}=wa(r);return(0,u.tZ)(ai,{xAxis:r.xaxis,yAxis:r.yaxis,zAxis:r.zaxis,runsData:t,onHover:a,onUnhover:n,useDefaultHoverBox:!1})},[xn.LINE]:wi,[xn.PARALLEL]:e=>{var t,r;let{previewData:n,cardConfig:a}=e;const i=((null===(t=a.selectedParams)||void 0===t?void 0:t.length)||0)+((null===(r=a.selectedMetrics)||void 0===r?void 0:r.length)||0)>=2,{setTooltip:s,resetTooltip:l}=wa(a),o=i?_a(n,a.selectedParams,a.selectedMetrics):[];return i?o.length?(0,u.tZ)(Ka,{selectedMetrics:a.selectedMetrics,selectedParams:a.selectedParams,data:o,axesRotateThreshold:6,onHover:s,onUnhover:l}):null:(0,u.tZ)("div",{css:ki,children:"Select at least two metrics and params first"})},[xn.SCATTER]:e=>{let{previewData:t,cardConfig:r}=e;const{resetTooltip:n,setTooltip:a}=wa(r);return(0,u.tZ)(Qa,{xAxis:r.xaxis,yAxis:r.yaxis,runsData:t,onHover:a,onUnhover:n,useDefaultHoverBox:!1})}};var Oi={name:"1uahl7",styles:"width:1280px"},Hi={name:"1d3w5wq",styles:"width:100%"};const Pi=e=>{let{onCancel:t,onSubmit:r,config:i,chartRunData:s,metricKeyList:l,paramKeyList:o}=e;const[c,d]=(0,n.useState)(i),p=Boolean(c.uuid),h=(0,n.useCallback)((e=>{if(!e)return;const t=Cn.getEmptyChartCardByType(e);t&&d(t)}),[]),g=(0,n.useMemo)((()=>s.slice(0,c.runsCountToCompare).reverse()),[s,c.runsCountToCompare]),{formatMessage:v}=(0,a.Z)();return(0,u.tZ)(m.u_l,{visible:!0,onCancel:t,onOk:()=>r(c),title:v(p?{id:"kBXHTA",defaultMessage:"Edit chart"}:{id:"6y36Fr",defaultMessage:"Add new chart"}),okButtonProps:{"data-testid":"experiment-view-compare-runs-chart-modal-confirm"},cancelText:v({id:"TlVXcS",defaultMessage:"Cancel"}),okText:v(p?{id:"vPnoNk",defaultMessage:"Save changes"}:{id:"UzZf+2",defaultMessage:"Add chart"}),size:"wide",css:Oi,children:(0,u.BX)("div",{css:Ui.wrapper,children:[(0,u.BX)("div",{children:[!p&&(0,u.tZ)(gi,{title:"Type",children:(0,u.BX)(m.Select,{css:Hi,value:c.type,onChange:h,children:[(0,u.tZ)(m.Select.Option,{value:xn.BAR,children:(0,u.BX)("div",{css:Ui.chartTypeOption,children:[(0,u.tZ)(Ln,{}),"Bar chart"]})}),(0,u.tZ)(m.Select.Option,{value:xn.SCATTER,children:(0,u.BX)("div",{css:Ui.chartTypeOption,children:[(0,u.tZ)(oa,{}),"Scatter chart"]})}),(0,u.tZ)(m.Select.Option,{value:xn.LINE,children:(0,u.BX)("div",{css:Ui.chartTypeOption,children:[(0,u.tZ)(Fn,{}),"Line chart"]})}),(0,u.tZ)(m.Select.Option,{value:xn.PARALLEL,children:(0,u.BX)("div",{css:Ui.chartTypeOption,children:[(0,u.tZ)(Jn,{}),"Parallel coordinates"]})}),(0,u.tZ)(m.Select.Option,{value:xn.CONTOUR,children:(0,u.BX)("div",{css:Ui.chartTypeOption,children:[(0,u.tZ)(Un,{}),"Contour chart"]})})]})}),(f=c.type,f===xn.BAR?(0,u.tZ)(Ci,{metricKeyList:l,state:c,onStateChange:d}):f===xn.CONTOUR?(0,u.tZ)(Ti,{metricKeyList:l,paramKeyList:o,state:c,onStateChange:d}):f===xn.LINE?(0,u.tZ)(Ri,{metricKeyList:l,state:c,onStateChange:d}):f===xn.PARALLEL?(0,u.tZ)(Zi,{metricKeyList:l,paramKeyList:o,state:c,onStateChange:d}):f===xn.SCATTER?(0,u.tZ)(Mi,{metricKeyList:l,paramKeyList:o,state:c,onStateChange:d}):null)]}),(0,u.tZ)(Ea,{contextData:{runs:s},component:Li,hoverOnly:!0,children:(0,u.tZ)("div",{css:Ui.chartWrapper,children:(e=>{if(!e)return null;const t=Ni[e];return t?(0,u.tZ)(t,{previewData:g,cardConfig:c}):null})(c.type)})})]})});var f},Ui={chartTypeOption:e=>({display:"grid",gridTemplateColumns:`${e.general.iconSize+e.spacing.xs}px 1fr`,gap:e.spacing.xs,alignItems:"center"}),wrapper:{display:"grid",gridTemplateColumns:"300px 1fr",gap:32},field:{display:"grid",gridTemplateColumns:"80px 1fr",marginBottom:16},chartWrapper:{height:400}},Xi={controlsWrapper:e=>({marginBottom:e.spacing.md,display:"flex",justifyContent:"flex-end"}),wrapper:e=>({marginLeft:-1,position:"relative",backgroundColor:e.colors.backgroundSecondary,padding:e.spacing.md,borderLeft:`1px solid ${e.colors.border}`,zIndex:1,overflowY:"auto"})},Wi=(0,c.$j)((e=>{let{entities:t}=e;const{paramsByRunUuid:r,latestMetricsByRunUuid:n,metricsByRunUuid:a}=t;return{paramsByRunUuid:r,latestMetricsByRunUuid:n,metricsByRunUuid:a}}),void 0,void 0,{areStatesEqual:(e,t)=>e.entities===t.entities})((e=>{let{comparedRuns:t,isLoading:r,searchFacetsState:a,updateSearchFacets:i,latestMetricsByRunUuid:s,metricsByRunUuid:o,paramsByRunUuid:c,metricKeyList:d,paramKeyList:p,experimentTags:h}=e;const[g,v]=(0,n.useState)(!1),[f,y]=(0,n.useState)(null),x=(0,n.useCallback)((e=>{y(Cn.getEmptyChartCardByType(e))}),[]),C=(0,n.useCallback)((e=>{y(e)}),[]);(0,n.useEffect)((()=>{g||r||v(!0)}),[g,r]);const b=(0,n.useMemo)((()=>{const e=h[j.uN],t=h[j.JG];return(null===e||void 0===e?void 0:e.value)||(null===t||void 0===t?void 0:t.value)||d[0]||""}),[h,d]);(0,n.useEffect)((()=>{a.compareRunCharts||i((e=>({...e,compareRunCharts:Cn.getBaseChartConfigs(b)})),{replaceHistory:!0})}),[a.compareRunCharts,b,i]);const Z=(0,n.useCallback)((e=>{i((t=>({...t,runsPinned:t.runsPinned.includes(e)?t.runsPinned.filter((t=>t!==e)):[...t.runsPinned,e]})))}),[i]),R=(0,n.useCallback)((e=>{i((t=>({...t,runsHidden:[...t.runsHidden,e]})))}),[i]),S=(0,n.useMemo)((()=>t.filter((e=>!e.hidden)).map((e=>({runInfo:e.runInfo,metrics:s[e.runUuid]||{},params:c[e.runUuid]||{},color:e.color,pinned:e.pinned,pinnable:e.pinnable,metricsHistory:{}})))),[t,s,c]),{isLoading:E,chartRunDataWithHistory:w}=((e,t,r)=>{const a=(0,n.useMemo)((()=>e.filter((e=>e.type===xn.LINE))),[e]),i=(0,n.useMemo)((()=>{if(!a.length)return[];const e=(0,l.max)(a.map((e=>e.runsCountToCompare||10)));return t.slice(0,e)}),[a,t]),s=(0,n.useMemo)((()=>Array.from(new Set(a.map((e=>e.metricKey))))),[a]),{isLoading:o}=Ei(s,i,r);return{isLoading:o,chartRunDataWithHistory:(0,n.useMemo)((()=>i.length?t.map((e=>({...e,metricsHistory:r[e.runInfo.run_uuid]||void 0}))):t),[i,r,t])}})(a.compareRunCharts||[],S,o),k=(0,n.useMemo)((()=>({runs:w,onTogglePin:Z,onHideRun:R})),[w,R,Z]);return g?(0,u.BX)("div",{css:Xi.wrapper,"data-testid":"experiment-view-compare-runs-chart-area",children:[(0,u.tZ)("div",{css:Xi.controlsWrapper,children:(0,u.tZ)(ca,{onAddChart:x})}),(0,u.tZ)(Ea,{contextData:k,component:Li,children:(0,u.tZ)(hi,{chartRunData:w,cardsConfig:a.compareRunCharts||[],onStartEditChart:C,onRemoveChart:e=>{i((t=>{var r;return{...t,compareRunCharts:null===(r=t.compareRunCharts)||void 0===r?void 0:r.filter((t=>t.uuid!==e.uuid))}}))},isMetricHistoryLoading:E})}),f&&(0,u.tZ)(Pi,{chartRunData:w,metricKeyList:d,paramKeyList:p,config:f,onSubmit:e=>{const t=Cn.serialize({...e,uuid:(0,yn.Fs)()});e.uuid?i((r=>{var n;return{...r,compareRunCharts:null===(n=r.compareRunCharts)||void 0===n?void 0:n.map((r=>r.uuid===e.uuid?t:r))}})):i((e=>({...e,compareRunCharts:e.compareRunCharts&&[...e.compareRunCharts,t]}))),y(null)},onCancel:()=>y(null)})]}):(0,u.tZ)("div",{css:Xi.wrapper,children:(0,u.tZ)(m.OdW,{})})})),_i="FETCHED_RUN_NOTIFICATION_KEY",Ki=e=>{const{formatMessage:t}=(0,a.Z)(),r=(0,n.useCallback)(((e,r)=>e===r?t({id:"KJbYrw",defaultMessage:"Loaded {childRuns} child {childRuns, plural, =1 {run} other {runs}}"},{childRuns:r}):t({id:"ziIhFQ",defaultMessage:"Loaded {allRuns} {allRuns, plural, =1 {run} other {runs}}, including {childRuns} child {childRuns, plural, =1 {run} other {runs}}"},{allRuns:e,childRuns:r})),[t]);return(0,n.useCallback)(((t,n)=>{if(Array.isArray(t)){const{allRuns:a,childRuns:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=e.filter((e=>!t.some((t=>t.run_uuid===e.info.run_uuid)))),n=r.filter((e=>{var t;const r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.tags;return Array.isArray(r)&&r.some((e=>e.key===ke&&Boolean(e.value)))}));return{allRuns:r.length,childRuns:n.length}}(t,n);if(i<1)return;e.close(_i),e.info({message:r(a,i),duration:3,placement:"bottomRight",key:_i})}}),[e,r])};var Fi=r(69677);const Vi=e=>{var t,r;return(null===(t=e.tags)||void 0===t||null===(r=t[j.kt])||void 0===r?void 0:r.value)===j.Bj},zi=()=>(0,Ue.GW)()?110:75;var $i={name:"1gylber",styles:"flex:1 0;padding:0 8px;display:flex;align-items:center"};const ji=e=>{let{run:t}=e;const{theme:r}=(0,x.u)(),n=(e=>{const{models:{loggedModels:t,registeredModels:r},experimentId:n,runUuid:a}=e,i=s.default.mergeLoggedAndRegisteredModels(t,r),[l]=i||[];if(l){if(l.registeredModelName){const{registeredModelName:e,registeredModelVersion:t}=l;return{displayName:`${e}/${t}`,link:(0,ce.u5)(e,t)}}if(l.flavors)return{displayName:l.flavors?l.flavors[0]:(0,u.tZ)(b.Z,{id:"wzWTcB",defaultMessage:"Model"}),link:`${ne.Z.getRunPageRoute(n,a)}/artifactPath/${l.artifactPath}`}}return null})(t);return(0,u.BX)("div",{css:$i,children:[(0,u.tZ)(m.lHH,{css:(0,f.iv)({marginRight:r.spacing.xs,color:r.colors.textSecondary},"")}),n?(0,u.tZ)(re.rU,{target:"_blank",to:n.link,css:(0,f.iv)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:r.typography.fontSizeMd},""),children:n.displayName}):(0,u.tZ)(x.T.Text,{size:"md",color:"info",children:(0,u.tZ)(b.Z,{id:"9n/J7X",defaultMessage:"No models"})})]})};var Yi=r(7118);var qi={name:"1iwgvlm",styles:"flex-shrink:1;flex-grow:1;overflow:hidden"},Gi={name:"1kd7iwj",styles:"flex-shrink:0;flex-grow:1;display:flex;align-items:flex-end"};const Ji=e=>{var t;let{run:r,onDatasetSelected:a}=e;const{theme:i}=(0,x.u)(),s=(0,n.useCallback)((e=>a(e,r)),[a,r]);return(0,u.tZ)("div",{css:(0,f.iv)({flex:"1 0",padding:"0 8px",display:"flex",alignItems:"center",gap:i.spacing.xs,overflow:"hidden"},""),children:(null===(t=r.datasets)||void 0===t?void 0:t.length)>0?(0,u.BX)(u.HY,{children:[(0,u.tZ)("div",{css:qi,children:(0,u.tZ)(x.B,{type:"link",onClick:()=>s(r.datasets[0]),children:(0,u.tZ)(Yi.O,{datasetWithTags:r.datasets[0],displayTextAsLink:!0})})}),r.datasets.length>1&&(0,u.tZ)("div",{css:Gi,children:(0,u.BX)(m.J2e.Root,{modal:!1,children:[(0,u.tZ)(m.J2e.Trigger,{asChild:!0,children:(0,u.tZ)(x.B,{size:"small",style:{borderRadius:"8px",width:"40px"},children:(0,u.BX)(x.T.Text,{color:"secondary",children:["+",r.datasets.length-1]})})}),(0,u.tZ)(m.J2e.Content,{align:"start",children:r.datasets.slice(1).map((e=>(0,u.tZ)("div",{css:(0,f.iv)({height:i.general.heightSm,display:"flex",alignItems:"center"},""),children:(0,u.tZ)(x.B,{type:"link",onClick:()=>s(e),children:(0,u.tZ)(Yi.O,{datasetWithTags:e,displayTextAsLink:!0})})},`${e.dataset.name}-${e.dataset.digest}`)))})]})})]}):(0,u.BX)(x.T.Text,{size:"md",color:"info",children:[(0,u.tZ)(m.$eq,{css:(0,f.iv)({marginRight:i.spacing.xs,color:i.colors.textSecondary},"")}),(0,u.tZ)(b.Z,{id:"xxXN3L",defaultMessage:"No datasets recorded"})]})})},Qi=e=>{let{run:t,onHideRun:r,onDatasetSelected:n}=e;const{theme:a}=(0,x.u)();return(0,u.BX)("div",{css:(0,f.iv)({height:zi(),width:"100%",display:"flex",flexDirection:"column",borderBottom:`1px solid ${a.colors.borderDecorative}`},""),children:[(0,u.BX)("div",{css:(0,f.iv)({height:40,width:"100%",display:"flex",padding:a.spacing.sm,alignItems:"center",borderTop:`1px solid ${a.colors.borderDecorative}`,borderBottom:`1px solid ${a.colors.borderDecorative}`},""),children:[(0,u.BX)(re.rU,{css:(0,f.iv)({display:"flex",gap:a.spacing.sm,alignItems:"center"},""),to:ne.Z.getRunPageRoute(t.experimentId,t.runUuid),target:"_blank",children:[(0,u.tZ)("div",{css:(0,f.iv)({backgroundColor:t.color,width:12,height:12,borderRadius:6},"")}),t.runName]}),(0,u.tZ)("div",{css:(0,f.iv)({flexBasis:a.spacing.sm},"")}),(0,u.tZ)(x.B,{onClick:()=>r(t.runUuid),size:"small",icon:(0,u.tZ)(m.bMb,{})})]}),(0,u.BX)("div",{css:(0,f.iv)({flex:1,paddingTop:a.spacing.xs,paddingBottom:a.spacing.xs,display:"flex",flexDirection:"column"},""),children:[(0,Ue.GW)()&&(0,u.tZ)(Ji,{run:t,onDatasetSelected:n}),(0,u.tZ)(ji,{run:t})]})]})};const es=n.memo((e=>{let{text:t,highlight:r}=e;const{theme:a}=(0,x.u)();if(!r)return(0,u.tZ)(u.HY,{children:t});const i=t.split(new RegExp(`(${r})`,"gi"));return(0,u.tZ)(u.HY,{children:i.map(((e,t)=>(0,u.tZ)(n.Fragment,{children:e.toLowerCase()===r.toLowerCase()?(0,u.tZ)("span",{css:(0,f.iv)({backgroundColor:a.colors.yellow200},""),children:e}):e},t)))})}));var ts={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"},rs={name:"14fssfp",styles:"display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:9"};const ns=e=>{let{value:t,context:r,highlightEnabled:n}=e;const{theme:a}=(0,x.u)();return(0,u.tZ)("div",{css:(0,f.iv)({height:"100%",whiteSpace:"normal",padding:a.spacing.sm,overflow:"hidden",position:"relative",cursor:"pointer","&:hover":{backgroundColor:a.colors.actionDefaultBackgroundHover}},""),children:t?(0,u.tZ)("span",{css:rs,children:n&&r.highlightedText?(0,u.tZ)(es,{text:t,highlight:r.highlightedText}):t.substring(0,512)}):(0,u.tZ)(x.T.Text,{color:"info",css:ts,children:(0,u.tZ)(b.Z,{id:"aQxQIF",defaultMessage:"(empty)"})})})};var as={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"};const is=e=>{let{displayName:t}=e;const{theme:r}=(0,x.u)();return(0,u.tZ)("div",{css:(0,f.iv)({height:zi(),width:"100%",borderBottom:`1px solid ${r.colors.borderDecorative}`},""),children:(0,u.tZ)("div",{css:(0,f.iv)({height:40,width:"100%",display:"flex",padding:r.spacing.sm,alignItems:"center",border:`1px solid ${r.colors.borderDecorative}`,borderLeft:"none",overflow:"hidden",whiteSpace:"nowrap"},""),children:(0,u.tZ)(m.ua7,{title:(0,l.truncate)(t,{length:250}),children:(0,u.tZ)(x.T.Text,{bold:!0,css:as,children:t})})})})};var ss={name:"3ytxc3",styles:"height:100%;overflow:hidden"};const ls=e=>{let{resultList:t,comparedRuns:r,groupByColumns:a,onCellClick:i,onHideRun:s,onDatasetSelected:l,highlightedText:o=""}=e;const[c,d]=(0,n.useState)([]);(0,n.useEffect)((()=>{const e=[];a.forEach((t=>{e.push({width:240,headerName:t,field:t,pinned:!0,suppressMovable:!0,cellRenderer:"TextRendererCellRenderer",cellRendererParams:{highlightEnabled:!0},headerComponent:"GroupHeaderCellRenderer",colId:t})}));for(const t of r)e.push({width:240,headerName:t.runName,colId:t.runUuid,field:t.runUuid,suppressMovable:!0,cellRenderer:"TextRendererCellRenderer",headerComponent:"RunHeaderCellRenderer",headerComponentParams:{run:t,onHideRun:s,onDatasetSelected:l}});d(e)}),[r,a,s,l]);const{theme:p}=(0,x.u)(),h=(0,n.useMemo)((()=>t.map((e=>{let{cellValues:t,key:r,groupByCellValues:n}=e;const a={key:r};return Object.entries(n).forEach((e=>{let[t,r]=e;a[t]=r})),Object.entries(t).forEach((e=>{let[t,r]=e;a[t]=r})),a}))),[t]);return(0,u.tZ)("div",{css:ss,children:(0,u.tZ)(zr,{css:os(p),context:{highlightedText:o},rowHeight:190,headerHeight:zi(),getRowId:e=>{let{data:t}=e;return t.key},suppressHorizontalScroll:!1,columnDefs:c,onCellClicked:e=>{let{value:t,colDef:r,column:n}=e;return null===i||void 0===i?void 0:i(t,r.headerName||n.getId())},rowData:h,components:{TextRendererCellRenderer:ns,GroupHeaderCellRenderer:is,RunHeaderCellRenderer:Qi}})})},os=e=>({".ag-header-row.ag-header-row-column":{"& > div":{borderBottom:`1px solid ${e.colors.borderDecorative}`}},".ag-row":{borderBottom:`1px solid ${e.colors.borderDecorative}`}});var cs={name:"1hetg88",styles:"max-width:300px"},ds={name:"1hetg88",styles:"max-width:300px"},us={name:"111arwn",styles:"width:300px;min-width:300px"},ps={name:"1hetg88",styles:"max-width:300px"},hs={name:"1hetg88",styles:"max-width:300px"},ms={name:"1hetg88",styles:"max-width:300px"},gs={name:"1hetg88",styles:"max-width:300px"};const vs=e=>{let{visibleRuns:t,updateSearchFacets:r,onDatasetSelected:s,viewState:o,updateViewState:d}=e;const p=(0,a.Z)(),{theme:h}=(0,x.u)(),g=t.slice(0,10),{selectedTables:v,groupByCols:y,outputColumn:C,intersectingOnly:Z,setSelectedTables:R,setGroupByCols:S,setOutputColumn:E,setIntersectingOnly:w}=((e,t)=>{const{artifactViewState:r={}}=e,[a,i]=(0,n.useState)(r.selectedTables||[]),[s,l]=(0,n.useState)(r.groupByCols||[]),[o,c]=(0,n.useState)(r.outputColumn||""),[d,u]=(0,n.useState)(r.intersectingOnly||!1);return(0,n.useEffect)((()=>t({artifactViewState:{selectedTables:a,groupByCols:s,outputColumn:o,intersectingOnly:d}})),[t,a,s,o,d]),{selectedTables:a,groupByCols:s,outputColumn:o,intersectingOnly:d,setSelectedTables:i,setGroupByCols:l,setOutputColumn:c,setIntersectingOnly:u}})(o,d),[k,T]=(0,n.useState)(!1),[B,M]=(0,n.useState)(""),[I,A]=(0,n.useState)(""),L=(0,c.I0)(),D=(0,n.useCallback)((e=>R((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))),[R]),N=(0,n.useCallback)((e=>S((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))),[S]),O=(0,n.useMemo)((()=>g.map((e=>{let{runUuid:t}=e;return t}))),[g]),H=(0,c.v9)((e=>{let{evaluationData:t}=e;return t.evaluationArtifactsByRunUuid})),{tables:P,tablesByRun:U}=(X=g,(0,n.useMemo)((()=>{const e=(0,l.fromPairs)(X.map((e=>{var t,r;const n=null===(t=e.tags)||void 0===t||null===(r=t[j.yg])||void 0===r?void 0:r.value,a=new Set;if(n)try{JSON.parse(n).filter((e=>{let{type:t}=e;return t===V.yK.TABLE})).forEach((e=>{let{path:t}=e;a.add(t)}))}catch(i){if(i instanceof SyntaxError)throw new SyntaxError(`The "${j.yg}" tag in "${e.runName}" run is malformed!`);throw i}return[e.runUuid,Array.from(a)]})).filter((e=>{let[,t]=e;return t.length>0}))),t=Array.from(new Set(Object.values(e).flat())),r=t.filter((t=>X.every((r=>{var n;let{runUuid:a}=r;return null===(n=e[a])||void 0===n?void 0:n.includes(t)}))));return{tables:t,tablesByRun:e,tablesIntersection:r}}),[X]));var X;const W=(0,c.v9)((e=>{let{evaluationData:t}=e;return O.some((e=>v.some((r=>{var n;return null===(n=t.evaluationArtifactsLoadingByRunUuid[e])||void 0===n?void 0:n[r]}))))})),{columns:_}=(K=H,F=O,z=v,(0,n.useMemo)((()=>{if(0===z.length||0===F.length)return{columns:[],columnsIntersection:[]};const e=F.map((e=>Object.values(K[e]||{}).filter((e=>{let{path:t}=e;return z.includes(t)})))).flat(),t=e.filter((e=>{let{path:t}=e;return z.includes(t)})).map((e=>{let{columns:t}=e;return t})).flat(),r=Array.from(new Set(t)),n=r.filter((t=>e.every((e=>{let{columns:r}=e;return r.includes(t)}))));return{columns:r,columnsIntersection:n}}),[F,K,z]));var K,F,z;const $=function(e,t,r,a,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(0,n.useMemo)((()=>{const n={},o={},c=t.map((t=>{const n=Object.values(e[t]||{}).filter((e=>{let{path:t}=e;return r.includes(t)})).map((e=>{let{entries:t}=e;return t})).flat();return[t,n]}));for(const[e,t]of c)for(const r of t){const t=a.map((e=>{var t;return[e,null===(t=r[e])||void 0===t?void 0:t.toString()]})),s=t.map((e=>{let[,t]=e;return t})).join(".");o[s]||(o[s]=(0,l.fromPairs)(t)),n[s]||(n[s]={});const c=n[s];var d;c&&(c[e]=(null===(d=r[i])||void 0===d?void 0:d.toString())||c[e])}const u=[];for(const[e,r]of Object.entries(o)){const a=n[e];(!s||t.every((e=>a[e])))&&u.push({key:e,groupByCellValues:r,cellValues:n[e]||{}})}return u}),[t,e,a,s,r,i])}(H,O,v,y,C,Z);(0,n.useEffect)((()=>{if(v.length)for(const e of g){if(!e)continue;const t=(U[e.runUuid]||[]).filter((e=>v.includes(e)));for(const r of t)L((0,i.h$)(e.runUuid,r,!1))}}),[g,L,v,U]);const Y=v.length>0,q=g.length>0,G=!W&&Y&&q,J=(0,n.useMemo)((()=>{if(!I.trim())return $;const e=new RegExp(I,"i");return $.filter((t=>{let{groupByCellValues:r}=t;return Object.values(r).some((t=>null===t||void 0===t?void 0:t.match(e)))}))}),[$,I]);(0,n.useEffect)((()=>{const e=y.length<1,t=y.some((e=>!_.includes(e))),r=_[0];(e||t)&&r&&S([r])}),[y,C,_,S]);const Q=(0,n.useMemo)((()=>_.filter((e=>!y.includes(e)))),[_,y]);(0,n.useEffect)((()=>{!y.includes(C)&&C||E(Q[0]||"")}),[y,C,Q,E]),(0,n.useEffect)((()=>{T(!0);const e=setTimeout((()=>A(B)),250);return()=>clearTimeout(e)}),[B]),(0,n.useEffect)((()=>{T(!1)}),[I]),(0,n.useEffect)((()=>{Q.includes(C)||E(Q[0]||"")}),[C,Q,E]),(0,n.useEffect)((()=>{v.some((e=>!P.includes(e)))&&R([])}),[v,P,R]),(0,n.useEffect)((()=>{w(!1)}),[g,w]);const[ee,te]=(0,n.useState)(null);return(0,u.BX)("div",{css:(0,f.iv)({borderTop:`1px solid ${h.colors.borderDecorative}`,height:"100%",display:"grid",gridTemplateColumns:o.previewPaneVisible?"1fr auto":"1fr",columnGap:h.spacing.sm,overflow:"hidden"},""),children:[(0,u.BX)("div",{css:(0,f.iv)({paddingLeft:h.spacing.sm,paddingTop:h.spacing.sm,height:"100%",display:"grid",gridTemplateRows:"auto auto 1fr",overflow:"hidden",rowGap:h.spacing.sm},""),children:[(0,u.BX)("div",{css:(0,f.iv)({display:"flex",alignItems:"center",gap:h.spacing.sm,overflow:"hidden",height:h.general.heightSm},""),children:[(0,u.BX)(m.M6x,{label:(0,u.tZ)(b.Z,{id:"syyEiR",defaultMessage:"Table"}),multiSelect:!0,value:v,children:[(0,u.tZ)(m.Aa0,{css:cs,"data-testid":"dropdown-tables",onClear:()=>R([])}),(0,u.tZ)(m.hJM,{css:ds,children:(0,u.tZ)(m.X_T,{children:P.map((e=>(0,u.tZ)(m.VKe,{value:e,onChange:D,checked:v.includes(e),"data-testid":"dropdown-tables-option",children:e},e)))})})]}),(0,u.tZ)(m.ua7,{title:(0,u.tZ)(b.Z,{id:"VZRc73",defaultMessage:"Using the list of logged table artifacts, select at least one to start comparing results."}),children:(0,u.tZ)(m.szr,{})})]}),W?(0,u.tZ)(m.OdW,{}):(0,u.BX)(u.HY,{children:[(0,u.BX)("div",{css:(0,f.iv)({display:"flex",columnGap:h.spacing.sm,alignItems:"center",overflow:"hidden",height:h.general.heightSm},""),children:[(0,u.tZ)(x.e,{prefix:(0,u.tZ)(m.W1M,{}),suffix:k&&(0,u.tZ)(m.$jN,{size:"small"}),css:us,onChange:e=>M(e.target.value),value:B,placeholder:p.formatMessage({id:"3D2Znf",defaultMessage:"Filter by {columnNames}"},{columnNames:y.join(", ")}),allowClear:!0,disabled:!G}),(0,u.BX)(m.M6x,{value:y,multiSelect:!0,label:(0,u.tZ)(b.Z,{id:"fWm1UC",defaultMessage:"Group by"}),children:[(0,u.tZ)(m.Aa0,{disabled:!G,allowClear:!1,showTagAfterValueCount:1,css:ps}),(0,u.tZ)(m.hJM,{css:hs,children:(0,u.tZ)(m.X_T,{children:_.map((e=>(0,u.tZ)(m.VKe,{value:e,onChange:N,checked:y.includes(e),children:e},e)))})})]}),(0,u.BX)(m.M6x,{value:[C],label:(0,u.tZ)(b.Z,{id:"ZqGzZd",defaultMessage:"Compare"}),children:[(0,u.tZ)(m.Aa0,{disabled:!G,allowClear:!1,css:ms}),(0,u.tZ)(m.hJM,{css:gs,children:(0,u.tZ)(m.X_T,{children:Q.map((e=>(0,u.tZ)(m.PC4,{value:e,onChange:()=>E(e),checked:C===e,children:e},e)))})})]}),!1]}),G?(0,u.tZ)("div",{css:(0,f.iv)({position:"relative",zIndex:1,overflowY:"hidden",height:"100%"},""),children:(0,u.tZ)(ls,{comparedRuns:g,groupByColumns:y,resultList:J,onCellClick:(e,t)=>{te({value:e,header:t}),d({previewPaneVisible:!0})},onHideRun:e=>r((t=>({...t,runsHidden:[...t.runsHidden,e]}))),onDatasetSelected:s,highlightedText:I.trim()})}):(0,u.tZ)("div",{css:(0,f.iv)({marginTop:h.spacing.lg},""),children:(0,u.tZ)(m.HYy,{title:q?(0,u.tZ)(b.Z,{id:"ZvJTXB",defaultMessage:"No tables selected"}):(0,u.tZ)(b.Z,{id:"BFzsMn",defaultMessage:"No runs selected"}),description:q?(0,u.tZ)(b.Z,{id:"18/UVG",defaultMessage:"Using controls above, select at least one artifact containing table."}):(0,u.tZ)(b.Z,{id:"nPWZsh",defaultMessage:"Make sure that at least one experiment run is visible and available to compare"})})})]})]}),o.previewPaneVisible&&(0,u.tZ)(cn,{content:null===ee||void 0===ee?void 0:ee.value,copyText:null===ee||void 0===ee?void 0:ee.value,headerText:null===ee||void 0===ee?void 0:ee.header,empty:(0,u.tZ)(m.HYy,{description:(0,u.tZ)(b.Z,{id:"lTngfr",defaultMessage:"Select a cell to display preview"})})})]})},fs=()=>{const e=new Date;return e.setMilliseconds(0),e},ys=n.memo((e=>{var t;const{experiments:r,runsData:a}=e,{searchFacetsState:i,updateSearchFacets:l,isLoadingRuns:o,loadMoreRuns:c,moreRunsAvailable:d,isPristine:p,requestError:h}=Ot(),[g,v]=(0,n.useState)([]),[f,y]=(0,n.useState)(new hn),{experiment_id:x}=r[0],C=wr(x),[b,Z]=(0,n.useState)(null!==(t="true"===C.getItem("expandRows"))&&void 0!==t&&t);(0,n.useEffect)((()=>{C.setItem("expandRows",b)}),[b]);const{paramKeyList:R,metricKeyList:S,tagsList:E,modelVersionsByRunUuid:w,paramsList:k,metricsList:T,runInfos:B,runUuidsMatchingFilter:M,datasetsList:I}=a,A=(0,n.useMemo)((()=>B.map(((e,t)=>({runInfo:e,params:k[t],metrics:T[t],tags:E[t],datasets:I[t]})))),[I,T,k,B,E]),{orderByKey:L,searchFilter:D,runsExpanded:N,runsPinned:O,compareRunsMode:H,runsHidden:P}=i,U=void 0!==H;((e,t,r,a,i)=>{(0,n.useEffect)((()=>{if(!r())return;const n=e.filter(Vi).map((e=>{let{runInfo:t}=e;return t.run_uuid})),s=t.filter((e=>{var t;let{runDateAndNestInfo:r,runUuid:a}=e;return r.hasExpander&&"undefined"===typeof i[a]&&(null===(t=r.childrenIds)||void 0===t?void 0:t.some((e=>n.includes(e))))})).map((e=>{let{runUuid:t}=e;return t}));s.length&&a((e=>({...e,runsExpanded:s.reduce(((e,t)=>({...e,[t]:!0})),e.runsExpanded)})),{preservePristine:!0,replaceHistory:!0})}),[e,t,i,a,r])})(A,g,p,l,N);const X=(0,n.useCallback)((e=>y((t=>({...t,...e})))),[]),W=(0,n.useCallback)((()=>{X({columnSelectorVisible:!0})}),[X]),_=(0,n.useMemo)((()=>!L&&!D||L===j.XZ.DATE),[L,D]),[K,F]=(0,n.useState)(fs);(0,n.useEffect)((()=>{F(fs)}),[B]);const V=(0,n.useMemo)((()=>s.default.getVisibleTagKeyList(E)),[E]),[z,$]=(0,n.useState)(!1),[Y,q]=(0,n.useState)();(0,n.useEffect)((()=>{if(o)return;const e=fn({experiments:r,paramKeyList:R,metricKeyList:S,modelVersionsByRunUuid:w,runsExpanded:N,tagKeyList:V,nestChildren:_,referenceTime:K,runData:A,runUuidsMatchingFilter:M,runsPinned:O,runsHidden:P});v(e)}),[A,o,r,S,w,R,N,V,_,K,O,P,M,h]);const[G,J]=(0,m.Npd)(),Q=Ki(G),ee=(0,n.useCallback)((()=>{d&&!o&&c().then((e=>{Q(e,B)}))}),[d,o,c,B,Q]),te=(0,n.useCallback)(((e,t)=>{q({datasetWithTags:e,runData:t}),$(!0)}),[]);return(0,u.BX)(u.HY,{children:[(0,u.tZ)(Kr,{viewState:f,updateViewState:X,runsData:a,searchFacetsState:i,updateSearchFacets:l,requestError:h,expandRows:b,updateExpandRows:Z}),(0,u.BX)("div",{css:xs.createRunsTableWrapper(U),children:[(0,u.tZ)(dn,{experiments:r,runsData:a,searchFacetsState:i,viewState:f,isLoading:o,updateSearchFacets:l,updateViewState:X,onAddColumnClicked:W,rowsData:g,loadMoreRunsFunc:ee,moreRunsAvailable:d,onDatasetSelected:te,expandRows:b}),"CHART"===H&&(0,u.tZ)(Wi,{isLoading:o,comparedRuns:g,metricKeyList:a.metricKeyList,paramKeyList:a.paramKeyList,experimentTags:a.experimentTags,searchFacetsState:i,updateSearchFacets:l}),"ARTIFACT"===H&&(0,Ue.Hi)()&&(0,u.tZ)(vs,{visibleRuns:g.filter((e=>{let{hidden:t}=e;return!t})),viewState:f,updateViewState:X,updateSearchFacets:l,onDatasetSelected:te}),J,Y&&(0,u.tZ)(Fi.x,{isOpen:z,setIsOpen:$,selectedDatasetWithRun:Y,setSelectedDatasetWithRun:q})]})]})})),xs={createRunsTableWrapper:e=>({minHeight:225,height:"100%",display:"grid",position:"relative",gridTemplateColumns:e?"310px 1fr":"1fr"}),loadingFooter:()=>({justifyContent:"center",alignItems:"center",display:"flex",height:"72px"})},Cs={searchRunsApi:i.ht,loadMoreRunsApi:i.mx,searchRunsPayload:i.Yl,searchModelVersionsApi:pn.nI},bs=(0,c.$j)(((e,t)=>({runsData:$(e,t)})),void 0,void 0,{areStatesEqual:(e,t)=>e.entities.experimentTagsByExperimentId===t.entities.experimentTagsByExperimentId&&e.entities.latestMetricsByRunUuid===t.entities.latestMetricsByRunUuid&&e.entities.modelVersionsByRunUuid===t.entities.modelVersionsByRunUuid&&e.entities.paramsByRunUuid===t.entities.paramsByRunUuid&&e.entities.runInfosByUuid===t.entities.runInfosByUuid&&e.entities.runUuidsMatchingFilter===t.entities.runUuidsMatchingFilter&&e.entities.tagsByRunUuid===t.entities.tagsByRunUuid})(ys),Zs=e=>{const{searchFacetsState:t}=Ot();return e.isLoading?(0,u.tZ)(m.OdW,{active:!0}):(0,u.tZ)(bs,{...e,modelVersionFilter:t.modelVersionFilter,lifecycleFilter:t.lifecycleFilter})},Rs=e=>(0,u.tZ)(Nt,{actions:Cs,children:(0,u.tZ)(Zs,{...e})}),Ss=()=>{const e=mt(),t=(r=e,(0,c.v9)((e=>r.map((t=>e.entities.experimentsById[t])).filter(Boolean)),((e,t)=>(0,l.isEqual)(e,t))));var r;const[a]=t,{fetchExperiments:i,isLoadingExperiment:s,requestError:o}=B();(0,n.useEffect)((()=>{i(e)}),[i,e]);const d=e.length>1;(0,n.useMemo)((()=>JSON.stringify(e.sort())),[e]);if(o&&o.getErrorCode()===g.SM.PERMISSION_DENIED)return(0,u.tZ)(C,{errorMessage:o.getMessageField()});if(o&&o.getErrorCode()===g.SM.RESOURCE_DOES_NOT_EXIST)return(0,u.tZ)(v.Z,{});const p=s||!t[0];return(0,u.BX)("div",{css:Es.experimentViewWrapper,children:[p?(0,u.tZ)(m.OdW,{title:!0,paragraph:!1,active:!0}):(0,u.tZ)(u.HY,{children:d?(0,u.tZ)(F,{experiments:t}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(_,{experiment:a}),(0,u.tZ)(R,{experiment:a}),(0,u.tZ)(M,{experiment:a})]})}),(0,u.tZ)(Rs,{experiments:t,isLoading:p})]})},Es={experimentViewWrapper:{height:"100%",display:"flex",flexDirection:"column"}};const ws={setExperimentTagApi:i.Yp,getExperimentApi:i.eu,setCompareExperiments:i.MY},ks=()=>{const{formatMessage:e}=(0,a.Z)();return(0,n.useEffect)((()=>{const t=e({id:"5GCYzy",defaultMessage:"Experiment Runs - Databricks"});s.default.updatePageTitle(t)})),(0,u.tZ)(h,{actions:ws,children:(0,u.tZ)(Ss,{})})};var Ts=ks},1132:function(e,t,r){r.d(t,{Ih:function(){return i},Lg:function(){return c},MP:function(){return l},QW:function(){return s},To:function(){return d},aS:function(){return u},r$:function(){return o}});var n=r(74403),a=r(91604);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;const[t,r]=(0,a.useState)(void 0),[i,s]=(0,a.useState)(void 0),l=Boolean(window.ResizeObserver),o=(0,a.useCallback)(((e,t)=>{r(e),s(t)}),[]),c=(0,a.useMemo)((()=>(0,n.throttle)(o,e,{leading:!0})),[o,e]),[d,u]=(0,a.useState)(null);return(0,a.useEffect)((()=>{let e=!1;if(!d||!window.ResizeObserver)return;const t=new ResizeObserver((t=>{let[r]=t;e||c(Math.round(r.contentRect.width),Math.round(r.contentRect.height))}));return t.observe(d),()=>{e=!0,t.disconnect()}}),[d,c]),{containerDiv:d,setContainerDiv:u,layoutWidth:t,layoutHeight:i,isDynamicSizeSupported:l}},s={scatterChartHighlightStyles:{".trace.scatter path.point":{transition:"var(--trace-transition)"},".trace.scatter.is-highlight path.point":{opacity:"var(--trace-opacity-dimmed-low) !important"},".trace.scatter path.point.is-hover-highlight":{opacity:"var(--trace-opacity-highlighted) !important"},".trace.scatter path.point.is-selection-highlight":{opacity:"var(--trace-opacity-highlighted) !important",stroke:"var(--trace-stroke-color)",strokeWidth:"var(--trace-stroke-width) !important"}},chartWrapper:()=>({width:"100%",height:"100%",overflow:"hidden",position:"relative",fontSize:0,lineHeight:0,".js-plotly-plot .plotly .cursor-ew-resize, .js-plotly-plot .plotly .cursor-crosshair":{cursor:"pointer"},".js-plotly-plot g.infolayer > g.g-ytitle > text":{stroke:"white",strokeWidth:16,paintOrder:"stroke"},"--trace-transition":"opacity .16s","--trace-opacity-highlighted":"1","--trace-opacity-dimmed-low":"0.45","--trace-opacity-dimmed-high":"0.55","--trace-stroke-color":"black","--trace-stroke-width":"1"}),chart:{width:"100%",height:"100%"}},l={t:0,b:48,r:0,l:48,pad:0},o={t:0,b:48,r:0,l:80,pad:0},c={bgcolor:"white",bordercolor:"#ccc",font:{color:"black"}},d=e=>{const t="string"===typeof e?parseFloat(e):e;return t?Number.isFinite(t)&&!Number.isNaN(t)?Math.abs(t)===Number.MAX_VALUE?Number.POSITIVE_INFINITY*Math.sign(t):e:void 0:t},u=(e,t)=>{if(e.length<=t)return e;const r=t-3,n=Math.ceil(r/2),a=Math.floor(r/2);return e.substr(0,n)+"..."+e.substr(e.length-a)}}}]);
//# sourceMappingURL=347.c4481689.chunk.js.map